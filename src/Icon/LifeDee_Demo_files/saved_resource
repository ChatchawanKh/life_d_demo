(function() {
const apikey = 'test2022'
const server = {
  map: 'https://api.sphere.gistda.or.th/map',
  raster: 'https://basemap.sphere.gistda.or.th',
  vector: 'https://basemap.sphere.gistda.or.th',
  icon: 'https://basemap.sphere.gistda.or.th/icons',
  search: 'https://api.sphere.gistda.or.th/services/search',
  address: 'https://api.sphere.gistda.or.th/services/geo/address',
  poi: 'https://api.sphere.gistda.or.th/services/poi',
  route: 'https://api.sphere.gistda.or.th/services/route',
  
  camera: 'https://camera.longdo.com',
  event: 'https://event.longdo.com',
}
const defaultRate = 1080
const defaultMap = 'STREETS'
const defaultAttribution = '<a href="https://sphere.gistda.or.th/terms" target="_blank">Terms</a>'
let defaultHd = undefined
window.sphere = Object.assign({ objectcount: 0, Server: server }, window.sphere)
var __webpack_modules__={676:function(e){e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}
/**
   * splaytree v3.1.0
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   */var n=function(){function e(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return e}();function o(e,t){return e>t?1:e<t?-1:0}function i(e,t,r){for(var o=new n(null,null),i=o,a=o;;){var l=r(e,t.key);if(l<0){if(null===t.left)break;if(r(e,t.left.key)<0){var s=t.left;if(t.left=s.right,s.right=t,null===(t=s).left)break}a.left=t,a=t,t=t.left}else{if(!(l>0))break;if(null===t.right)break;if(r(e,t.right.key)>0&&(s=t.right,t.right=s.left,s.left=t,null===(t=s).right))break;i.right=t,i=t,t=t.right}}return i.right=t.left,a.left=t.right,t.left=o.right,t.right=o.left,t}function a(e,t,r,o){var a=new n(e,t);if(null===r)return a.left=a.right=null,a;var l=o(e,(r=i(e,r,o)).key);return l<0?(a.left=r.left,a.right=r,r.left=null):l>=0&&(a.right=r.right,a.left=r,r.right=null),a}function l(e,t,r){var n=null,o=null;if(t){var a=r((t=i(e,t,r)).key,e);0===a?(n=t.left,o=t.right):a<0?(o=t.right,t.right=null,n=t):(n=t.left,t.left=null,o=t)}return{left:n,right:o}}function s(e,t,r){return null===t?e:(null===e||((t=i(e.key,t,r)).left=e),t)}function c(e,t,r,n,o){if(e){n(t+(r?"└── ":"├── ")+o(e)+"\n");var i=t+(r?"    ":"│   ");e.left&&c(e.left,i,!1,n,o),e.right&&c(e.right,i,!0,n,o)}}var u=function(){function e(e){void 0===e&&(e=o),this._root=null,this._size=0,this._comparator=e}return e.prototype.insert=function(e,t){return this._size++,this._root=a(e,t,this._root,this._comparator)},e.prototype.add=function(e,t){var r=new n(e,t);null===this._root&&(r.left=r.right=null,this._size++,this._root=r);var o=this._comparator,a=i(e,this._root,o),l=o(e,a.key);return 0===l?this._root=a:(l<0?(r.left=a.left,r.right=a,a.left=null):l>0&&(r.right=a.right,r.left=a,a.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},e.prototype._remove=function(e,t,r){var n;return null===t?null:0===r(e,(t=i(e,t,r)).key)?(null===t.left?n=t.right:(n=i(e,t.left,r)).right=t.right,this._size--,n):t},e.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=i(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},e.prototype.findStatic=function(e){for(var t=this._root,r=this._comparator;t;){var n=r(e,t.key);if(0===n)return t;t=n<0?t.left:t.right}return null},e.prototype.find=function(e){return this._root&&(this._root=i(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},e.prototype.contains=function(e){for(var t=this._root,r=this._comparator;t;){var n=r(e,t.key);if(0===n)return!0;t=n<0?t.left:t.right}return!1},e.prototype.forEach=function(e,t){for(var r=this._root,n=[],o=!1;!o;)null!==r?(n.push(r),r=r.left):0!==n.length?(r=n.pop(),e.call(t,r),r=r.right):o=!0;return this},e.prototype.range=function(e,t,r,n){for(var o=[],i=this._comparator,a=this._root;0!==o.length||a;)if(a)o.push(a),a=a.left;else{if(i((a=o.pop()).key,t)>0)break;if(i(a.key,e)>=0&&r.call(n,a))return this;a=a.right}return this},e.prototype.keys=function(){var e=[];return this.forEach((function(t){var r=t.key;return e.push(r)})),e},e.prototype.values=function(){var e=[];return this.forEach((function(t){var r=t.data;return e.push(r)})),e},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},e.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},e.prototype.at=function(e){for(var t=this._root,r=!1,n=0,o=[];!r;)if(t)o.push(t),t=t.left;else if(o.length>0){if(t=o.pop(),n===e)return t;n++,t=t.right}else r=!0;return null},e.prototype.next=function(e){var t=this._root,r=null;if(e.right){for(r=e.right;r.left;)r=r.left;return r}for(var n=this._comparator;t;){var o=n(e.key,t.key);if(0===o)break;o<0?(r=t,t=t.left):t=t.right}return r},e.prototype.prev=function(e){var t=this._root,r=null;if(null!==e.left){for(r=e.left;r.right;)r=r.right;return r}for(var n=this._comparator;t;){var o=n(e.key,t.key);if(0===o)break;o<0?t=t.left:(r=t,t=t.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return p(this._root)},e.prototype.load=function(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=!1);var n=e.length,o=this._comparator;if(r&&y(e,t,0,n-1,o),null===this._root)this._root=h(e,t,0,n),this._size=n;else{var i=v(this.toList(),f(e,t),o);n=this._size+n,this._root=d({head:i},0,n)}return this},e.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){void 0===e&&(e=function(e){return String(e.key)});var t=[];return c(this._root,"",!0,(function(e){return t.push(e)}),e),t.join("")},e.prototype.update=function(e,t,r){var n=this._comparator,o=l(e,this._root,n),i=o.left,c=o.right;n(e,t)<0?c=a(t,r,c,n):i=a(t,r,i,n),this._root=s(i,c,n)},e.prototype.split=function(e){return l(e,this._root,this._comparator)},e}();function h(e,t,r,o){var i=o-r;if(i>0){var a=r+Math.floor(i/2),l=e[a],s=t[a],c=new n(l,s);return c.left=h(e,t,r,a),c.right=h(e,t,a+1,o),c}return null}function f(e,t){for(var r=new n(null,null),o=r,i=0;i<e.length;i++)o=o.next=new n(e[i],t[i]);return o.next=null,r.next}function p(e){for(var t=e,r=[],o=!1,i=new n(null,null),a=i;!o;)t?(r.push(t),t=t.left):r.length>0?t=(t=a=a.next=r.pop()).right:o=!0;return a.next=null,i.next}function d(e,t,r){var n=r-t;if(n>0){var o=t+Math.floor(n/2),i=d(e,t,o),a=e.head;return a.left=i,e.head=e.head.next,a.right=d(e,o+1,r),a}return null}function v(e,t,r){for(var o=new n(null,null),i=o,a=e,l=t;null!==a&&null!==l;)r(a.key,l.key)<0?(i.next=a,a=a.next):(i.next=l,l=l.next),i=i.next;return null!==a?i.next=a:null!==l&&(i.next=l),o.next}function y(e,t,r,n,o){if(!(r>=n)){for(var i=e[r+n>>1],a=r-1,l=n+1;;){do{a++}while(o(e[a],i)<0);do{l--}while(o(e[l],i)>0);if(a>=l)break;var s=e[a];e[a]=e[l],e[l]=s,s=t[a],t[a]=t[l],t[l]=s}y(e,t,r,l,o),y(e,t,l+1,n,o)}}var g=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},m=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var r=e.ll.x<t.ll.x?t.ll.x:e.ll.x,n=e.ur.x<t.ur.x?e.ur.x:t.ur.x;return{ll:{x:r,y:e.ll.y<t.ll.y?t.ll.y:e.ll.y},ur:{x:n,y:e.ur.y<t.ur.y?e.ur.y:t.ur.y}}},b=Number.EPSILON;void 0===b&&(b=Math.pow(2,-52));var w=b*b,x=function(e,t){if(-b<e&&e<b&&-b<t&&t<b)return 0;var r=e-t;return r*r<w*e*t?0:e<t?-1:1},k=function(){function t(){e(this,t),this.reset()}return r(t,[{key:"reset",value:function(){this.xRounder=new _,this.yRounder=new _}},{key:"round",value:function(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}]),t}(),_=function(){function t(){e(this,t),this.tree=new u,this.round(0)}return r(t,[{key:"round",value:function(e){var t=this.tree.add(e),r=this.tree.prev(t);if(null!==r&&0===x(t.key,r.key))return this.tree.remove(e),r.key;var n=this.tree.next(t);return null!==n&&0===x(t.key,n.key)?(this.tree.remove(e),n.key):e}}]),t}(),L=new k,S=function(e,t){return e.x*t.y-e.y*t.x},E=function(e,t){return e.x*t.x+e.y*t.y},O=function(e,t,r){var n={x:t.x-e.x,y:t.y-e.y},o={x:r.x-e.x,y:r.y-e.y},i=S(n,o);return x(i,0)},j=function(e){return Math.sqrt(E(e,e))},P=function(e,t,r){var n={x:t.x-e.x,y:t.y-e.y},o={x:r.x-e.x,y:r.y-e.y};return S(o,n)/j(o)/j(n)},T=function(e,t,r){var n={x:t.x-e.x,y:t.y-e.y},o={x:r.x-e.x,y:r.y-e.y};return E(o,n)/j(o)/j(n)},M=function(e,t,r){return 0===t.y?null:{x:e.x+t.x/t.y*(r-e.y),y:r}},C=function(e,t,r){return 0===t.x?null:{x:r,y:e.y+t.y/t.x*(r-e.x)}},R=function(e,t,r,n){if(0===t.x)return C(r,n,e.x);if(0===n.x)return C(e,t,r.x);if(0===t.y)return M(r,n,e.y);if(0===n.y)return M(e,t,r.y);var o=S(t,n);if(0==o)return null;var i={x:r.x-e.x,y:r.y-e.y},a=S(i,t)/o,l=S(i,n)/o;return{x:(e.x+l*t.x+(r.x+a*n.x))/2,y:(e.y+l*t.y+(r.y+a*n.y))/2}},A=function(){function t(r,n){e(this,t),void 0===r.events?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=n}return r(t,null,[{key:"compare",value:function(e,r){var n=t.comparePoints(e.point,r.point);return 0!==n?n:(e.point!==r.point&&e.link(r),e.isLeft!==r.isLeft?e.isLeft?1:-1:W.compare(e.segment,r.segment))}},{key:"comparePoints",value:function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}}]),r(t,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var t=e.point.events,r=0,n=t.length;r<n;r++){var o=t[r];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,t=0;t<e;t++){var r=this.point.events[t];if(void 0===r.segment.consumedBy)for(var n=t+1;n<e;n++){var o=this.point.events[n];void 0===o.consumedBy&&r.otherSE.point.events===o.otherSE.point.events&&r.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],t=0,r=this.point.events.length;t<r;t++){var n=this.point.events[t];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&e.push(n)}return e}},{key:"getLeftmostComparator",value:function(e){var t=this,r=new Map,n=function(n){var o=n.otherSE;r.set(n,{sine:P(t.point,e.point,o.point),cosine:T(t.point,e.point,o.point)})};return function(e,t){r.has(e)||n(e),r.has(t)||n(t);var o=r.get(e),i=o.sine,a=o.cosine,l=r.get(t),s=l.sine,c=l.cosine;return i>=0&&s>=0?a<c?1:a>c?-1:0:i<0&&s<0?a<c?-1:a>c?1:0:s<i?-1:s>i?1:0}}}]),t}(),I=0,W=function(){function t(r,n,o,i){e(this,t),this.id=++I,this.leftSE=r,r.segment=this,r.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=r,this.rings=o,this.windings=i}return r(t,null,[{key:"compare",value:function(e,t){var r=e.leftSE.point.x,n=t.leftSE.point.x,o=e.rightSE.point.x,i=t.rightSE.point.x;if(i<r)return 1;if(o<n)return-1;var a=e.leftSE.point.y,l=t.leftSE.point.y,s=e.rightSE.point.y,c=t.rightSE.point.y;if(r<n){if(l<a&&l<s)return 1;if(l>a&&l>s)return-1;var u=e.comparePoint(t.leftSE.point);if(u<0)return 1;if(u>0)return-1;var h=t.comparePoint(e.rightSE.point);return 0!==h?h:-1}if(r>n){if(a<l&&a<c)return-1;if(a>l&&a>c)return 1;var f=t.comparePoint(e.leftSE.point);if(0!==f)return f;var p=e.comparePoint(t.rightSE.point);return p<0?1:p>0?-1:1}if(a<l)return-1;if(a>l)return 1;if(o<i){var d=t.comparePoint(e.rightSE.point);if(0!==d)return d}if(o>i){var v=e.comparePoint(t.rightSE.point);if(v<0)return 1;if(v>0)return-1}if(o!==i){var y=s-a,g=o-r,m=c-l,b=i-n;if(y>g&&m<b)return 1;if(y<g&&m>b)return-1}return o>i?1:o<i||s<c?-1:s>c?1:e.id<t.id?-1:e.id>t.id?1:0}}]),r(t,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var t=this.leftSE.point,r=this.rightSE.point,n=this.vector();if(t.x===r.x)return e.x===t.x?0:e.x<t.x?1:-1;var o=(e.y-t.y)/n.y,i=t.x+o*n.x;if(e.x===i)return 0;var a=(e.x-t.x)/n.x,l=t.y+a*n.y;return e.y===l?0:e.y<l?-1:1}},{key:"getIntersection",value:function(e){var t=this.bbox(),r=e.bbox(),n=m(t,r);if(null===n)return null;var o=this.leftSE.point,i=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,s=g(t,a)&&0===this.comparePoint(a),c=g(r,o)&&0===e.comparePoint(o),u=g(t,l)&&0===this.comparePoint(l),h=g(r,i)&&0===e.comparePoint(i);if(c&&s)return h&&!u?i:!h&&u?l:null;if(c)return u&&o.x===l.x&&o.y===l.y?null:o;if(s)return h&&i.x===a.x&&i.y===a.y?null:a;if(h&&u)return null;if(h)return i;if(u)return l;var f=R(o,this.vector(),a,e.vector());return null===f?null:g(n,f)?L.round(f.x,f.y):null}},{key:"split",value:function(e){var r=[],n=void 0!==e.events,o=new A(e,!0),i=new A(e,!1),a=this.rightSE;this.replaceRightSE(i),r.push(i),r.push(o);var l=new t(o,a,this.rings.slice(),this.windings.slice());return A.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),A.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(o.checkForConsuming(),i.checkForConsuming()),r}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var t=0,r=this.windings.length;t<r;t++)this.windings[t]*=-1}},{key:"consume",value:function(e){for(var r=this,n=e;r.consumedBy;)r=r.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var o=t.compare(r,n);if(0!==o){if(o>0){var i=r;r=n,n=i}if(r.prev===n){var a=r;r=n,n=a}for(var l=0,s=n.rings.length;l<s;l++){var c=n.rings[l],u=n.windings[l],h=r.rings.indexOf(c);-1===h?(r.rings.push(c),r.windings.push(u)):r.windings[h]+=u}n.rings=null,n.windings=null,n.consumedBy=r,n.leftSE.consumedBy=r.leftSE,n.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var t=this._afterState.rings,r=this._afterState.windings,n=this._afterState.multiPolys,o=0,i=this.rings.length;o<i;o++){var a=this.rings[o],l=this.windings[o],s=t.indexOf(a);-1===s?(t.push(a),r.push(l)):r[s]+=l}for(var c=[],u=[],h=0,f=t.length;h<f;h++)if(0!==r[h]){var p=t[h],d=p.poly;if(-1===u.indexOf(d))if(p.isExterior)c.push(d);else{-1===u.indexOf(d)&&u.push(d);var v=c.indexOf(p.poly);-1!==v&&c.splice(v,1)}}for(var y=0,g=c.length;y<g;y++){var m=c[y].multiPoly;-1===n.indexOf(m)&&n.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(q.type){case"union":var r=0===e.length,n=0===t.length;this._isInResult=r!==n;break;case"intersection":var o,i;e.length<t.length?(o=e.length,i=t.length):(o=t.length,i=e.length),this._isInResult=i===q.numMultiPolys&&o<i;break;case"xor":var a=Math.abs(e.length-t.length);this._isInResult=a%2==1;break;case"difference":var l=function(e){return 1===e.length&&e[0].isSubject};this._isInResult=l(e)!==l(t);break;default:throw new Error("Unrecognized operation type found ".concat(q.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,r,n){var o,i,a,l=A.comparePoints(e,r);if(l<0)o=e,i=r,a=1;else{if(!(l>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));o=r,i=e,a=-1}return new t(new A(o,!0),new A(i,!1),[n],[a])}}]),t}(),D=function(){function t(r,n,o){if(e(this,t),!Array.isArray(r)||0===r.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=o,this.segments=[],"number"!=typeof r[0][0]||"number"!=typeof r[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=L.round(r[0][0],r[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var a=i,l=1,s=r.length;l<s;l++){if("number"!=typeof r[l][0]||"number"!=typeof r[l][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=L.round(r[l][0],r[l][1]);c.x===a.x&&c.y===a.y||(this.segments.push(W.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}i.x===a.x&&i.y===a.y||this.segments.push(W.fromRing(a,i,this))}return r(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,r=this.segments.length;t<r;t++){var n=this.segments[t];e.push(n.leftSE),e.push(n.rightSE)}return e}}]),t}(),N=function(){function t(r,n){if(e(this,t),!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new D(r[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var o=1,i=r.length;o<i;o++){var a=new D(r[o],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=n}return r(t,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),t=0,r=this.interiorRings.length;t<r;t++)for(var n=this.interiorRings[t].getSweepEvents(),o=0,i=n.length;o<i;o++)e.push(n[o]);return e}}]),t}(),Z=function(){function t(r,n){if(e(this,t),!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof r[0][0][0]&&(r=[r])}catch(e){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var o=0,i=r.length;o<i;o++){var a=new N(r[o],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=n}return r(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,r=this.polys.length;t<r;t++)for(var n=this.polys[t].getSweepEvents(),o=0,i=n.length;o<i;o++)e.push(n[o]);return e}}]),t}(),F=function(){function t(r){e(this,t),this.events=r;for(var n=0,o=r.length;n<o;n++)r[n].segment.ringOut=this;this.poly=null}return r(t,null,[{key:"factory",value:function(e){for(var r=[],n=0,o=e.length;n<o;n++){var i=e[n];if(i.isInResult()&&!i.ringOut){for(var a=null,l=i.leftSE,s=i.rightSE,c=[l],u=l.point,h=[];a=l,l=s,c.push(l),l.point!==u;)for(;;){var f=l.getAvailableLinkedEvents();if(0===f.length){var p=c[0].point,d=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){s=f[0].otherSE;break}for(var v=null,y=0,g=h.length;y<g;y++)if(h[y].point===l.point){v=y;break}if(null===v){h.push({index:c.length,point:l.point});var m=l.getLeftmostComparator(a);s=f.sort(m)[0].otherSE;break}var b=h.splice(v)[0],w=c.splice(b.index);w.unshift(w[0].otherSE),r.push(new t(w.reverse()))}r.push(new t(c))}}return r}}]),r(t,[{key:"getGeom",value:function(){for(var e=this.events[0].point,t=[e],r=1,n=this.events.length-1;r<n;r++){var o=this.events[r].point,i=this.events[r+1].point;0!==O(o,e,i)&&(t.push(o),e=o)}if(1===t.length)return null;var a=t[0],l=t[1];0===O(a,e,l)&&t.shift(),t.push(t[0]);for(var s=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:t.length-1,u=this.isExteriorRing()?t.length:-1,h=[],f=c;f!=u;f+=s)h.push([t[f].x,t[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],t=1,r=this.events.length;t<r;t++){var n=this.events[t];A.compare(e,n)>0&&(e=n)}for(var o=e.segment.prevInResult(),i=o?o.prevInResult():null;;){if(!o)return null;if(!i)return o.ringOut;if(i.ringOut!==o.ringOut)return i.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=i.prevInResult(),i=o?o.prevInResult():null}}}]),t}(),z=function(){function t(r){e(this,t),this.exteriorRing=r,r.poly=this,this.interiorRings=[]}return r(t,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(var t=0,r=this.interiorRings.length;t<r;t++){var n=this.interiorRings[t].getGeom();null!==n&&e.push(n)}return e}}]),t}(),G=function(){function t(r){e(this,t),this.rings=r,this.polys=this._composePolys(r)}return r(t,[{key:"getGeom",value:function(){for(var e=[],t=0,r=this.polys.length;t<r;t++){var n=this.polys[t].getGeom();null!==n&&e.push(n)}return e}},{key:"_composePolys",value:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];if(!o.poly)if(o.isExteriorRing())t.push(new z(o));else{var i=o.enclosingRing();i.poly||t.push(new z(i)),i.poly.addInterior(o)}}return t}}]),t}(),B=function(){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W.compare;e(this,t),this.queue=r,this.tree=new u(n),this.segments=[]}return r(t,[{key:"process",value:function(e){var t=e.segment,r=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),r;var n=e.isLeft?this.tree.insert(t):this.tree.find(t);if(!n)throw new Error("Unable to find segment #".concat(t.id," ")+"[".concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> ")+"[".concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=n,i=n,a=void 0,l=void 0;void 0===a;)null===(o=this.tree.prev(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);for(;void 0===l;)null===(i=this.tree.next(i))?l=null:void 0===i.key.consumedBy&&(l=i.key);if(e.isLeft){var s=null;if(a){var c=a.getIntersection(t);if(null!==c&&(t.isAnEndpoint(c)||(s=c),!a.isAnEndpoint(c)))for(var u=this._splitSafely(a,c),h=0,f=u.length;h<f;h++)r.push(u[h])}var p=null;if(l){var d=l.getIntersection(t);if(null!==d&&(t.isAnEndpoint(d)||(p=d),!l.isAnEndpoint(d)))for(var v=this._splitSafely(l,d),y=0,g=v.length;y<g;y++)r.push(v[y])}if(null!==s||null!==p){var m=null;m=null===s?p:null===p||A.comparePoints(s,p)<=0?s:p,this.queue.remove(t.rightSE),r.push(t.rightSE);for(var b=t.split(m),w=0,x=b.length;w<x;w++)r.push(b[w])}r.length>0?(this.tree.remove(t),r.push(e)):(this.segments.push(t),t.prev=a)}else{if(a&&l){var k=a.getIntersection(l);if(null!==k){if(!a.isAnEndpoint(k))for(var _=this._splitSafely(a,k),L=0,S=_.length;L<S;L++)r.push(_[L]);if(!l.isAnEndpoint(k))for(var E=this._splitSafely(l,k),O=0,j=E.length;O<j;O++)r.push(E[O])}}this.tree.remove(t)}return r}},{key:"_splitSafely",value:function(e,t){this.tree.remove(e);var r=e.rightSE;this.queue.remove(r);var n=e.split(t);return n.push(r),void 0===e.consumedBy&&this.tree.insert(e),n}}]),t}(),H="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,U="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,q=new(function(){function t(){e(this,t)}return r(t,[{key:"run",value:function(e,t,r){q.type=e,L.reset();for(var n=[new Z(t,!0)],o=0,i=r.length;o<i;o++)n.push(new Z(r[o],!1));if(q.numMultiPolys=n.length,"difference"===q.type)for(var a=n[0],l=1;l<n.length;)null!==m(n[l].bbox,a.bbox)?l++:n.splice(l,1);if("intersection"===q.type)for(var s=0,c=n.length;s<c;s++)for(var h=n[s],f=s+1,p=n.length;f<p;f++)if(null===m(h.bbox,n[f].bbox))return[];for(var d=new u(A.compare),v=0,y=n.length;v<y;v++)for(var g=n[v].getSweepEvents(),b=0,w=g.length;b<w;b++)if(d.insert(g[b]),d.size>H)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var x=new B(d),k=d.size,_=d.pop();_;){var S=_.key;if(d.size===k){var E=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(E.id," ")+"[".concat(E.leftSE.point.x,", ").concat(E.leftSE.point.y,"] -> ")+"[".concat(E.rightSE.point.x,", ").concat(E.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>H)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(x.segments.length>U)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var O=x.process(S),j=0,P=O.length;j<P;j++){var T=O[j];void 0===T.consumedBy&&d.insert(T)}k=d.size,_=d.pop()}L.reset();var M=F.factory(x.segments);return new G(M).getGeom()}}]),t}()),V=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return q.run("union",e,r)},J=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return q.run("intersection",e,r)},Y=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return q.run("xor",e,r)},X=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return q.run("difference",e,r)};return{union:V,intersection:J,xor:Y,difference:X}}()}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{"use strict";function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=Math.PI/180;sphere.Math={distance:function(e,t){return Math.sqrt(e*e+t*t)},isPointCrossLine:function(e,t,r,n,o,i){return n>t!=i>t&&e<(r-o)/(n-i)*(t-i)+o},closestPointOnLine:function(e,t,r,n,o,i){var a=o-r,l=i-n;if(!a&&!l)return{x:r,y:n};var s=((e-r)*a+(t-n)*l)/(a*a+l*l);return s<0?{x:r,y:n}:s>1?{x:o,y:i}:{x:r+s*a,y:n+s*l}},lineIntersectPoint:function(e,t,r,n,o,i,a,l,s){var c=o-e,u=i-t,h=r-e,f=n-t,p=a-o,d=l-i,v=h*d-f*p,y=h*h+f*f;if(v*v>1e-12*y*(p*p+d*d)){var g=(d*c-p*u)/v;if(g<-1e-6||g>1.000001)return null;var m=(f*c-h*u)/v;return m<-1e-6||m>1.000001?null:{x:e+g*h,y:t+g*f,a:g,b:m}}if(s)return null;if((v=c*f-u*h)*v>1e-12*y*(c*c+u*u))return null;var b,w,x,k=(h*c+f*u)/y,_=k+(h*p+f*d)/y;return k<_?(b=k,w=_):(b=_,w=k,x=!0),w?1==b?{x:r,y:n,a:1,b:x?1:0}:b<.999999&&w>1e-6?[b,w]:null:{x:e,y:t,a:0,b:x?0:1}},polylinePivot:function(e){var t="MultiLineString"==e.type?e.coordinates[0]:e.coordinates,r=t.length>>1;if(!r)return t[0];var n=t[r],o=t[r-1];return{lon:(3*n[0]+o[0])/4,lat:(3*n[1]+o[1])/4}},polygonPivot:function(e){for(var t,r=("MultiPolygon"==e.type?e.coordinates[0]:e.coordinates)[0],n=r[0][1],o=n,a=1;t=r[a];++a)t[1]<n?n=t[1]:t[1]>o&&(o=t[1]);for(var l,s=(n+o)/2,c=181,u=null,h=1,f=r[0];l=f,f=r[h];++h){var p=i.lineIntersectPoint(-181,s,181,s,l[0],l[1],f[0],f[1],!0);p&&(p.x<c?(u=c,c=p.x):p.x<u&&p.x!=c&&(u=p.x))}return 181==c&&null===u?c=u=r[0][0]:181==u&&(u=c),{lon:(c+u)/2,lat:s}},polylineCentroid:function(e){for(var t,r=e.coordinates,n=0,o=0,a=0,l=1,s=r[0];t=s,s=r[l];++l){var c=i.distance(s[0]-t[0],s[1]+t[1]);n+=c+c,o+=(s[0]+t[0])*c,a+=(s[1]+t[1])*c}return{lon:o/n,lat:a/n}},polygonCentroid:function(e){var r,n=0,o=0,i=0,a=t(e.coordinates);try{for(a.s();!(r=a.n()).done;)for(var l,s=r.value,c=1,u=s[0];l=u,u=s[c];++c){var h=l[0]*u[1]-u[0]*l[1];n+=h,o+=(l[0]+u[0])*h,i+=(l[1]+u[1])*h}}catch(e){a.e(e)}finally{a.f()}return{lon:o/n/3,lat:i/n/3}},locationBound:function(e){var t=e.coordinates||e;if(isFinite(t[0]))return{minLon:t[0],minLat:t[1],maxLon:t[0],maxLat:t[1]};if("Polygon"==e.type){for(var r,n=i.locationBound(t[0]),o=1;r=e.coordinates[o];++o){var a=i.locationBound(r);a.minLon<n.minLon&&(n.minLon=a.minLon),a.minLat<n.minLat&&(n.minLat=a.minLat),a.maxLon>n.maxLon&&(n.maxLon=a.maxLon),a.maxLat>n.maxLat&&(n.maxLat=a.maxLat)}return n}for(var l,s=t[0][0],c=t[0][1],u=s,h=c,f=1;l=t[f];++f)l[0]<s?s=l[0]:l[0]>u&&(u=l[0]),l[1]<c?c=l[1]:l[1]>h&&(h=l[1]);return{minLon:s,minLat:c,maxLon:u,maxLat:h}},length:function(e){for(var t,r=e.coordinates,n=0,i=1,a=r[0];t=a,a=r[i];++i){var l=a[1]*o,s=t[1]*o,c=l-s,u=(a[0]-t[0])*o,h=Math.pow(Math.sin(c/2),2)+Math.cos(l)*Math.cos(s)*Math.pow(Math.sin(u/2),2);n+=12742018*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}return n},area:function(e,r){var n,o=0,i=e.coordinates[0][0][1],a=i,l=t(e.coordinates);try{for(l.s();!(n=l.n()).done;)for(var s,c=n.value,u=1,h=c[0];s=h,h=c[u];++u)o+=s[0]*h[1]-h[0]*s[1],h[1]<i?i=h[1]:h[1]>a&&(a=h[1])}catch(e){l.e(e)}finally{l.f()}if(r)return o/2;var f=(i+a)/2;return o=Math.abs(o)/2*k.longitudeLength(f)*k.latitudeLength(f),o},minimumDistanceToPoint:function(e,r){if("Point"==e.type)return i.length({coordinates:[e.coordinates,r]});var n,o=1<<30,a={},l=t("Polygon"==e.type?e.coordinates:[e.coordinates]);try{for(l.s();!(n=l.n()).done;)for(var s,c=n.value,u=1,h=c[0];s=h,h=c[u];++u){var f=i.closestPointOnLine(r[0],r[1],h[0],h[1],s[0],s[1]),p=i.distance(f.x-r[0],f.y-r[1]);p<o&&(o=p,a.coordinates=[r,k.toPointLike(f)])}}catch(e){l.e(e)}finally{l.f()}return i.length(a)},containsPoint:function(e,r,n){var o,a=!1,l=t(e.coordinates);try{for(l.s();!(o=l.n()).done;)for(var s,c=o.value,u=1,h=c[0];s=h,h=c[u];++u){var f=i.closestPointOnLine(r[0],r[1],s[0],s[1],h[0],h[1]);if(f.x==r[0]&&f.y==r[1])return n;i.isPointCrossLine(r[0],r[1],s[0],s[1],h[0],h[1])&&(a=!a)}}catch(e){l.e(e)}finally{l.f()}return a},minimumDistance:function(r,n,o,a,l,s){if(i.intersects(r,n,o,a))return 0;if("Point"==r.type){if("Point"==n.type)return i.length({coordinates:[r.coordinates,n.coordinates]})-(l||0)-(s||0);var c,u,h=e(r.coordinates,2),f=h[0],p=h[1],d=1<<30,v=t("Polygon"==n.type?n.coordinates:[n.coordinates]);try{for(v.s();!(u=v.n()).done;)for(var y,g=u.value,m=1,b=g[0];y=b,b=g[m];++m){var w=i.closestPointOnLine(f,p,b[0],b[1],y[0],y[1]),x=i.distance(w.x-f,w.y-p);x<d&&(d=x,c=w)}}catch(e){v.e(e)}finally{v.f()}return i.length({coordinates:[r.coordinates,k.toPointLike(c)]})-(l||0)}return"Point"==n.type?i.minimumDistance(n,r,a,void 0,s):null},intersects:function(r,n,o,a){if("Point"==r.type){var l=e(r.coordinates,2),s=l[0],c=l[1];if("Point"==n.type)return i.distance(s-n.coordinates[0],c-n.coordinates[1])<=(o||0)+(a||0);if(o){var u,h=t("Polygon"==n.type?n.coordinates:[n.coordinates]);try{for(h.s();!(u=h.n()).done;)for(var f,p=u.value,d=1,v=p[0];f=v,v=p[d];++d){var y=i.closestPointOnLine(s,c,v[0],v[1],f[0],f[1]);if(i.distance(y.x-s,y.y-c)<=o)return!0}}catch(e){h.e(e)}finally{h.f()}return"Polygon"==n.type&&i.containsPoint(n,r.coordinates,!0)}if("LineString"==n.type){for(var g,m=1,b=n.coordinates[0];g=b,b=n.coordinates[m];++m){var w=i.closestPointOnLine(s,c,b[0],b[1],g[0],g[1]);if(w.x==s&&w.y==c)return!0}return!1}return i.containsPoint(n,r.coordinates,!0)}if("Point"==n.type)return i.intersects(n,r,a);var x,k=t("Polygon"==r.type?r.coordinates:[r.coordinates]);try{for(k.s();!(x=k.n()).done;)for(var _,L=x.value,S=1,E=L[0];_=E,E=L[S];++S){var O,j=t("Polygon"==n.type?n.coordinates:[n.coordinates]);try{for(j.s();!(O=j.n()).done;)for(var P,T=O.value,M=1,C=T[0];P=C,C=T[M];++M)if(i.lineIntersectPoint(E[0],E[1],_[0],_[1],C[0],C[1],P[0],P[1]))return!0}catch(e){j.e(e)}finally{j.f()}}}catch(e){k.e(e)}finally{k.f()}return"Polygon"==n.type?i.containsPoint(n,"Polygon"==r.type?r.coordinates[0][0]:r.coordinates[0],!0):"Polygon"==r.type&&i.containsPoint(r,"Polygon"==n.type?n.coordinates[0][0]:n.coordinates[0],!0)},contains:function(r,n,o,a){if("Point"==r.type){var l=e(r.coordinates,2),s=l[0],c=l[1];if("Point"==n.type){var u=i.distance(s-n.coordinates[0],c-n.coordinates[1]);return o&&!a?u<o:u<=(o||0)-(a||0)}if(o){var h,f=t("Polygon"==n.type?n.coordinates:[n.coordinates]);try{for(f.s();!(h=f.n()).done;){var p,d=t(h.value);try{for(d.s();!(p=d.n()).done;){var v=p.value;if(i.distance(s-v[0],c-v[1])>o)return!1}}catch(e){d.e(e)}finally{d.f()}}}catch(e){f.e(e)}finally{f.f()}return!0}return!1}if("LineString"==r.type){var y=e(r.coordinates,1)[0];if("Point"==n.type){if(a)return!1;var g=r.coordinates.at(-1),m=e(n.coordinates,2),b=m[0],w=m[1];return!(y[0]==b&&y[1]==w||g[0]==b&&g[1]==w)&&i.intersects(n,r)}if("LineString"==n.type){for(var x,_=1,L=n.coordinates[0];x=L,L=n.coordinates[_];++_){for(var S,E=!0,O=1,j=y;S=j,j=r.coordinates[O];++O){var P=i.lineIntersectPoint(j[0],j[1],S[0],S[1],L[0],L[1],x[0],x[1]);if((null==P?void 0:P[0])>=0&&(null==P?void 0:P[1])<=1){E=!1;break}}if(E)return!1}return!0}return!1}if("Point"==n.type){if(a){var T,M=e(n.coordinates,2),C=M[0],R=M[1],A=t(r.coordinates);try{for(A.s();!(T=A.n()).done;)for(var I,W=T.value,D=1,N=W[0];I=N,N=W[D];++D){var Z=i.closestPointOnLine(C,R,N[0],N[1],I[0],I[1]);if(i.distance(Z.x-C,Z.y-R)<a)return!1}}catch(e){A.e(e)}finally{A.f()}}return i.containsPoint(r,n.coordinates,!1)}var F,z=t("Polygon"==r.type?r.coordinates:[r.coordinates]);try{for(z.s();!(F=z.n()).done;)for(var G,B=F.value,H=1,U=B[0];G=U,U=B[H];++H){var q,V=t("Polygon"==n.type?n.coordinates:[n.coordinates]);try{for(V.s();!(q=V.n()).done;)for(var J,Y=q.value,X=1,Q=Y[0];J=Q,Q=Y[X];++X){var $=i.lineIntersectPoint(U[0],U[1],G[0],G[1],Q[0],Q[1],J[0],J[1],!0);if($&&$.a&&$.b&&1!=$.a&&1!=$.b)return!1}}catch(e){V.e(e)}finally{V.f()}}}catch(e){z.e(e)}finally{z.f()}return i.containsPoint(r,k.toCoordinate("Polygon"==n.type?i.polygonPivot(n):i.polylinePivot(n)),!1)},translate:function(e,r){var n=e.coordinates||e,o=[];if(isFinite(n[0]))o.push(n[0]+r.lon),o.push(n[1]+r.lat);else{var a,l=t(n);try{for(l.s();!(a=l.n()).done;){var s=a.value;o.push(i.translate(s,r).coordinates)}}catch(e){l.e(e)}finally{l.f()}}return{type:e.type,coordinates:o}},rotate:function(e,r,n){var o=e.coordinates||e,a=[];if(isFinite(o[0])){var l=o[0]-r.lon,s=o[1]-r.lat,c=i.distance(l,s),u=Math.atan2(s,l)-n;a.push(r.lon+c*Math.cos(u)),a.push(r.lat+c*Math.sin(u))}else{var h,f=t(o);try{for(f.s();!(h=f.n()).done;){var p=h.value;a.push(i.rotate(p,r,n).coordinates)}}catch(e){f.e(e)}finally{f.f()}}return{type:e.type,coordinates:a}}};var i=sphere.Math,a={pin:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="30" height="42"><path d="M15 .9A14 14 0 0 0 .9 14.5c0 5 7.4 17.3 12.7 25.7a1.5 1.5 0 0 0 2.8 0C21.7 31.8 29 19.6 29 14.5A13.9 13.9 0 0 0 15 1Z" style="fill-rule:evenodd;stroke:%23fff;stroke-miterlimit:10;stroke-width:1.2px;fill:%23183B7F"/><circle cx="15" cy="15.3" r="4.7" style="fill:%23fff;stroke:%23fff;stroke-miterlimit:10;stroke-width:1.2px"/><path d="M26.9 7.2a15.8 15.8 0 0 1 .1 2A16.7 16.7 0 0 1 4.7 25.1c2.6 5 6 10.6 9 15.1a1.5 1.5 0 0 0 2.7 0C21.7 31.8 29 19.6 29 14.5a13.3 13.3 0 0 0-2.2-7.3Z" style="fill:%23183B7F"/><path d="M27 9.2a15.8 15.8 0 0 0-.1-2A14.2 14.2 0 0 0 15 .9 14 14 0 0 0 .9 14.5c0 2.3 1.6 6.2 3.8 10.6A16.7 16.7 0 0 0 27 9.2Zm-12 1.4a4.7 4.7 0 1 1-4.7 4.8 4.7 4.7 0 0 1 4.7-4.8Z" style="fill:%232988F0"/></svg>',cameraMotion:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-3 0 37 24" width="40" height="24"><path d="M3.8 3.8h23.8v18.1H3.8V3.8Z" fill="%23f8e0eb"/><path d="M11 7v11l11-6Z" fill="%23e9168c"/><path d="M36.4 5.3h-.9l-4.2 4h-1.6V6a4.1 4.1 0 0 0-4-4h-4.8V.2a.3.3 0 0 0-.3-.3h-14a.3.3 0 0 0-.3.3v1.5h-.6a4.1 4.1 0 0 0-4 3.5H.3a.3.3 0 0 0-.3.3v14a.3.3 0 0 0 .3.3h1.3A4.1 4.1 0 0 0 5.7 24h20a4.1 4.1 0 0 0 4-4.1v-4.2h1.6l4.2 4h1a.4.4 0 0 0 .3-.4V5.7a.4.4 0 0 0-.4-.4ZM27.2 20a1.6 1.6 0 0 1-1.6 1.6H5.7a1.6 1.6 0 0 1-1.6-1.6v-14a1.6 1.6 0 0 1 1.6-1.5h20a1.6 1.6 0 0 1 1.5 1.5v14Z" fill="%23e9168c"/></svg>',cameraStill:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="-3 0 37 24" width="40" height="24"><path d="M3.8 3.8h23.8v18.1H3.8V3.8Z" fill="%23d4eefa"/><path d="M36.4 5.3h-.9l-4.2 4h-1.6V6a4.1 4.1 0 0 0-4-4h-4.8V.2a.3.3 0 0 0-.3-.3h-14a.3.3 0 0 0-.3.3v1.5h-.6a4.1 4.1 0 0 0-4 3.5H.3a.3.3 0 0 0-.3.3v14a.3.3 0 0 0 .3.3h1.3A4.1 4.1 0 0 0 5.7 24h20a4.1 4.1 0 0 0 4-4.1v-4.2h1.6l4.2 4h1a.4.4 0 0 0 .3-.4V5.7a.4.4 0 0 0-.4-.4ZM27.2 20a1.6 1.6 0 0 1-1.6 1.6H5.7a1.6 1.6 0 0 1-1.6-1.6v-14a1.6 1.6 0 0 1 1.6-1.5h20a1.6 1.6 0 0 1 1.5 1.5v14Z" fill="%2328abe1"/></svg>',aqi:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"><circle cx="20" cy="20" r="10" fill="%23{f}"/><text x="50%" y="24" text-anchor="middle" font-size="12" fill="%23333">{v}</text></svg>',dpad:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="45" width="45"><circle cx="23" cy="23" r="22" stroke="gray" fill="%23fff"/><path d="m10 18-5 5 5 5M18 10l5-5 5 5M35 18l5 5-5 5M18 35l5 5 5-5" style="stroke:%23183b7f;stroke-width:2;fill:none"/></svg>',searchZoom:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><defs><style>.cls-1{fill:%236da2f3;fill-rule:evenodd}</style></defs><path class="cls-1" d="M6.7 11.5a4.8 4.8 0 0 0 0-9.6 4.8 4.8 0 0 0 0 9.6Zm5.7-4.8A5.7 5.7 0 1 1 6.7 1a5.7 5.7 0 0 1 5.7 5.7Z"/><path d="M10 11.3h.1l3.4 3.4a.9.9 0 0 0 1.2-1.2l-3.3-3.4h-.1a5.4 5.4 0 0 1-1.2 1.2Z" style="fill:%236da2f3"/><path class="cls-1" d="M6.7 3.6a.4.4 0 0 1 .4.5v2.2h2.2a.4.4 0 0 1 .4.4.4.4 0 0 1-.4.4H7.1v2.2a.4.4 0 0 1-.8 0V7.1H4a.4.4 0 0 1-.5-.4.4.4 0 0 1 .5-.4h2.2V4a.4.4 0 0 1 .4-.5Z"/></svg>',routeFirst:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="37" height="51"><g filter="url(%23a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.43 4.84h.05c7.01 0 12.61 5.8 12.55 12.58a12.51 12.51 0 0 1-12.5 12.44h-.12c-6.9 0-12.47-5.56-12.54-12.44A12.6 12.6 0 0 1 18.43 4.84Z" fill="%23fff"/><g filter="url(%23b)"><path d="M18.51 6a11.5 11.5 0 1 0-.01 23 11.5 11.5 0 0 0 .01-23Zm.02 21.61h-.12A10.28 10.28 0 0 1 8.12 17.4 10.34 10.34 0 0 1 18.44 7.09h.04c5.77 0 10.36 4.79 10.32 10.3a10.27 10.27 0 0 1-10.27 10.22Z" fill="%23fff"/></g><path d="M18.45 2a15.2 15.2 0 0 0-15.4 16.6 16.4 16.4 0 0 0 3.2 8.3l.63.86a136.1 136.1 0 0 1 7.2 10.6c.65 1.1 1.17 2.27 1.7 3.52.33.76 1.12 1.85 2.54 1.89h.2c1.47 0 2.28-1.11 2.62-1.9a30.86 30.86 0 0 1 1.7-3.5c2.17-3.7 4.69-7.15 7.24-10.66l.59-.82a16.46 16.46 0 0 0 3.18-8.27A15.2 15.2 0 0 0 18.45 2Zm13.16 16.42a14.17 14.17 0 0 1-2.76 7.16l-.6.83a135.69 135.69 0 0 0-7.34 10.81A33.03 33.03 0 0 0 19.1 41c-.08.2-.2.34-.29.44a.38.38 0 0 1-.25.1h-.19c-.08 0-.15-.04-.23-.1-.1-.1-.2-.25-.29-.43a33.03 33.03 0 0 0-1.82-3.76c-2.22-3.77-4.78-7.3-7.3-10.77-.23-.3-.43-.6-.65-.9L5.3 18.43A12.95 12.95 0 0 1 18.45 4.24 12.96 12.96 0 0 1 31.61 18.4v.01Z" stroke="%23000" stroke-width=".5" stroke-miterlimit="10"/><path fill-rule="evenodd" clip-rule="evenodd" d="M18.45 2a15.2 15.2 0 0 0-15.4 16.6 16.4 16.4 0 0 0 3.2 8.3l.63.86a136.1 136.1 0 0 1 7.2 10.6c.65 1.1 1.17 2.27 1.7 3.52.33.76 1.12 1.85 2.54 1.89h.2c1.47 0 2.28-1.11 2.62-1.9a30.86 30.86 0 0 1 1.7-3.5c2.17-3.7 4.69-7.15 7.24-10.66l.59-.82a16.46 16.46 0 0 0 3.18-8.27A15.2 15.2 0 0 0 18.45 2Zm13.16 16.42a14.17 14.17 0 0 1-2.76 7.16l-.6.83a135.69 135.69 0 0 0-7.34 10.81A33.03 33.03 0 0 0 19.1 41c-.08.2-.2.34-.29.44a.38.38 0 0 1-.25.1h-.19c-.08 0-.15-.04-.23-.1-.1-.1-.2-.25-.29-.43a33.03 33.03 0 0 0-1.82-3.76c-2.22-3.77-4.78-7.3-7.3-10.77-.23-.3-.43-.6-.65-.9L5.3 18.43A12.95 12.95 0 0 1 18.45 4.24 12.96 12.96 0 0 1 31.61 18.4v.01Z" fill="%23fff"/><path d="M25.36 17.75 15 23.5V12l10.36 5.75Z" fill="%23454545"/><path fill-rule="evenodd" clip-rule="evenodd" d="M25.36 17.75 15 12.01v11.5l10.36-5.74v-.02Zm-2.37 0-6.83-3.8v7.6l6.83-3.8Z" fill="%23000"/><path d="M18.45 3.12c-8.5-.02-14.99 6.95-14.27 15.4a15.3 15.3 0 0 0 2.96 7.72c2.74 3.78 5.52 7.53 7.89 11.56a34.1 34.1 0 0 1 1.76 3.64c.26.6.76 1.19 1.54 1.2h.2c.79 0 1.3-.6 1.57-1.2a31.06 31.06 0 0 1 1.77-3.64c2.38-4.03 5.15-7.79 7.9-11.56a15.3 15.3 0 0 0 2.96-7.72 14.08 14.08 0 0 0-14.28-15.4Zm.07 25.61h-.12A11.4 11.4 0 0 1 7 17.41 11.46 11.46 0 0 1 18.42 5.97h.04c6.39 0 11.49 5.3 11.43 11.44a11.38 11.38 0 0 1-11.38 11.32Z" fill="url(%23c)"/><path d="M15.82 44.45a9.75 9.75 0 0 1 2.59-.31c1.03 0 1.93.12 2.58.3-.65.2-1.55.32-2.58.32a9.75 9.75 0 0 1-2.59-.31Zm-.85-2.08c.93-.3 2.15-.47 3.45-.47 1.29 0 2.51.17 3.45.47.46.15.91.36 1.28.64.35.26.78.75.78 1.44 0 .7-.43 1.18-.78 1.44-.36.28-.82.49-1.28.64-.94.3-2.16.47-3.45.47-1.3 0-2.52-.17-3.45-.47a4.43 4.43 0 0 1-1.28-.64 1.85 1.85 0 0 1-.79-1.44c0-.7.44-1.18.79-1.44a4.3 4.3 0 0 1 1.28-.64Z" stroke="%23454545" stroke-width=".5" stroke-miterlimit="10"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.82 44.45a9.75 9.75 0 0 1 2.59-.31c1.03 0 1.93.12 2.58.3-.65.2-1.55.32-2.58.32a9.75 9.75 0 0 1-2.59-.31Zm-.85-2.08c.93-.3 2.15-.47 3.45-.47 1.29 0 2.51.17 3.45.47.46.15.91.36 1.28.64.35.26.78.75.78 1.44 0 .7-.43 1.18-.78 1.44-.36.28-.82.49-1.28.64-.94.3-2.16.47-3.45.47-1.3 0-2.52-.17-3.45-.47a4.43 4.43 0 0 1-1.28-.64 1.85 1.85 0 0 1-.79-1.44c0-.7.44-1.18.79-1.44a4.3 4.3 0 0 1 1.28-.64Z" fill="%23fff"/><path d="M18.42 45.9c2.42 0 4.39-.65 4.39-1.44 0-.78-1.97-1.43-4.39-1.43s-4.39.65-4.39 1.43c0 .79 1.97 1.43 4.39 1.43Z" fill="url(%23d)"/></g><defs><linearGradient id="c" x1="18.45" y1="3.12" x2="18.45" y2="42.64" gradientUnits="userSpaceOnUse"><stop stop-color="%2377AF34"/><stop offset="1" stop-color="%237CCB1D"/></linearGradient><linearGradient id="d" x1="18.42" y1="43.02" x2="18.42" y2="45.89" gradientUnits="userSpaceOnUse"><stop stop-color="%2377AF34"/><stop offset="1" stop-color="%237CCB1D"/></linearGradient><filter id="a" x=".75" y=".75" width="35.41" height="49.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_1021_688"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_1021_688" result="shape"/></filter><filter id="b" x="5" y="5" width="27.01" height="27" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_1021_688"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_1021_688" result="shape"/></filter></defs></svg>',route:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="37" height="51"><g filter="url(%23a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.43 4.84h.05c7.01 0 12.61 5.8 12.55 12.58a12.51 12.51 0 0 1-12.5 12.44h-.12c-6.9 0-12.47-5.56-12.54-12.44A12.6 12.6 0 0 1 18.43 4.84Z" fill="%23fff"/><g filter="url(%23b)"><path d="M18.51 6a11.5 11.5 0 1 0-.01 23 11.5 11.5 0 0 0 .01-23Zm.02 21.61h-.12A10.28 10.28 0 0 1 8.12 17.4 10.34 10.34 0 0 1 18.44 7.09h.04c5.77 0 10.36 4.79 10.32 10.3a10.27 10.27 0 0 1-10.27 10.22Z" fill="%23fff"/></g><path d="M18.45 2a15.2 15.2 0 0 0-15.4 16.6 16.4 16.4 0 0 0 3.2 8.3l.63.86a136.1 136.1 0 0 1 7.2 10.6c.65 1.1 1.17 2.27 1.7 3.52.33.76 1.12 1.85 2.54 1.89h.2c1.47 0 2.28-1.11 2.62-1.9a30.86 30.86 0 0 1 1.7-3.5c2.17-3.7 4.69-7.15 7.24-10.66l.59-.82a16.46 16.46 0 0 0 3.18-8.27A15.2 15.2 0 0 0 18.45 2Zm13.16 16.42a14.17 14.17 0 0 1-2.76 7.16l-.6.83a135.69 135.69 0 0 0-7.34 10.81A33.03 33.03 0 0 0 19.1 41c-.08.2-.2.34-.29.44a.38.38 0 0 1-.25.1h-.19c-.08 0-.15-.04-.23-.1-.1-.1-.2-.25-.29-.43a33.03 33.03 0 0 0-1.82-3.76c-2.22-3.77-4.78-7.3-7.3-10.77-.23-.3-.43-.6-.65-.9L5.3 18.43A12.95 12.95 0 0 1 18.45 4.24 12.96 12.96 0 0 1 31.61 18.4v.01Z" stroke="%23000" stroke-width=".5" stroke-miterlimit="10"/><path fill-rule="evenodd" clip-rule="evenodd" d="M18.45 2a15.2 15.2 0 0 0-15.4 16.6 16.4 16.4 0 0 0 3.2 8.3l.63.86a136.1 136.1 0 0 1 7.2 10.6c.65 1.1 1.17 2.27 1.7 3.52.33.76 1.12 1.85 2.54 1.89h.2c1.47 0 2.28-1.11 2.62-1.9a30.86 30.86 0 0 1 1.7-3.5c2.17-3.7 4.69-7.15 7.24-10.66l.59-.82a16.46 16.46 0 0 0 3.18-8.27A15.2 15.2 0 0 0 18.45 2Zm13.16 16.42a14.17 14.17 0 0 1-2.76 7.16l-.6.83a135.69 135.69 0 0 0-7.34 10.81A33.03 33.03 0 0 0 19.1 41c-.08.2-.2.34-.29.44a.38.38 0 0 1-.25.1h-.19c-.08 0-.15-.04-.23-.1-.1-.1-.2-.25-.29-.43a33.03 33.03 0 0 0-1.82-3.76c-2.22-3.77-4.78-7.3-7.3-10.77-.23-.3-.43-.6-.65-.9L5.3 18.43A12.95 12.95 0 0 1 18.45 4.24 12.96 12.96 0 0 1 31.61 18.4v.01Z" fill="%23fff"/><path d="M18.45 3.12c-8.5-.02-14.99 6.95-14.27 15.4a15.3 15.3 0 0 0 2.96 7.72c2.74 3.78 5.52 7.53 7.89 11.56a34.1 34.1 0 0 1 1.76 3.64c.26.6.76 1.19 1.54 1.2h.2c.79 0 1.3-.6 1.57-1.2a31.06 31.06 0 0 1 1.77-3.64c2.38-4.03 5.15-7.79 7.9-11.56a15.3 15.3 0 0 0 2.96-7.72 14.08 14.08 0 0 0-14.28-15.4Zm.07 25.61h-.12A11.4 11.4 0 0 1 7 17.41 11.46 11.46 0 0 1 18.42 5.97h.04c6.39 0 11.49 5.3 11.43 11.44a11.38 11.38 0 0 1-11.38 11.32Z" fill="url(%23c)"/><path d="M15.82 44.45a9.75 9.75 0 0 1 2.59-.31c1.04 0 1.94.12 2.58.3-.64.2-1.54.32-2.58.32a9.75 9.75 0 0 1-2.59-.31Zm-.85-2.08c.93-.3 2.16-.47 3.45-.47 1.3 0 2.51.17 3.45.47.46.15.91.36 1.28.64.35.26.78.75.78 1.44 0 .7-.43 1.18-.78 1.44-.36.28-.82.49-1.28.64-.94.3-2.16.47-3.45.47-1.3 0-2.52-.17-3.45-.47a4.43 4.43 0 0 1-1.28-.64 1.85 1.85 0 0 1-.79-1.44c0-.7.44-1.18.79-1.44a4.3 4.3 0 0 1 1.28-.64Z" stroke="%23454545" stroke-width=".5" stroke-miterlimit="10"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.82 44.45a9.75 9.75 0 0 1 2.59-.31c1.04 0 1.94.12 2.58.3-.64.2-1.54.32-2.58.32a9.75 9.75 0 0 1-2.59-.31Zm-.85-2.08c.93-.3 2.16-.47 3.45-.47 1.3 0 2.51.17 3.45.47.46.15.91.36 1.28.64.35.26.78.75.78 1.44 0 .7-.43 1.18-.78 1.44-.36.28-.82.49-1.28.64-.94.3-2.16.47-3.45.47-1.3 0-2.52-.17-3.45-.47a4.43 4.43 0 0 1-1.28-.64 1.85 1.85 0 0 1-.79-1.44c0-.7.44-1.18.79-1.44a4.3 4.3 0 0 1 1.28-.64Z" fill="%23fff"/><path d="M18.42 45.9c2.42 0 4.38-.65 4.38-1.44 0-.78-1.96-1.43-4.38-1.43s-4.39.65-4.39 1.43c0 .79 1.97 1.43 4.39 1.43Z" fill="%23F0A617"/></g><text x="50%" y="23" text-anchor="middle">{i}</text><defs><filter id="a" x=".75" y=".75" width="35.41" height="49.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_1021_808"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_1021_808" result="shape"/></filter><filter id="b" x="5" y="5" width="27.01" height="27" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_1021_808"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_1021_808" result="shape"/></filter><linearGradient id="c" x1="18.45" y1="3.12" x2="18.45" y2="42.64" gradientUnits="userSpaceOnUse"><stop stop-color="%23F0A617"/><stop offset="1" stop-color="%23F7B202"/></linearGradient></defs></svg>',routeLast:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="37" height="51"><g filter="url(%23a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.43 4.84h.05c7.01 0 12.61 5.8 12.55 12.58a12.51 12.51 0 0 1-12.5 12.44h-.12c-6.9 0-12.47-5.56-12.54-12.44A12.6 12.6 0 0 1 18.43 4.84Z" fill="%23fff"/><g filter="url(%23b)"><path d="M18.51 6a11.5 11.5 0 1 0-.01 23 11.5 11.5 0 0 0 .01-23Zm.02 21.61h-.12A10.28 10.28 0 0 1 8.12 17.4 10.34 10.34 0 0 1 18.44 7.09h.04c5.77 0 10.36 4.79 10.32 10.3a10.27 10.27 0 0 1-10.27 10.22Z" fill="%23fff"/></g><path d="M18.45 2a15.2 15.2 0 0 0-15.4 16.6 16.4 16.4 0 0 0 3.2 8.3l.63.86a136.1 136.1 0 0 1 7.2 10.6c.65 1.1 1.17 2.27 1.7 3.52.33.76 1.12 1.85 2.54 1.89h.2c1.47 0 2.28-1.11 2.62-1.9a30.86 30.86 0 0 1 1.7-3.5c2.17-3.7 4.69-7.15 7.24-10.66l.59-.82a16.46 16.46 0 0 0 3.18-8.27A15.2 15.2 0 0 0 18.45 2Zm13.16 16.42a14.17 14.17 0 0 1-2.76 7.16l-.6.83a135.69 135.69 0 0 0-7.34 10.81A33.03 33.03 0 0 0 19.1 41c-.08.2-.2.34-.29.44a.38.38 0 0 1-.25.1h-.19c-.08 0-.15-.04-.23-.1-.1-.1-.2-.25-.29-.43a33.02 33.02 0 0 0-1.82-3.76c-2.22-3.77-4.78-7.3-7.3-10.77-.23-.3-.43-.6-.65-.9L5.3 18.43A12.95 12.95 0 0 1 18.45 4.24 12.96 12.96 0 0 1 31.61 18.4v.01Z" stroke="%23000" stroke-width=".5" stroke-miterlimit="10"/><path fill-rule="evenodd" clip-rule="evenodd" d="M18.45 2a15.2 15.2 0 0 0-15.4 16.6 16.4 16.4 0 0 0 3.2 8.3l.63.86a136.1 136.1 0 0 1 7.2 10.6c.65 1.1 1.17 2.27 1.7 3.52.33.76 1.12 1.85 2.54 1.89h.2c1.47 0 2.28-1.11 2.62-1.9a30.86 30.86 0 0 1 1.7-3.5c2.17-3.7 4.69-7.15 7.24-10.66l.59-.82a16.46 16.46 0 0 0 3.18-8.27A15.2 15.2 0 0 0 18.45 2Zm13.16 16.42a14.17 14.17 0 0 1-2.76 7.16l-.6.83a135.69 135.69 0 0 0-7.34 10.81A33.03 33.03 0 0 0 19.1 41c-.08.2-.2.34-.29.44a.38.38 0 0 1-.25.1h-.19c-.08 0-.15-.04-.23-.1-.1-.1-.2-.25-.29-.43a33.02 33.02 0 0 0-1.82-3.76c-2.22-3.77-4.78-7.3-7.3-10.77-.23-.3-.43-.6-.65-.9L5.3 18.43A12.95 12.95 0 0 1 18.45 4.24 12.96 12.96 0 0 1 31.61 18.4v.01Z" fill="%23fff"/><path d="M18.45 3.12c-8.5-.02-14.99 6.95-14.27 15.4a15.3 15.3 0 0 0 2.96 7.72c2.74 3.78 5.52 7.53 7.89 11.56a34.09 34.09 0 0 1 1.76 3.64c.26.6.76 1.19 1.54 1.2h.2c.79 0 1.3-.6 1.57-1.2a31.04 31.04 0 0 1 1.77-3.64c2.38-4.03 5.15-7.79 7.9-11.56a15.3 15.3 0 0 0 2.96-7.72 14.08 14.08 0 0 0-14.28-15.4Zm.07 25.61h-.12A11.4 11.4 0 0 1 7 17.41 11.46 11.46 0 0 1 18.42 5.97h.04c6.39 0 11.49 5.3 11.43 11.44a11.38 11.38 0 0 1-11.38 11.32Z" fill="url(%23c)"/><path d="M15.82 44.45a9.75 9.75 0 0 1 2.59-.31c1.03 0 1.93.12 2.58.3-.65.2-1.55.32-2.58.32a9.75 9.75 0 0 1-2.59-.31Zm-.85-2.08c.93-.3 2.15-.47 3.45-.47 1.29 0 2.51.17 3.45.47.46.15.91.36 1.28.64.35.26.78.75.78 1.44 0 .7-.43 1.18-.78 1.44-.36.28-.82.49-1.28.64-.94.3-2.16.47-3.45.47-1.3 0-2.52-.17-3.45-.47a4.43 4.43 0 0 1-1.28-.64 1.85 1.85 0 0 1-.79-1.44c0-.7.44-1.18.79-1.44a4.3 4.3 0 0 1 1.28-.64Z" stroke="%23454545" stroke-width=".5" stroke-miterlimit="10"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.82 44.45a9.75 9.75 0 0 1 2.59-.31c1.03 0 1.93.12 2.58.3-.65.2-1.55.32-2.58.32a9.75 9.75 0 0 1-2.59-.31Zm-.85-2.08c.93-.3 2.15-.47 3.45-.47 1.29 0 2.51.17 3.45.47.46.15.91.36 1.28.64.35.26.78.75.78 1.44 0 .7-.43 1.18-.78 1.44-.36.28-.82.49-1.28.64-.94.3-2.16.47-3.45.47-1.3 0-2.52-.17-3.45-.47a4.43 4.43 0 0 1-1.28-.64 1.85 1.85 0 0 1-.79-1.44c0-.7.44-1.18.79-1.44a4.3 4.3 0 0 1 1.28-.64Z" fill="%23fff"/><path d="M18.42 45.9c2.42 0 4.39-.65 4.39-1.44 0-.78-1.97-1.43-4.39-1.43s-4.39.65-4.39 1.43c0 .79 1.97 1.43 4.39 1.43Z" fill="%23E35031"/><path d="M13.96 12.96h9.11v9.12h-9.1v-9.12Z" fill="%23454545"/><path fill-rule="evenodd" clip-rule="evenodd" d="M22.16 13.87h-7.29v7.3h7.3v-7.3Zm-8.2-.9v9.1h9.11v-9.1h-9.1Z" fill="%23000"/></g><defs><filter id="a" x=".75" y=".75" width="35.41" height="49.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_1021_701"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_1021_701" result="shape"/></filter><filter id="b" x="5" y="5" width="27.01" height="27" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_1021_701"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_1021_701" result="shape"/></filter><linearGradient id="c" x1="18.45" y1="3.12" x2="18.45" y2="42.64" gradientUnits="userSpaceOnUse"><stop stop-color="%23BB5020"/><stop offset="1" stop-color="%23E35031"/></linearGradient></defs></svg>',poiAddress:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="24" height="24"><path fill="#277da1" d="M3.4 2.5a6.5 6.5 0 0 1 9.2 9.2l-.9.9L9.2 15a1.7 1.7 0 0 1-2.4 0l-2.6-2.5-.8-.8a6.5 6.5 0 0 1 0-9.2Zm8.4.8a5.4 5.4 0 0 0-7.6 7.6L5.3 12l2.3 2.3a.6.6 0 0 0 .8 0l2.5-2.5 1-.9a5.4 5.4 0 0 0 0-7.6ZM8 5a2.3 2.3 0 0 1 0 4.5A2.3 2.3 0 0 1 8 5Zm0 1.2a1.1 1.1 0 1 0 1.1 1 1.1 1.1 0 0 0-1.1-1Z"/></svg>',poiTel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="24" height="24"><path fill="#277da1" d="m4.4.8.9-.2a2 2 0 0 1 2.4 1.1l.7 1.5a2 2 0 0 1-.5 2.3l-1 1a.1.1 0 0 0-.1.2 3.5 3.5 0 0 0 .6 1.6 4.6 4.6 0 0 0 .9 1.3l.3.2 1.5-.5a2 2 0 0 1 2.3.7l1 1.4A2 2 0 0 1 13 14l-.6.6a2.8 2.8 0 0 1-2.7.7c-2-.6-4-2.4-5.6-5.2S2 4.9 2.5 2.8a2.8 2.8 0 0 1 1.9-2ZM4.7 2a1.7 1.7 0 0 0-1.1 1.2C3 4.8 3.6 7 5.2 9.7s3.1 4.1 4.8 4.6a1.7 1.7 0 0 0 1.6-.4l.7-.6a1 1 0 0 0 0-1.2l-.9-1.4a1 1 0 0 0-1-.3l-1.5.5c-.9.2-1.6-.5-2.5-2a4.3 4.3 0 0 1-.8-2.3 1.4 1.4 0 0 1 .4-.8l1.1-1a1 1 0 0 0 .2-1l-.6-1.6a1 1 0 0 0-1.1-.5Z"/></svg>',poiTag:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="24" height="24"><path fill="#e33437" d="M13.8.5a1.7 1.7 0 0 1 1.7 1.7v4.2a2.5 2.5 0 0 1-.7 1.8l-6.6 6.6a2.5 2.5 0 0 1-3.5 0l-3.5-3.5a2.5 2.5 0 0 1 0-3.5l6.6-6.6A2.5 2.5 0 0 1 9.6.5h4.2Zm0 1.2H9.5a1.4 1.4 0 0 0-1 .3L2 8.6a1.4 1.4 0 0 0 0 2L5.5 14a1.4 1.4 0 0 0 1.9 0L14 7.4a1.4 1.4 0 0 0 .4-1V2.2a.6.6 0 0 0-.6-.5Zm-2.2 1.5a1.2 1.2 0 1 1-1.1 1.1 1.2 1.2 0 0 1 1.2-1.1Z"/></svg>',searchU:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#f9844a" d="M5.4 2.1a1.9 1.9 0 0 0-1.2 3.4L2.7 8.6a2 2 0 0 0-.3 0 1.9 1.9 0 0 0 0 3.8A1.9 1.9 0 0 0 4 11.3l7.7 1.1a2 2 0 0 0 1.8 1.5 1.9 1.9 0 0 0 2-1.8.3.3 0 0 0 0-.2 1.9 1.9 0 0 0-2-1.8l-1-3.1a2 2 0 0 0 .8-1.5s0-.2 0-.2a1.9 1.9 0 0 0-3.6-.7L7.2 4a1.9 1.9 0 0 0-1.8-1.8Zm0 1a.8.8 0 1 1-.9.9.8.8 0 0 1 .9-.8Zm6.1 1.4a.8.8 0 1 1 0 1.7.8.8 0 1 1 0-1.7ZM7 5l2.7.8a1.9 1.9 0 0 0 1.8 1.6l1 3.1a1.9 1.9 0 0 0-.7 1l-7.6-1.2a1.9 1.9 0 0 0-.6-1l1.6-3.3h.2a1.9 1.9 0 0 0 1.6-1Zm0 1.5a.4.4 0 0 0-.3.2l-1 2.1a.4.4 0 0 0 .3.5l3.8.6a.4.4 0 0 0 .4-.3l.3-1.2a.4.4 0 0 0-.2-.4L7.2 6.4a.5.5 0 0 0-.2 0Zm.2.9 2.5 1.1-.2.6-2.9-.4ZM2.4 9.7a.8.8 0 1 1 0 1.6.8.8 0 1 1 0-1.7Zm11.2 1.5a.8.8 0 1 1-.8.8.8.8 0 0 1 .8-.8Z"/></svg>',searchA:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#4cc764" d="M5.5 3.7c-.2 0-.2.2-.3.3l-3 6.3a.2.2 0 0 0 .2.3l11.3 1.7a.2.2 0 0 0 .2-.4l-2.2-6.5-.4-.2-5.8-1.5Zm8.3 8.5Zm-8.4-10a1.8 1.8 0 0 0-1.1.4 1.8 1.8 0 0 0-.4.5l.6.4a1.1 1.1 0 0 1 .3-.3 1 1 0 0 1 .6-.3V2Zm.9.1-.2.7 1.5.4.2-.7Zm2.2.6-.2.7h.3l1.1.4.2-.7-1.1-.4h-.3Zm2.2.6-.2.7h.3a6 6 0 0 0 1 .4l.4-.7-1.1-.3h-.4Zm-7.1.3L2.8 5l.7.4.6-1.4Zm9.3.6-.6.5.1.2.4 1 .7-.2-.4-1.1a1.3 1.3 0 0 0-.2-.4ZM2.6 5.8l-.4.7-.3.7.7.3.3-.7.4-.7-.7-.3Zm11.1.8L13 7l.5 1.4.7-.2-.5-1.5ZM1.6 7.8.9 9.2l.7.3.7-1.3-.7-.4Zm12.8 1-.7.2.5 1.4.7-.2-.5-1.4ZM.6 10a1.8 1.8 0 0 0 .3 1.4 2 2 0 0 0 .2.3l.6-.5a1.2 1.2 0 0 1-.2-.2 1 1 0 0 1-.2-.8L.6 10Zm14.5 1-.7.2a6.6 6.6 0 0 1 .3.8 1 1 0 0 1 0 .5l.7.2a1.8 1.8 0 0 0 0-.9 5.3 5.3 0 0 0-.3-.9Zm-13 .5L2 12l1 .2h.5l.1-.7h-.4l-1-.2Zm2.2.3v.8l1.4.2.1-.8Zm2.3.3-.2.8L8 13l.2-.7-1.5-.3Zm2.2.4-.1.7.9.2h.6v-.7h-.5Zm2.2.3-.1.8 1.3.2h.2l.1-.8h-.2Zm3.3.1a1 1 0 0 1-.7.3h-.4v.7h.3a1.8 1.8 0 0 0 1.2-.3l.1-.1Z"/></svg>',searchL:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#fff" d="M6 2.7h4.1v10.6H6z"/><path fill="#252525" d="m15.4 11.9-3.6-8.5a.8.8 0 0 0-.8-.5H8.5v.6a.2.2 0 0 1-.1.3h-.8a.2.2 0 0 1-.2-.3V3H5a.8.8 0 0 0-.7.5L.6 11.9a.8.8 0 0 0 .7 1.2h5.1l.3-2.6a.4.4 0 0 1 .4-.4H9a.4.4 0 0 1 .4.4l.3 2.6h5a.8.8 0 0 0 .8-1.2ZM7.3 4.8a.2.2 0 0 1 .2-.2h1a.2.2 0 0 1 .2.2L8.8 6a.3.3 0 0 1-.3.3h-1a.3.3 0 0 1-.3-.3V4.8Zm1.4 4.5H7.3a.4.4 0 0 1-.4-.5L7 7.5a.4.4 0 0 1 .4-.3h1.2a.4.4 0 0 1 .4.3l.1 1.3a.4.4 0 0 1-.4.5Z"/></svg>',searchR:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#e33437" d="M2.5 1h4.8a2 2 0 0 1 1.5.6l5.6 5.6a2 2 0 0 1 0 3l-4.3 4.2a2 2 0 0 1-2.9 0L1.6 8.8A2 2 0 0 1 1 7.3V2.5A1.5 1.5 0 0 1 2.5 1Zm2 4.6a1 1 0 1 0-1-1 1 1 0 0 0 1 1Z"/></svg>',searchW:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#6da2f3" d="M3.5 5.8a2.7 2.7 0 0 0 2-1c.4-.4.6-.6 1-.6s.6.2 1 .5a2.6 2.6 0 0 0 4 0c.4-.3.6-.5 1-.5s.7.2 1 .5a2.7 2.7 0 0 0 2 1V4.3c-.4 0-.5-.2-1-.6a2.6 2.6 0 0 0-4 0c-.4.4-.6.6-1 .6s-.6-.2-1-.6a2.6 2.6 0 0 0-2-1 2.7 2.7 0 0 0-2 1c-.4.4-.6.6-1 .6s-.6-.2-1-.6a2.7 2.7 0 0 0-2-1v1.5c.4 0 .6.2 1 .6a2.7 2.7 0 0 0 2 1Zm0 3.7a2.7 2.7 0 0 0 2-1c.4-.4.6-.5 1-.5s.6.1 1 .5a2.6 2.6 0 0 0 4 0c.4-.4.6-.5 1-.5s.7.1 1 .5a2.7 2.7 0 0 0 2 1V8c-.4 0-.5-.2-1-.5a2.6 2.6 0 0 0-4 0c-.4.3-.6.5-1 .5s-.6-.2-1-.5a2.6 2.6 0 0 0-2-1 2.7 2.7 0 0 0-2 1c-.4.3-.6.5-1 .5s-.6-.2-1-.5a2.7 2.7 0 0 0-2-1V8c.4 0 .6.2 1 .5a2.7 2.7 0 0 0 2 1Zm0 3.7a2.7 2.7 0 0 0 2-1c.4-.3.6-.5 1-.5s.6.2 1 .5a2.6 2.6 0 0 0 4 0c.4-.3.6-.5 1-.5s.7.2 1 .5a2.7 2.7 0 0 0 2 1v-1.5c-.4 0-.5-.1-1-.5a2.6 2.6 0 0 0-4 0c-.4.4-.6.5-1 .5s-.6-.1-1-.5a2.7 2.7 0 0 0-2-1 2.7 2.7 0 0 0-2 1c-.4.4-.6.5-1 .5s-.6-.1-1-.5a2.7 2.7 0 0 0-2-1v1.5c.4 0 .6.2 1 .5a2.7 2.7 0 0 0 2 1Z"/></svg>',searchB:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#6da2f3" d="M8 3a1 1 0 0 0-.5 0L.7 6.8c-.3.1-.3.4 0 .5L7.5 11a1.2 1.2 0 0 0 1 0l6.8-3.7c.3-.1.3-.4 0-.6L8.5 3A1 1 0 0 0 8 3ZM1.2 8.3l-.5.3c-.3.1-.3.4 0 .6L7.5 13a1.1 1.1 0 0 0 1 0l6.8-3.7c.3-.2.3-.4 0-.6l-.5-.2-1 .5L8 12.2 2.2 9Z"/></svg>',searchZ:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><circle cx="8" cy="8" r="4" fill="#cacaca"/></svg>'};a.searchX=a.searchW;function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=k(a,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function d(){}function v(){}var y={};s(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=p.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var c=u(e[o],e,i);if("throw"!==c.type){var h=c.arg,f=h.value;return f&&"object"==l(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){h.value=e,a(h)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function k(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=v,s(b,"constructor",v),s(v,"constructor",d),d.displayName=s(v,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(x.prototype),s(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),s(b,a,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function f(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}var p={project:"https://cdn.jsdelivr.net/npm/proj4@2.8.0",wkt:"https://cdn.jsdelivr.net/npm/@terraformer/wkt@2.0.7",esrijson:"https://cdn.jsdelivr.net/npm/@terraformer/arcgis@2.1.0",topojson:"https://cdn.jsdelivr.net/npm/topojson-client@3.1.0",gml:server.map+"/js/gml2geojson.js",gpx:"https://cdn.jsdelivr.net/npm/@tmcw/togeojson@4.7.0"};p.kml=p.gpx;var d=2147483648/360,v='<div class="sphere-load"></div>',y=[[255,0,255],[0,255,255],[255,0,0],[0,255,0],[0,0,255],[255,102,187],[136,0,255],[68,255,187],[0,136,255],[255,136,0],[136,68,17],[119,136,153]],g=0,m={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],orange:[255,165,0],transparent:[0,0,0,0]},b={th:[null,"ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],en:[null,"jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},w={th:{km:" กม.",m:" ม.",sqkm:" ตร.กม.",sqm:" ตร.ม.",rai:" ไร่",ngan:" งาน",sqwa:" ตร.ว.",min:" นาที",hr:" ชม."},en:{km:" km",m:" m",sqkm:" sq.km",sqm:" sq.m",rai:" rai",ngan:" ngan",sqwa:" sq.wa",min:" min",hr:" hr"}},x={tagCount:0};sphere.MapTheme={poi:x},sphere.Util={append:function(e,t,r){var n=document.createElement(t);for(var o in r)n[o]=r[o];return e.appendChild(n),n},prepend:function(e,t,r,n){var o=document.createElement(t);for(var i in r)o[i]=r[i];return e.insertBefore(o,n||e.firstChild),o},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e},addClass:function(e,t){return e.className=e.className?"".concat(e.className," ").concat(t):t,e},removeClass:function(e,t){var r=" ".concat(e.className," ").replace(" ".concat(t," ")," ");return e.className=r.substring(1,r.length-1),e},loadStyle:function(e,t){k.append(document.head,"link",{rel:"stylesheet",type:"text/css",media:t||"all",href:e})},loadScript:function(e,t){var r={src:e};if(t){var n=setTimeout(t,1e4,!1);r.onload=function(){clearTimeout(n),t(!0)},r.onerror=function(){clearTimeout(n),t(!1)}}k.append(document.head,"script",r)},getJson:function(e,t){return new Promise((function(r){var n=new XMLHttpRequest;n.onload=n.ontimeout=n.onerror=function(e){r("load"==e.type&&200==e.target.status?e.target.response:null)},n.responseType=t||"json",n.timeout=1e4,n.open("GET",e),n.send()}))},isHD:function(){return null==defaultHd&&(defaultHd=devicePixelRatio>1.2?1:0),defaultHd},normToLat:function(e){return 360*(Math.atan(Math.exp(e*o))-Math.PI/4)/Math.PI},latToNorm:function(e){return Math.log(Math.tan(Math.PI*(.25+e/360)))/o},pointToLocation:function(e){return{lon:e.x/d-180,lat:k.normToLat(180-e.y/d)}},locationToPoint:function(e){return{x:Math.round((e.lon+180)*d),y:Math.round((180-k.latToNorm(e.lat))*d)}},poiPopupOptions:function(e,t,r,n){return{title:r,detail:v,loadDetail:(o=h().mark((function r(o){var i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k.getJson("".concat(e,"/get?id=").concat(t,"&locale=").concat(n,"&key=").concat(apikey));case 2:i=r.sent,k.empty(o),i.id&&o.appendChild(k.formatPoi(i,n));case 5:case"end":return r.stop()}}),r)})),i=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){f(i,r,n,a,l,"next",e)}function l(e){f(i,r,n,a,l,"throw",e)}a(void 0)}))},function(e){return i.apply(this,arguments)})};var o,i},validateLocation:function(e){return isFinite(e.lon)&&isFinite(e.lat)},sameLocation:function(e,t){return k.isAbsInRange(e[0]-t[0],1e-6)&&k.isAbsInRange(e[1]-t[1],1e-6)},longitudeLength:function(e){var t=e*o;return 111412.84*Math.cos(t)+-93.5*Math.cos(3*t)},latitudeLength:function(e){var t=e*o;return 111132.92+-559.82*Math.cos(2*t)+1.175*Math.cos(4*t)},length:function(e,t){return k.formatDistance(i.length(e),t)},area:function(e,t){return k.formatAllArea(i.area(e),t)},isAbsInRange:function(e,t){return e>=-t&&e<=t},bound:function(e,t,r){return e<t?t:e>r?r:e},svgIcon:function(e){return"".concat(server.icon,"/").concat(e,".svg")},labelIcon:function(e){return{html:'<div class="sphere-geomlabel">'.concat(e,"</div>")}},formatDate:function(e,t){var r=s(e.split("-"),3),n=r[0],o=r[1],i=r[2];return"".concat(+i," ").concat(b[t][+o]," ").concat(n-1957)},formatTime:function(e){var t=s(e.split(":"),2),r=t[0],n=t[1];return"".concat(r,":").concat(n)},formatDateTimeRange:function(e,t,r){var n=s(e.split(" "),2),o=n[0],i=n[1],a=s(t.split(" "),2),l=a[0],c=a[1],u=k.formatDate(o,r);return i&&(u+=" "+k.formatTime(i)),u+=" -",o!=l&&(u+=" "+k.formatDate(l,r)),c&&(u+=" "+k.formatTime(c)),u},formatInterval:function(e,t){var r=w[t];if(!r)return e;var n=e%60;if(n&&(e+=60-n),e<3600)return e/60+r.min;var o=e%3600;return"".concat(e/3600|0).concat(r.hr).concat(0==o?"":" "+k.formatInterval(o,t))},formatDistance:function(e,t){var r=w[t];return r?e>=1e5?(e/1e3|0).toLocaleString()+r.km:e>=1e4?(e/1e3).toFixed(1)+r.km:e>=1e3?(e/1e3).toFixed(2)+r.km:Math.ceil(e)+r.m:e},formatArea:function(e,t){var r=w[t];return r?e>=1e5?(e/1e6).toLocaleString(void 0,{maximumFractionDigits:e<1e10?1:0})+r.sqkm:(0|e).toLocaleString()+r.sqm:e},formatThaiArea:function(e,t){var r=w[t];if(!r)return e;var n="",o=e/1600|0;o&&(n+=o.toLocaleString()+r.rai);var i=e%1600/400|0;i&&(n+=" "+i+r.ngan);var a=e%400/4|0;return a&&(n+=" "+a+r.sqwa),n},formatAllArea:function(e,t){return t?k.formatArea(e,t)+(e<16e8&&e>=4?"<br />"+k.formatThaiArea(e,t):""):e},formatPoi:function(e,t){var r=document.createDocumentFragment();if(e.address&&k.append(r,"div",{className:"sphere-poi_item sphere-poi_address",innerHTML:"".concat(a.poiAddress,'<div class="sphere-poi_info">').concat(e.address,"</div>")}),e.tel&&k.append(r,"div",{className:"sphere-poi_item sphere-poi_tel",innerHTML:"".concat(a.poiTel,'<div class="sphere-poi_info">').concat(e.tel,"</div>")}),x.tagCount&&e.tag){for(var n=e.tag[0],o=Math.min(e.tag.length,x.tagCount),i=1;i<o;++i)n+=", "+e.tag[i];e.tag.length>o&&(n+=", ..."),k.append(r,"div",{className:"sphere-poi_item sphere-poi_tag",innerHTML:"".concat(a.poiTag,'<div class="sphere-poi_info">').concat(n,"</div>")})}return r},colorToRGBAArray:function(e,t,r){if(null==e){var n=y[g].concat(t);return r&&(g=(g+1)%y.length),n}if(Array.isArray(e))return e;if("#"==e[0])return e.length<4?[0,0,0,255]:e.length<6?[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),e.length>4?parseInt(e[4]+e[4],16):255]:[parseInt(e[1]+e[2],16),parseInt(e[3]+e[4],16),parseInt(e[5]+e[6],16),e.length>7?parseInt(e[7]+e[8],16):255];e=e.toLowerCase();var o=m[e];if(o)return o;if("r"==e[0]){var i=e.match(/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(\s*,\s*([\d\.]+)\s*)?/);return i?[parseInt(i[1]),parseInt(i[2]),parseInt(i[3]),i[5]?255*parseFloat(i[5]):255]:[0,0,0,255]}if("h"==e[0]){var a=e.match(/^hsla?\(\s*([\d\.]+)\s*,\s*([\d\.]+)%\s*,\s*([\d\.]+)%(\s*,\s*([\d\.]+)\s*)?/);if(!a)return[0,0,0,255];var l=parseFloat(a[1]),s=parseFloat(a[2])/100,c=parseFloat(a[3])/100,u=s*Math.min(c,1-c),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+l/30)%12;return 255*(c-u*Math.max(Math.min(t-3,9-t,1),-1))};return[h(0),h(8),h(4),a[5]?255*parseFloat(a[5]):255]}return[0,0,0,255]},fromCoordinate:function(e){return{lon:e[0],lat:e[1]}},toCoordinate:function(e){return[e.lon,e.lat]},toGeoPoint:function(e){return{type:"Point",coordinates:k.toCoordinate(e)}},stringToGeoPoint:function(e){return{type:"Point",coordinates:[parseFloat(e.longitude),parseFloat(e.latitude)]}},geoJSONwithZ:function(e,t){var r=e.coordinates||e;if(isFinite(r[0]))r.push(t);else{var n,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;k.geoJSONwithZ(i,t)}}catch(e){o.e(e)}finally{o.f()}}},fromLngLat:function(e){return{lon:e.lng,lat:e.lat}},fromLngLatBounds:function(e){return{minLon:e.getWest(),minLat:e.getSouth(),maxLon:e.getEast(),maxLat:e.getNorth()}},toLngLatBounds:function(e){return[e.minLon,e.minLat,e.maxLon,e.maxLat]},toPointLike:function(e){return[e.x,e.y]},initLibrary:function(e){return new Promise((function(t){return k.loadScript(p[e],t)}))},project:function(e,t,r){if(!window.proj4)throw new Error("Call Util.initLibrary('project') before use this function");return proj4(e,t,r)},WKTToGeoJSON:function(e){var t;if(null===(t=window.Terraformer)||void 0===t||!t.wktToGeoJSON)throw new Error("Call Util.initLibrary('wkt') before use this function");return Terraformer.wktToGeoJSON(e)},EsriJSONToGeoJSON:function(e){var t;if(null===(t=window.Terraformer)||void 0===t||!t.arcgisToGeoJSON)throw new Error("Call Util.initLibrary('esrijson') before use this function");return Terraformer.arcgisToGeoJSON(e)},TopoJSONToGeoJSON:function(e,t){if(!window.topojson)throw new Error("Call Util.initLibrary('topojson') before use this function");return topojson.feature(e,t)},GMLToGeoJSON:function(e){var t,r;if(!window.gml2geojson)throw new Error("Call Util.initLibrary('gml') before use this function");return null!==(t=e.startsWith)&&void 0!==t&&t.call(e,"<gml:")?null===(r=gml2geojson.parseGML('<featurecollection xmlns:gml="http://www.opengis.net/gml"><featuremember><x><geometryproperty>'.concat(e,"</geometryproperty></x></featuremember></featurecollection>")).features[0])||void 0===r?void 0:r.geometry:gml2geojson.parseGML(e)},GPXToGeoJSON:function(e){if(!window.toGeoJSON)throw new Error("Call Util.initLibrary('gpx') before use this function");return toGeoJSON.gpx(e instanceof XMLDocument?e:(new DOMParser).parseFromString(e,"application/xml"))},KMLToGeoJSON:function(e){if(!window.toGeoJSON)throw new Error("Call Util.initLibrary('kml') before use this function");return toGeoJSON.kml(e instanceof XMLDocument?e:(new DOMParser).parseFromString(e,"application/xml"))}};var k=sphere.Util;function _(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function O(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,r)}k.loadStyle(server.map+"/js/maplibre-gl.css"),k.loadScript(server.map+"/js/maplibre-gl.js"),k.loadScript(server.map+"/js/deck-gl.js"),sphere.EventName={Ready:"ready",Resize:"resize",Repaint:"repaint",Zoom:"zoom",ZoomRange:"zoomRange",Location:"location",Fullscreen:"fullscreen",Rotate:"rotate",Pitch:"pitch",ToolbarChange:"toolbarChange",DrawCreate:"drawCreate",DrawDelete:"drawDelete",TooltipChange:"tooltipChange",BeforeContextmenu:"beforeContextmenu",Contextmenu:"contextmenu",Mousemove:"mousemove",Click:"click",DoubleClick:"doubleClick",Wheel:"wheel",Drag:"drag",Drop:"drop",Idle:"idle",LayerChange:"layerChange",TileLoading:"tileLoading",TileLoaded:"tileLoaded",OverlayChange:"overlayChange",OverlayUpdate:"overlayUpdate",OverlayClick:"overlayClick",OverlayLoad:"overlayLoad",OverlayDrag:"overlayDrag",OverlayDrop:"overlayDrop",OverlayHover:"overlayHover",OverlayLeave:"overlayLeave",PopupClose:"popupClose",RouteError:"routeError",RouteComplete:"routeComplete",Error:"error"};var j=new WeakMap,P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,j,{writable:!0,value:{ready:[],resize:[],repaint:[],zoom:[],zoomRange:[],location:[],fullscreen:[],rotate:[],pitch:[],toolbarChange:[],drawCreate:[],drawDelete:[],tooltipChange:[],beforeContextmenu:[],contextmenu:[],mousemove:[],click:[],doubleClick:[],wheel:[],drag:[],drop:[],idle:[],layerChange:[],tileLoading:[],tileLoaded:[],overlayChange:[],overlayUpdate:[],overlayClick:[],overlayLoad:[],overlayDrag:[],overlayDrop:[],overlayHover:[],overlayLeave:[],popupClose:[],routeError:[],routeComplete:[],error:[]}})}var t,r,n;return t=e,(r=[{key:"_fireAsync",value:function(e,t){setTimeout(this.fire.bind(this),0,e,t)}},{key:"bind",value:function(e,t){var r=O(this,j)[e];if(!r)throw new Error("Unsupported event");return r.includes(t)||r.push(t),this}},{key:"unbind",value:function(e,t){var r=O(this,j)[e];if(!r)throw new Error("Unsupported event");var n=r.indexOf(t);return n>=0&&r.splice(n,1),this}},{key:"fire",value:function(e,t){var r,n=!1,o=_(O(this,j)[e]);try{for(o.s();!(r=o.n()).done;){var i=r.value;n=n||!1===i(t)}}catch(e){o.e(e)}finally{o.f()}return!n}}])&&S(t.prototype,r),n&&S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t,r){return t&&T(e.prototype,t),r&&T(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var C=0,R=23;sphere.LayerType={Vector:"Vector",XYZ:"XYZ",WMS:"WMS",WMTS:"WMTS",WMTS_REST:"WMTS_REST",TMS:"TMS"};var A=M((function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(r=r||{}).type&&r.type!=sphere.LayerType.Vector){var n=r.url,o=r.id||t||"l"+ ++sphere.objectcount;this.style={version:8,sources:{},glyphs:server.vector+"/vector/fonts/{fontstack}/{range}.pbf",layers:[{id:o,source:o,type:"raster"}]};var i={type:"raster",tileSize:256,attribution:!n||n.startsWith(server.raster)?defaultAttribution:r.attribution||""};this.style.sources[o]=i;var a="?";switch(r.type){case sphere.LayerType.XYZ:n||(n=server.raster+"/tiles"),t&&(n+="/"+t),r.srs&&(n+="/"+r.srs),n+="/{z}/{x}/{y}",0!=r.format&&(n+="."+(r.format||"png"));break;case sphere.LayerType.WMS:case sphere.LayerType.WMTS:n||(n=server.raster+"/service");var l=r.version||"1.1.1",s="".concat("1.3.0"==l?"C":"S","RS=").concat(r.srs||"EPSG:3857"),c=r.tileMatrixPrefix||"",u=r.styles||"",h=r.format||"image/png";n+=r.type==sphere.LayerType.WMS?"?SERVICE=WMS&REQUEST=GetMap&VERSION=".concat(l,"&").concat(s,"&BBOX={bbox-epsg-3857}&WIDTH=").concat(256,"&HEIGHT=").concat(256,"&LAYERS=").concat(t,"&STYLES=").concat(u,"&TRANSPARENT=true&TILED=true&FORMAT=").concat(h,"&EXCEPTIONS=BLANK"):"?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=".concat(t,"&STYLE=").concat(u,"&TILEMATRIXSET=").concat(s,"&TILEMATRIX=").concat(c,"{z}&TILEROW={y}&TILECOL={x}&FORMAT=").concat(h),a="&";break;case sphere.LayerType.WMTS_REST:n||(n=server.raster+"/wmts"),t&&(n+="/"+t),r.styles&&(n+="/"+r.styles);var f=r.srs||"EPSG:3857",p=r.format||"png";n+="/".concat(f,"/{z}/{x}/{y}.").concat(p);break;case sphere.LayerType.TMS:n||(n=server.raster+"/tms/1.0.0"),t&&(n+="/"+t),r.srs&&(n+="/"+r.srs),n+="/{z}/{x}/{y}",0!=r.format&&(n+="."+(r.format||"png")),i.scheme="tms";break;default:throw new Error("Invalid type")}r.extraQuery&&(n+=a+r.extraQuery),i.tiles=[n],r.source&&(i.minzoom=r.source.min,i.maxzoom=r.source.max),r.bound&&(i.bounds=[r.bound.minLon,r.bound.minLat,r.bound.maxLon,r.bound.maxLat]);var d=this.style.layers[0];r.zoomRange&&(d.minzoom=r.zoomRange.min,d.maxzoom=r.zoomRange.max+1),r.opacity&&(d.paint={"raster-opacity":r.opacity}),d.metadata={zIndex:r.zIndex}}else this.style=t}));function I(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Z(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function F(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,G(e,t,"get"))}function z(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,G(e,t,"set"),r),r}function G(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}sphere.Layer=A,sphere.Layers={SIMPLE:new A(server.vector+"/vector/sphere_simple.json"),STREETS:new A(server.vector+"/vector/sphere_streets.json"),HYBRID:new A(server.vector+"/vector/sphere_hybrid.json"),TRAFFIC:new A("https://msv.longdo.com/vector/longdo_traffic.json"),IMAGES:new A("thailand_images",{type:sphere.LayerType.XYZ,format:"jpeg",srs:"EPSG3857",source:{min:1,max:19}})};var B="sphere-geom",H=new WeakMap,U=new WeakSet,q=function(){function e(t){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),N(r=this,n=U),n.add(r),function(e,t,r){N(e,t),t.set(e,r)}(this,H,{writable:!0,value:void 0}),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"_layerList",[]),z(this,H,t)}var t,r,n;return t=e,r=[{key:"language",value:function(e){var t,r=F(this,H).Renderer,n=I(r.getStyle().layers);try{for(n.s();!(t=n.n()).done;){var o=t.value;if("symbol"==o.type){var i,a,l=null===(i=o.layout)||void 0===i||null===(a=i["text-field"])||void 0===a?void 0:a[0];if(null==l||"{"==l)continue;var s="coalesce"==l?"th":"en";if(null==e)return s;if(e==s)return this;r.setLayoutProperty(o.id,"text-field","th"==e?["coalesce",["get","name_l"],["get","name_e"]]:["get","name_e"])}}}catch(e){n.e(e)}finally{n.f()}return null==e?null:this}},{key:"setBase",value:function(e){var t=this;this._base=e;var r=F(this,H),n=r.Renderer,o=r.Event;return n.once("styledata",(function(){return setTimeout((function(){var r,i=I(t._layerList);try{for(i.s();!(r=i.n()).done;){var a,l=r.value,s=l.beforeId,c=l.layer,u=n.getLayer(s)?s:B;null!==(a=c.style)&&void 0!==a&&a.layers?Z(t,U,V).call(t,u,c.style):c.id&&c.type&&n.addLayer(c,u)}}catch(e){i.e(e)}finally{i.f()}o.fire("layerChange",e)}),100)})).setStyle(e.style||e),this}},{key:"add",value:function(e,t){var r=this,n=F(this,H).Renderer;if(!n.isStyleLoaded())return setTimeout(this.add.bind(this),100,e,t),this;if(e instanceof A&&!e.style.layers){var o=new URL(e.style);return k.getJson("mapbox://styles"==o.origin?"https://api.mapbox.com/styles/v1"+o.pathname+"?access_token="+maplibregl.accessToken:e.style).then((function(n){e.style=n,r.add(e,t)})),this}if(null==t){var i,a,l,s,c=null===(i=e.style)||void 0===i||null===(a=i.layers)||void 0===a||null===(l=a[0].metadata)||void 0===l?void 0:l.zIndex,u=I(n.getStyle().layers);try{for(u.s();!(s=u.n()).done;){var h,f=s.value;if(c<(null===(h=f.metadata)||void 0===h?void 0:h.zIndex)||"symbol"==f.type){t=f.id;break}}}catch(e){u.e(e)}finally{u.f()}t||(t=B)}else n.getLayer(t)||(t=B);if(e instanceof A)Z(this,U,V).call(this,t,e.style);else{if(!e.id||!e.type)throw new Error("Not layer");n.addLayer(e,t)}return this._layerList.push({beforeId:t,layer:e}),F(this,H).Event.fire("layerChange",e),this}},{key:"insert",value:function(e,t){return this.add(t,e)}},{key:"remove",value:function(e){var t,r=F(this,H).Renderer;if(null!==(t=e.style)&&void 0!==t&&t.layers){var n,o=I(e.style.layers);try{for(o.s();!(n=o.n()).done;){var i=n.value.id;r.removeLayer(i)}}catch(e){o.e(e)}finally{o.f()}for(var a in e.style.sources)r.removeSource(a)}else e.id&&r.removeLayer(e.id);return this._layerList=this._layerList.filter((function(t){return t.layer!=e})),F(this,H).Event.fire("layerChange",void 0,e),this}},{key:"clear",value:function(){return this._layerList=[],this.setBase(this._base)}},{key:"list",value:function(){return F(this,H).Renderer.getStyle().layers}},{key:"size",value:function(){return this.list().length}}],r&&D(t.prototype,r),n&&D(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e,t){var r=F(this,H).Renderer;try{for(var n in t.sources)r.addSource(n,t.sources[n]);var o,i=I(t.layers);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.addLayer(a,e)}}catch(e){i.e(e)}finally{i.f()}}catch(e){}}function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(){return ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=te(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ee.apply(this,arguments)}function te(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=le(e)););return e}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=le(e);if(t){var o=le(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ie(this,r)}}function ie(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ae(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}function se(e,t,r){ye(e,t),t.set(e,r)}function ce(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,he(e,t,"get"))}function ue(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,he(e,t,"set"),r),r}function he(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function de(e,t,r){return t&&pe(e.prototype,t),r&&pe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ve(e,t){ye(e,t),t.add(e)}function ye(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ge(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var me={url:a.pin,width:30,height:42,offset:[0,-21]};sphere.ObjectLabel={Title:{}};var be=new WeakSet,we=new WeakSet,xe=new WeakSet,ke=function(){function e(t){fe(this,e),ve(this,xe),ve(this,we),ve(this,be),this._geojson=t.geometry&&t.properties?t:{type:"Feature",geometry:t.coordinates?t:ge(this,be,_e).call(this,t),properties:{}}}return de(e,[{key:"location",value:function(e,t){if(e)return this.move(e,t);var r=this._geojson.geometry,n=r.type,o=r.coordinates;switch(n){case"Point":return k.fromCoordinate(o);case"LineString":return o.map(k.fromCoordinate);case"Polygon":for(var i,a=[],l=0;i=o[l];++l)l>0&&a.push(!0),a=a.concat(i.map(k.fromCoordinate));return a;default:return this._geojson.geometry}}},{key:"visibleRange",value:function(){return{min:this._geojson.properties.visibleMin,max:this._geojson.properties.visibleMax}}},{key:"active",value:function(){return"collection"in this}},{key:"element",value:function(e){var t;return null==e||null===(t=e.getElement)||void 0===t?void 0:t.call(e)}},{key:"move",value:function(e,t,r){var n;(this._geojson.geometry=e.geometry?e.geometry:e.coordinates?e:ge(this,be,_e).call(this,e),null!=r&&r.setLngLat)&&(t?ge(this,we,Le).call(this,r,!0===t?150:t):(r.setLngLat(this._geojson.geometry.coordinates),null===(n=this.collection)||void 0===n||n._fireUpdate(this)))}},{key:"shift",value:function(e){return this.move(i.translate(this._geojson.geometry,e))}},{key:"distance",value:function(e,t){return k.formatDistance(ge(this,xe,Se).call(this,i.minimumDistance,e),t)}},{key:"intersects",value:function(e){return ge(this,xe,Se).call(this,i.intersects,e)}},{key:"contains",value:function(e){return ge(this,xe,Se).call(this,i.contains,e)}},{key:"within",value:function(e){return e.contains(this)}},{key:"toJSON",value:function(e){return e?void 0:this._geojson}}]),e}();function _e(e){if(!e.length){if(k.validateLocation(e))return k.toGeoPoint(e);throw new Error("Unsupported Geometry")}var t,r=[],n=[],o=Y(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;!0===i||null===i?(r.push(n),n=[]):n.push(k.toCoordinate(i))}}catch(e){o.e(e)}finally{o.f()}return e.isPolygon||r.length?(r.push(n),{type:e.isPolygon?"Polygon":"MultiLineString",coordinates:r}):{type:"LineString",coordinates:n}}function Le(e,t){var r=Date.now(),n=e.getLngLat(),o=n.lng,i=n.lat,a=this._geojson.geometry.coordinates,l=a[0]-o,s=a[1]-i,c=this;requestAnimationFrame((function n(){var u,h=Date.now()-r;if(h>t)return e.setLngLat(a),void(null===(u=c.collection)||void 0===u||u._fireUpdate(c));requestAnimationFrame(n);var f=h/t;e.setLngLat([o+l*f,i+s*f])}))}function Se(e,t){return e(this._geojson.geometry,k.validateLocation(t)?k.toGeoPoint(t):t._geojson.geometry,this instanceof sphere.Circle?this.location().radius:void 0,t instanceof sphere.Circle?t.location().radius:void 0,this._geojson.properties.radius,t._geojson.properties.radius)}var Ee=new WeakMap,Oe=new WeakMap,je=function(e){re(r,e);var t=oe(r);function r(e,n){var o,i;if(fe(this,r),se(ae(i=t.call(this,e)),Ee,{writable:!0,value:void 0}),se(ae(i),Oe,{writable:!0,value:void 0}),((n=n||{}).popup||n.detail)&&(ue(ae(i),Oe,new Ce(e,n.popup||n)),ce(ae(i),Oe)._marker=ae(i),n.clickable=!0),null!==(o=n.icon)&&void 0!==o&&o.html)n.icon.offset&&(n.offset=k.toPointLike(n.icon.offset)),n.rotate&&(n.rotation=n.rotate),n.element=document.createElement("div"),n.element.innerHTML=n.icon.html,n.clickable&&(n.element.className="sphere-clickable"),n.title&&(n.element.title=n.title),n.zIndex&&(n.element.style.zIndex=n.zIndex),ue(ae(i),Ee,n);else{var a,l;if(n.icon){var s=(k.isHD()||!n.icon.url)&&n.icon.urlHD,c=s||n.icon.url,u=n.icon.offset;n.icon=$($({url:c},n.icon.size),{},{offset:u?Array.isArray(u)?u:k.toPointLike(u):null,hd:s?1:0})}else n.icon=me;n.visibleMin=(null===(a=n.visibleRange)||void 0===a?void 0:a.min)||C,n.visibleMax=(null===(l=n.visibleRange)||void 0===l?void 0:l.max)||R,i._geojson.properties=n,i._geojson.object=ae(i),n.zIndex&&k.geoJSONwithZ(i._geojson.geometry,n.zIndex)}return i}return de(r,[{key:"_add",value:function(e){var t=this;if(ce(this,Ee))return ce(this,Ee).addTo||(ue(this,Ee,new maplibregl.Marker(ce(this,Ee)).setLngLat(this._geojson.geometry.coordinates)),ce(this,Oe)&&ce(this,Ee).setPopup(ce(this,Oe)._add())),ce(this,Ee).addTo(e.Renderer).getElement().addEventListener("click",(function(){e._overlayClick=!0,e.Event.fire("overlayClick",t)})),!0;var r=this.collection._markerLayer,n=this._geojson.properties.icon;if(n.width)r.setProps({data:r.props.data.concat(this._geojson)});else{var o=new Image;o.onload=function(){n.width=o.width>>n.hd,n.height=o.height>>n.hd,r.setProps({data:r.props.data.concat(t._geojson)})},o.src=n.url}}},{key:"_remove",value:function(){var e=this;if(ce(this,Ee))return ce(this,Ee).remove(),!0;var t=this.collection._markerLayer;t.setProps({data:t.props.data.filter((function(t){return t!=e._geojson}))}),ce(this,Oe)&&this.collection.remove(ce(this,Oe))}},{key:"popup",value:function(){return ce(this,Oe)}},{key:"element",value:function(){return ee(le(r.prototype),"element",this).call(this,ce(this,Ee))}},{key:"move",value:function(e,t){var n,o;(ee(le(r.prototype),"move",this).call(this,e,t,ce(this,Ee)),ce(this,Ee))||(null===(n=this.collection)||void 0===n||n._updateOverlay(this),null===(o=ce(this,Oe))||void 0===o||o.move(e));return this}},{key:"pop",value:function(e){return this.active()&&ce(this,Oe)&&(null==e||e!=ce(this,Oe).active())&&(ce(this,Ee)?ce(this,Ee).togglePopup():ce(this,Oe).active()?this.collection.remove(ce(this,Oe)):this.collection.add(ce(this,Oe))),this}},{key:"update",value:function(e){if(ce(this,Ee))null!=e.draggable&&ce(this,Ee).setDraggable(e.draggable),null!=e.rotate&&ce(this,Ee).setRotation(e.rotate);else{var t,r=this._geojson.properties;for(var n in e)r[n]=e[n];null===(t=this.collection)||void 0===t||t._updateOverlay(this)}return this}}]),r}(ke);sphere.Marker=je;var Pe=new WeakMap,Te=new WeakMap,Me=new WeakMap,Ce=function(e){re(r,e);var t=oe(r);function r(e,n){var o;if(fe(this,r),se(ae(o=t.call(this,e)),Me,{get:Re,set:void 0}),se(ae(o),Pe,{writable:!0,value:void 0}),se(ae(o),Te,{writable:!0,value:void 0}),(n=n||{}).size){var i=n.size.maxWidth||n.size.width;i&&(n.maxWidth=i+"px")}return!1===n.closable&&(n.closeButton=!1),ue(ae(o),Pe,n),ue(ae(o),Te,{title:n.title,detail:n.detail}),o}return de(r,[{key:"_add",value:function(e){var t=this;if(!ce(this,Pe).addTo){var r=ce(this,Pe),n=r.loadHtml,o=r.loadDetail,i=ce(this,Pe).html||!!n&&" ";ue(this,Pe,new maplibregl.Popup(ce(this,Pe)).setLngLat(this._geojson.geometry.coordinates).setHTML(i?"":ce(this,Me)).on("open",(function(){t.collection||(t.collection=t._marker.collection,t.collection.add(t))})).on("close",(function(){var e;null===(e=t.collection)||void 0===e||e._closePopup(t)}))),i?ce(this,Pe).on("open",(function(e){var t=e.target.getElement();t.innerHTML=i,null==n||n(t)})):o&&ce(this,Pe).once("open",(function(e){ce(t,Te).element=e.target.getElement().children[1],o(ce(t,Te).element.children[1])}))}if(!e)return ce(this,Pe);ce(this,Pe).addTo(e.Renderer)}},{key:"_remove",value:function(){ce(this,Pe).remove()}},{key:"element",value:function(){return ee(le(r.prototype),"element",this).call(this,ce(this,Pe))}},{key:"move",value:function(e,t){return ee(le(r.prototype),"move",this).call(this,e,t,ce(this,Pe)),this}},{key:"title",value:function(e){if(null==e)return ce(this,Te).title;var t,r;(ce(this,Te).title=e,ce(this,Te).element)?ce(this,Te).element.firstChild.innerHTML=e:null===(t=(r=ce(this,Pe)).setHTML)||void 0===t||t.call(r,ce(this,Me));return this}},{key:"detail",value:function(e){if(null==e)return ce(this,Te).detail;var t,r;(ce(this,Te).detail=e,ce(this,Te).element)?ce(this,Te).element.children[1].innerHTML=e:null===(t=(r=ce(this,Pe)).setHTML)||void 0===t||t.call(r,ce(this,Me));return this}}]),r}(ke);function Re(){var e=ce(this,Te).title||"";return'<div class="sphere-popup_title" title="'.concat(e,'">').concat(e,'</div><div class="sphere-popup_detail">').concat(ce(this,Te).detail||"","</div>")}sphere.Popup=Ce;var Ae=__webpack_require__(676),Ie=__webpack_require__.n(Ae);function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}(e,t)||Fe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){nt(e,t),t.add(e)}function Ze(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Fe(e,t){if(e){if("string"==typeof e)return ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(e,t):void 0}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){He(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ve(e,t,r){return t&&qe(e.prototype,t),r&&qe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Je(){return Je="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Ye(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Je.apply(this,arguments)}function Ye(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tt(e)););return e}function Xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qe(e,t)}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=tt(e);if(t){var o=tt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ke(this,r)}}function Ke(e,t){if(t&&("object"===We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return et(e)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}function rt(e,t,r){nt(e,t),t.set(e,r)}function nt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ot(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,at(e,t,"get"))}function it(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,at(e,t,"set"),r),r}function at(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var lt=200,st={pointerOptions:{lineColor:"rgba(63, 63, 63, 0.5)",lineWidth:16,draggable:!0},labelLanguage:"th"};sphere.MapTheme.geometry=st,sphere.LineStyle={Solid:[0],Dashed:[6,4],Dot:[2,2]};var ct=new WeakMap,ut=new WeakMap,ht=function(e){Xe(r,e);var t=$e(r);function r(e,n){var o,a,l;return Ue(this,r),rt(et(l=t.call(this,e.length<2?[e[0],e[0]]:e)),ct,{writable:!0,value:void 0}),rt(et(l),ut,{writable:!0,value:void 0}),null==(n=n||{}).pivot&&(n.pivot=i.polylinePivot),"function"==typeof n.pivot&&(it(et(l),ct,n.pivot),n.pivot=n.pivot(l._geojson.geometry)),(n.popup||n.detail)&&(it(et(l),ut,new Ce(n.pivot,n.popup||n)),n.clickable=!0),n.lineWidth=parseInt(n.lineWidth)||4,n.lineColor=k.colorToRGBAArray(n.lineColor,lt,!0),n.visibleMin=(null===(o=n.visibleRange)||void 0===o?void 0:o.min)||C,n.visibleMax=(null===(a=n.visibleRange)||void 0===a?void 0:a.max)||R,!0===n.pointer&&(n.pointer=new bt({lon:0,lat:0},st.pointerOptions)),n.pointer&&(n.pointer.type="d",n.pointer.geometry=et(l)),n.label&&(!0===n.label&&(n.label=l.size(st.labelLanguage)),n.label=new je(n.pivot,Be({icon:k.labelIcon(n.label),visibleRange:n.visibleRange},n.labelOptions))),l._geojson.properties=n,l._geojson.object=et(l),n.zIndex&&k.geoJSONwithZ(l._geojson.geometry,n.zIndex),l}return Ve(r,[{key:"_add",value:function(){var e=this.collection._geomLayer;e.setProps({data:e.props.data.concat(this._geojson)})}},{key:"_remove",value:function(){var e=this,t=this.collection._geomLayer;t.setProps({data:t.props.data.filter((function(t){return t!=e._geojson}))}),ot(this,ut)&&this.collection.remove(ot(this,ut))}},{key:"_showPointer",value:function(e,t){var r,n=this._geojson.properties,o=n.pointer,a=n.lineWidth,l=this._geojson.geometry,s=l.type,c=l.coordinates,u=360*a/512/Math.pow(2,t),h=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Fe(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}("Polygon"==s?c:[c]);try{for(h.s();!(r=h.n()).done;)for(var f,p=r.value,d=1,v=p[0];f=v,v=p[d];++d){var y=i.closestPointOnLine(e[0],e[1],v[0],v[1],f[0],f[1]);if(k.isAbsInRange(e[0]-y.x,u)&&k.isAbsInRange(e[1]-y.y,u))return o.move({type:"Point",coordinates:k.toPointLike(y)}),void this.collection.add(o)}}catch(e){h.e(e)}finally{h.f()}}},{key:"_hidePointer",value:function(){var e,t=this._geojson.properties.pointer;null===(e=t.collection)||void 0===e||e.remove(t)}},{key:"popup",value:function(){return ot(this,ut)}},{key:"move",value:function(e){var t;if(Je(tt(r.prototype),"move",this).call(this,e),null===(t=this.collection)||void 0===t||t._updateOverlay(this),ot(this,ct)){var n,o,i=ot(this,ct).call(this,this._geojson.geometry);this._geojson.properties.pivot=i,null===(n=this._geojson.properties.label)||void 0===n||n.move(i),null===(o=ot(this,ut))||void 0===o||o.move(i)}return this}},{key:"pop",value:function(e,t){return this.active()&&ot(this,ut)&&(null==e||e!=ot(this,ut).active())&&(ot(this,ut).active()?this.collection.remove(ot(this,ut)):this.collection.add(this instanceof bt?ot(this,ut):ot(this,ut).move(t||this.pivot()))),this}},{key:"pivot",value:function(){return this._geojson.properties.pivot}},{key:"centroid",value:function(){return i.polylineCentroid(this._geojson.geometry)}},{key:"bound",value:function(){return i.locationBound(this._geojson.geometry)}},{key:"update",value:function(e){var t,r=this._geojson.properties;for(var n in e)r[n]="lineColor"==n||"fillColor"==n?k.colorToRGBAArray(e[n]):e[n];return null===(t=this.collection)||void 0===t||t._updateOverlay(this),this}},{key:"rotate",value:function(e){return this.move(i.rotate(this._geojson.geometry,this.pivot(),e*o))}},{key:"size",value:function(e){return k.length(this._geojson.geometry,e)}}]),r}(ke);sphere.Polyline=ht;var ft=new WeakSet,pt=function(e){Xe(r,e);var t=$e(r);function r(e,n){var o;if(Ue(this,r),e.length){for(var a,l=1,s=0,c=e[s];a=e[l],l<=e.length;++l)if(!a||!0===a||null===a){if(k.sameLocation(e[l-1],c)||e.splice(l++,0,Be({},c)),l-s<4)throw new Error("Not enough vertices");c=e[s=++l]}e.isPolygon=!0}return(n=n||{}).fillColor=k.colorToRGBAArray(n.fillColor,100,null!=n.lineColor),null==n.pivot&&(n.pivot=i.polygonPivot),Ne(et(o=t.call(this,e,n)),ft),o}return Ve(r,[{key:"centroid",value:function(){return i.polygonCentroid(this._geojson.geometry)}},{key:"size",value:function(e){return k.area(this._geojson.geometry,e)}},{key:"union",value:function(e,t){return Ze(this,ft,dt).call(this,Ie().union,e,t)}},{key:"intersection",value:function(e,t){return Ze(this,ft,dt).call(this,Ie().intersection,e,t)}},{key:"difference",value:function(e,t){return Ze(this,ft,dt).call(this,Ie().difference,e,t)}},{key:"split",value:function(e,t){return[this.difference(e,t),this.intersection(e,t)]}}]),r}(ht);function dt(e,t,r){var n=e(this._geojson.geometry.coordinates,t._geojson.geometry.coordinates);return n?new pt({type:"Polygon",coordinates:n[0]},r):null}sphere.Polygon=pt;var vt=new WeakMap,yt=new WeakSet,gt=function(e){Xe(r,e);var t=$e(r);function r(e,n,o){var i;return Ue(this,r),e.radius&&(o=n,n=e.radius),(o=o||{}).fillColor=k.colorToRGBAArray(o.fillColor,100,null!=o.lineColor),null==o.pivot&&(o.pivot=k.validateLocation(e)?e:k.fromCoordinate(e.coordinates||e.geometry.coordinates)),Ne(et(i=t.call(this,e,o)),yt),rt(et(i),vt,{writable:!0,value:void 0}),Ze(et(i),yt,mt).call(et(i),n||0),i}return Ve(r,[{key:"location",value:function(e,t){if(e)return this.move(e,t);var r=k.fromCoordinate(this._geojson.geometry.coordinates);return r.radius=ot(this,vt),r}},{key:"move",value:function(e){return Je(tt(r.prototype),"move",this).call(this,e),null!=e.radius&&Ze(this,yt,mt).call(this,e.radius),this}},{key:"centroid",value:function(){return k.fromCoordinate(this._geojson.geometry.coordinates)}},{key:"bound",value:function(){var e=De(this._geojson.geometry.coordinates,2),t=e[0],r=e[1];return{minLon:t-ot(this,vt),minLat:r-ot(this,vt),maxLon:t+ot(this,vt),maxLat:r+ot(this,vt)}}},{key:"size",value:function(e){var t=Math.PI*Math.pow(this._geojson.properties.radius,2);return k.formatAllArea(t,e)}},{key:"radius",value:function(e){return k.formatDistance(this._geojson.properties.radius,e)}}]),r}(ht);function mt(e){it(this,vt,e);var t=this._geojson.geometry.coordinates[1];this._geojson.properties.radius=e*(k.longitudeLength(t)+k.latitudeLength(t))/2}sphere.Circle=gt;var bt=function(e){Xe(r,e);var t=$e(r);function r(e,n){var o;return Ue(this,r),e.length&&(e=e[0]),null==(n=n||{}).pivot&&(n.pivot=k.validateLocation(e)?e:k.fromCoordinate(e.coordinates||e.geometry.coordinates)),(o=t.call(this,e,n))._geojson.properties.radius=0,o}return Ve(r,[{key:"centroid",value:function(){return k.fromCoordinate(this._geojson.geometry.coordinates)}},{key:"size",value:function(e){return k.formatDistance(0,e)}}]),r}(ht);sphere.Dot=bt;var wt,xt,kt,_t,Lt=function(e){Xe(r,e);var t=$e(r);function r(e,n,o){var i;return Ue(this,r),e.length?(i=e,o=n):e.minLon?(i=[{lon:e.minLon,lat:e.minLat},{lon:e.maxLon,lat:e.minLat},{lon:e.maxLon,lat:e.maxLat},{lon:e.minLon,lat:e.maxLat}],o=n):(n.width&&(n={lon:e.lon+n.width,lat:e.lat-n.height}),i=[e,{lon:n.lon,lat:e.lat},n,{lon:e.lon,lat:n.lat}]),t.call(this,i,o)}return Ve(r)}(pt);function St(e){return function(e){if(Array.isArray(e))return zt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ft(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jt(e,t,r){return t&&Ot(e.prototype,t),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pt(e,t){Mt(e,t),t.add(e)}function Tt(e,t,r){Mt(e,t),t.set(e,r)}function Mt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ct(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Rt(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,It(e,t,"get"))}function At(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,It(e,t,"set"),r),r}function It(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach((function(t){Nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ft(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Ft(e,t){if(e){if("string"==typeof e)return zt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zt(e,t):void 0}}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}sphere.Rectangle=Lt;var Gt={width:343};function Bt(e,t){return this.popup?Dt({title:e,detail:t},Rt(this,xt)):Dt({title:e},Rt(this,xt))}function Ht(e){var t=e.name?e.name:e.id;return y[(t.charCodeAt()-t.length)%y.length]}sphere.Overlays={cameras:{url:server.camera+"/feed/?command=json",popup:!0,motion:!0,theme:{motionIcon:{url:a.cameraMotion,size:{width:20,height:12}},stillIcon:{url:a.cameraStill,size:{width:20,height:12}},range:{motion:{min:12,max:R},city:{min:13,max:R},country:{min:9,max:R},highway:{min:8,max:R}}},_vdo:!0,createOverlays:function(e,t){var r=sphere.Overlays.cameras;r.items=e;var n,o=[],i=Zt(e);try{var a=function(){var e=n.value,t=r.motion&&"Y"==e.motion,i={title:e.title,icon:t?r.theme.motionIcon:r.theme.stillIcon,visibleRange:r.theme.range["Y"==e.incity?t?"motion":"city":e.camid.startsWith("DOHBHS")?"highway":"country"]};if(r.popup){var a=t&&e.hls_url;i.popup={title:e.title,size:Gt,loadDetail:function(n){n.innerHTML='<a href="'.concat(e.link,'" target="_blank"><video class="sphere-overlay_camera" poster="').concat(t&&!e.hls_url?e.vdourl:e.imgurl).concat(a?'" data-video="'+e.hls_url:"",'" loop playsinline></video>').concat(e.hls_url?'<img class="sphere-overlay_camera_overlay" src="'.concat(server.camera,"/feed/images/").concat(e.overlay_file,'">'):"","</a>"),a&&r.playVideo(n)}}}var l=new je(k.stringToGeoPoint(e),i);l.type="c",o.push(l)};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}r._vdo&&(t.Event.bind("popupClose",r.stopVideo),r._vdo=null),r.overlays=o},playVideo:function(e){var t=sphere.Overlays.cameras;t._vdo=e.firstChild.firstChild,t._vdo.oncanplaythrough=function(){t._vdo.play()};var r=t._vdo.getAttribute("data-video");t._vdo.canPlayType("application/vnd.apple.mpegurl")?t._vdo.src=r:window.Hls?Hls.isSupported()&&(t.hls=new Hls,t.hls.loadSource(r),t.hls.attachMedia(t._vdo)):k.loadScript("https://cdn.jsdelivr.net/npm/hls.js@1.2.9",(function(){t.playVideo(e)}))},stopVideo:function(e){var t,r;if("c"==(null===(t=e._marker)||void 0===t?void 0:t.type)){var n=sphere.Overlays.cameras;null===(r=n._vdo)||void 0===r||r.pause(),n._vdo=null,n.hls&&(n.hls.stopLoad(),delete n.hls)}}},events:{url:server.event+"/feed/json",popup:!0,refresh:180,theme:{icon:{size:{width:26,height:26}}},createOverlays:function(e,t){var r=sphere.Overlays.events;r.items=e;var n,o={th:" โดย ",en:" by "},i=t.language(),a="th"==i,l=[],s=Zt(e);try{var c=function(){var e=n.value,t="".concat(server.icon,"/event/").concat(e.icon),s={title:a?e.title:e.title_en||e.title,icon:Dt({url:t+".png",urlHD:t+"-2x.png"},r.theme.icon),visibleRange:{min:e.showlevel-1,max:R}};r.popup&&(s.popup={title:s.title,loadDetail:function(t){t.innerHTML='<div class="sphere-overlay_info">'.concat(k.formatDateTimeRange(e.start,e.stop,i),"<br />").concat(o[i]).concat(e.contributor,'</div><div class="sphere-overlay_description">').concat(e.images?'<div class="sphere-overlay_image"><a href="'.concat(e.images[0],'" target="_blank"><img src="').concat(e.images[0],'/thumbnail" /></a></div>'):"").concat(a?e.description:e.description_en||e.description,"</div>")}});var c=new je(k.stringToGeoPoint(e),s);c.type="e",l.push(c)};for(s.s();!(n=s.n()).done;)c()}catch(e){s.e(e)}finally{s.f()}r.overlays=l}},aqi:{url:"https://air4thai.net/forweb/getAQI_JSON.php",popup:!0,theme:{icon:{size:{width:40,height:40}},color:[,"3bccff","92d050","ffff00","ffa200","f04646"],text:{th:[,"ดีมาก","ดี","ปานกลาง","เริ่มมีผลกระทบต่อสุขภาพ","มีผลกระทบต่อสุขภาพ"],en:[,"Excellent","Satisfactory","Moderate","Unhealthy","Very Unhealthy"]}},createOverlays:function(e,t){var r=sphere.Overlays.aqi;r.items=e.stations;var n,o=t.language(),i="th"==o,l=[],s=Zt(e.stations);try{var c=function(){var e=n.value,t=e.AQILast,s=t.date,c=t.time,u=t.AQI,h=r.theme.color[u.color_id],f=a.aqi.replace("{f}",h).replace("{v}",u.aqi),p={title:i?e.nameTH:e.nameEN,icon:Dt({url:f},r.theme.icon)};r.popup&&(p.popup={title:p.title,loadDetail:function(t){t.innerHTML="<div>".concat(i?e.areaTH:e.areaEN,'</div><div class="sphere-overlay_info">').concat(k.formatDate(s,o)," ").concat(c,'</div><div class="sphere-overlay_aqi" style="background: #').concat(h,'">').concat(r.theme.text[o][u.color_id],"<div>").concat(u.aqi,"</div></div>")}});var d=new je({lon:parseFloat(e.long),lat:parseFloat(e.lat)},p);d.type="c",l.push(d)};for(s.s();!(n=s.n()).done;)c()}catch(e){s.e(e)}finally{s.f()}r.overlays=l}},Object:(wt=new WeakMap,xt=new WeakMap,kt=new WeakSet,_t=new WeakSet,function(){function e(t,r,n){Et(this,e),Pt(this,_t),Pt(this,kt),Tt(this,wt,{writable:!0,value:void 0}),Tt(this,xt,{writable:!0,value:void 0}),At(this,wt,r),At(this,xt,n||{}),this.url="".concat(server.poi,"/get?id=").concat(t),this.popup=!0}return jt(e,[{key:"createOverlays",value:function(e){this.items=[e];var t,r=Ct(this,kt,Bt).call(this,e.name,e.address);if("Point"==e.geo.type){if(!r.icon){var n=sphere.MapTheme.tag.icon,o=n[e.icon]||n.default;r.icon={url:k.svgIcon(e.icon),size:o}}t=new je(e,r)}else{var i=e.geo.type.endsWith("LineString")?ht:pt;r.label===sphere.ObjectLabel.Title&&(r.label=e.name),null==r.lineColor&&(r.lineColor=Ct(this,_t,Ht).call(this,e).concat(lt)),null==r.fillColor&&i==pt&&(r.fillColor=Ct(this,_t,Ht).call(this,e).concat(100)),t=new i(e.geo,r)}t.type=Rt(this,wt),this.overlays=[t]}}]),e}())};var Ut=new WeakMap,qt=new WeakMap,Vt=new WeakMap,Jt=new WeakSet,Yt=function(){function e(t){var r,n,o;function i(){r&&(r._geojson.properties.pointer&&r._hidePointer(),t.Event.fire("overlayLeave",r),r=null)}function a(e){if(e.picked){var n,o,a=e.object.properties;if(a.title)null===(n=t.Ui.Tooltip)||void 0===n||n.set(a.title,e.x,e.y,500);if(a.clickable)null===(o=t.Ui.Cursor)||void 0===o||o.set("pointer");else if(a.draggable){var l;null===(l=t.Ui.Cursor)||void 0===l||l.set("move")}var s=e.object.object;s==r||"d"==s.type&&s.geometry==r||(i(),r=s,t.Event.fire("overlayHover",r)),a.pointer&&r._showPointer(e.coordinate,t.Renderer.getZoom())}else{var c,u;null===(c=t.Ui.Cursor)||void 0===c||c.set(""),null===(u=t.Ui.Tooltip)||void 0===u||u.set(),i()}}function l(e){var r;t._overlayClick=!0;var n=e.object,o=n.object,i=n.properties;t.Event._fireAsync("overlayClick",o),!i.clickable||null!==(r=o.popup())&&void 0!==r&&r.active()||setTimeout((function(){o.pop(!0,{type:"Point",coordinates:e.coordinate})}),0)}function s(e){if(e.object.properties.draggable){var r=t.Renderer;return o=r.dragPan.isEnabled(),r.dragPan.disable(),r.__deck.tooltip.setTooltip(),n=e,!0}n=null}function c(e){if(n&&e.coordinate){var r={lon:e.coordinate[0]-n.coordinate[0],lat:e.coordinate[1]-n.coordinate[1]},o=e.object.object;return o.shift(r),n=e,t.Event.fire("overlayDrag",o),!0}}function u(){n&&(t.Event.fire("overlayDrop",n.object.object),n=null,o&&t.Renderer.dragPan.enable())}Et(this,e),Pt(this,Jt),Tt(this,Ut,{writable:!0,value:void 0}),Tt(this,qt,{writable:!0,value:[]}),Tt(this,Vt,{writable:!0,value:void 0}),At(this,Ut,t),t.Event.bind("ready",function(){var e=this,r=t.Renderer,n=r.getZoom();this._geomLayer=new deck.MapboxLayer({id:"sphere-geom",type:deck.GeoJsonLayer,data:[],pickable:!0,parameters:{depthTest:!1},updateTriggers:{getFilterValue:[n]},getFillColor:function(e){return e.properties.fillColor},getLineColor:function(e){return e.properties.lineColor},getLineWidth:function(e){return e.properties.lineWidth},lineWidthUnits:"pixels",getPointRadius:function(e){return e.properties.radius},extensions:[new deck.DataFilterExtension({filterSize:2}),new deck.PathStyleExtension({dash:!0})],getFilterValue:function(e){return[e.properties.visibleMin,e.properties.visibleMax]},filterRange:[[C,n],[n,R]],getDashArray:function(e){return e.properties.lineStyle},dashJustified:!0,dashGapPickable:!0,onHover:a,onClick:l,onDragStart:s,onDrag:c,onDragEnd:u}),r.addLayer(this._geomLayer),this._markerLayer=new deck.MapboxLayer({id:"sphere-marker",type:deck.GeoJsonLayer,data:[],pointType:"icon",pickable:!0,parameters:{depthTest:!1},getIconSize:function(e){return e.properties.icon.height},getIconAngle:function(e){return-e.properties.rotate},getIconPixelOffset:function(e){return e.properties.icon.offset},extensions:[new deck.DataFilterExtension({filterSize:2})],getFilterValue:function(e){return[e.properties.visibleMin,e.properties.visibleMax]},filterRange:[[C,n],[n,R]],onHover:a,onClick:l,onDragStart:s,onDrag:c,onDragEnd:u}),r.addLayer(this._markerLayer),r.__deck.props.getCursor=function(){return r.getCanvas().style.cursor},r.on("style.load",(function(){r.addLayer(e._geomLayer).addLayer(e._markerLayer)})).on("zoomend",(function(){var t=e._geomLayer.props,n=e._markerLayer.props;t.filterRange[0][1]=t.filterRange[1][0]=n.filterRange[0][1]=n.filterRange[1][0]=r.getZoom(),e._geomLayer.setProps(t),e._markerLayer.setProps(n)}))}.bind(this))}return jt(e,[{key:"_closePopup",value:function(e){e==Rt(this,Vt)&&(At(this,Vt,void 0),Rt(this,Ut).Event.fire("popupClose",e),delete e.collection)}},{key:"_updateOverlay",value:function(e){var t=e instanceof je?this._markerLayer:this._geomLayer;t.setProps({data:St(t.props.data)}),Rt(this,Ut).Event.fire("overlayUpdate",e)}},{key:"add",value:function(e){if(!(e instanceof ke))throw new Error("Not overlay");if(!e.active()){e.collection=this,e._add(Rt(this,Ut)),e.element()&&Rt(this,qt).push(e),Rt(this,Ut).Event._fireAsync("overlayChange",e);var t=e._geojson.properties.label;t&&this.add(t)}return e instanceof Ce&&e!=Rt(this,Vt)&&(this.remove(Rt(this,Vt)),At(this,Vt,e)),this}},{key:"remove",value:function(e){if(!(e instanceof ke))return this;if(e.collection==this){e.element()&&At(this,qt,Rt(this,qt).filter((function(t){return t!=e}))),e._remove(),delete e.collection,Rt(this,Ut).Event.fire("overlayChange",e);var t=e._geojson.properties.label;t&&this.remove(t)}return this}},{key:"load",value:function(e){var t=this,r=e instanceof sphere.Overlays.Object?"&locale=".concat(Rt(this,Ut).language(),"&key=").concat(apikey):"";return k.getJson(e.url+r).then((function(r){e.overlays&&t.unload(e),e.createOverlays(r,Rt(t,Ut));var n,o=Zt(e.overlays);try{for(o.s();!(n=o.n()).done;){var i=n.value;i instanceof A?Rt(t,Ut).Layers.add(i):t.add(i)}}catch(e){o.e(e)}finally{o.f()}e.refresh&&(e.timeout=setTimeout(t.load.bind(t),1e3*e.refresh,e)),Rt(t,Ut).Event.fire("overlayLoad",r)})),this}},{key:"unload",value:function(e){if(!e.overlays)return this;clearTimeout(e.timeout);var t,r=Zt(e.overlays);try{for(r.s();!(t=r.n()).done;){var n=t.value;n instanceof A?Rt(this,Ut).Layers.remove(n):this.remove(n)}}catch(e){r.e(e)}finally{r.f()}return delete e.items,delete e.overlays,this}},{key:"clear",value:function(){if(this.size()&&Rt(this,Ut).Event._fireAsync("overlayChange"),Ct(this,Jt,Xt).call(this,this._geomLayer),Ct(this,Jt,Xt).call(this,this._markerLayer),Rt(this,qt).length){var e,t=Zt(Rt(this,qt));try{for(t.s();!(e=t.n()).done;){var r=e.value;r._remove(),delete r.collection}}catch(e){t.e(e)}finally{t.f()}At(this,qt,[])}return Rt(this,Vt)&&Rt(this,Vt)._remove(),this}},{key:"list",value:function(){var e=this._geomLayer.props.data.map((function(e){return e.object})).concat(this._markerLayer.props.data.map((function(e){return e.object}))).concat(Rt(this,qt));return Rt(this,Vt)?e.concat(Rt(this,Vt)):e}},{key:"size",value:function(){var e=this._geomLayer.props.data.length+this._markerLayer.props.data.length+Rt(this,qt).length;return Rt(this,Vt)?e+1:e}},{key:"lastOpenPopup",value:function(){return Rt(this,Vt)}}]),e}();function Xt(e){if(e.props.data.length){var t,r=Zt(e.props.data);try{for(r.s();!(t=r.n()).done;){var n=t.value;delete n.object.collection,n.properties.label&&this.remove(n.properties.label)}}catch(e){r.e(e)}finally{r.f()}e.setProps({data:[]})}}function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){er(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rr(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nr(e,t){gr(e,t),t.add(e)}function or(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function ir(){return ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=ar(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ir.apply(this,arguments)}function ar(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fr(e)););return e}function lr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sr(e,t)}function sr(e,t){return sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sr(e,t)}function cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fr(e);if(t){var o=fr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ur(this,r)}}function ur(e,t){if(t&&("object"===Qt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hr(e)}function hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fr(e){return fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fr(e)}function pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vr(e,t,r){return t&&dr(e.prototype,t),r&&dr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yr(e,t,r){gr(e,t),t.set(e,r)}function gr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mr(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,wr(e,t,"get"))}function br(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,wr(e,t,"set"),r),r}function wr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var xr=300,kr={layerSelectorOptions:{th:{button:[{label:"แผนที่",value:sphere.Layers.STREETS},{label:"ดาวเทียม",value:sphere.Layers.HYBRID},{label:"จราจร",value:sphere.Layers.STREETS,add:sphere.Layers.TRAFFIC,load:!0}]},en:{button:[{label:"Map",value:sphere.Layers.STREETS,en:!0},{label:"Satellite",value:sphere.Layers.HYBRID},{label:"Traffic",value:sphere.Layers.STREETS,add:sphere.Layers.TRAFFIC,load:!0,en:!0}]}},contextLabel:{th:{clipboardToast:"คัดลอก {s} ไปยังคลิปบอร์ดแล้ว",msl:"ความสูงจากระดับน้ำทะเล "},en:{clipboardToast:"Copied {s} to clipboard",msl:"Height above sea level "}},toolbarOptions:{controls:{combine_features:!1,uncombine_features:!1}}};sphere.MapTheme.ui=kr;var _r=new WeakMap,Lr=function(){function e(t){pr(this,e),yr(this,_r,{writable:!0,value:void 0}),br(this,_r,t)}return vr(e,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(){return this._container=document.createElement("div"),this._container.className="maplibregl-ctrl",this._container.innerHTML=mr(this,_r),this._container}},{key:"onRemove",value:function(){this._container.parentNode.removeChild(this._container)}},{key:"visible",value:function(e){return null==e?"none"!=this._container.style.display:(this._container.style.display=e?"block":"none",this)}}]),e}();sphere.CustomControl=Lr;var Sr=new WeakMap,Er=new WeakMap,Or=function(e){lr(r,e);var t=cr(r);function r(){var e;pr(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return yr(hr(e=t.call.apply(t,[this].concat(o))),Sr,{writable:!0,value:void 0}),yr(hr(e),Er,{writable:!0,value:void 0}),e}return vr(r,[{key:"_repaint",value:function(){mr(this,Er).innerHTML=Math.round(10*mr(this,Sr).getZoom())/10}},{key:"getDefaultPosition",value:function(){return"top-left"}},{key:"onAdd",value:function(e){return br(this,Sr,e),this._container=document.createElement("div"),this._container.className="maplibregl-ctrl sphere-dpad",this._container.style.backgroundImage="url('".concat(a.dpad,"')"),br(this,Er,k.append(this._container,"div",{className:"sphere-zoomlabel"})),k.append(this._container,"div",{className:"sphere-goleft"}).addEventListener("click",(function(){return e.panBy([-300,0])})),k.append(this._container,"div",{className:"sphere-goright"}).addEventListener("click",(function(){return e.panBy([xr,0])})),k.append(this._container,"div",{className:"sphere-goup"}).addEventListener("click",(function(){return e.panBy([0,-300])})),k.append(this._container,"div",{className:"sphere-godown"}).addEventListener("click",(function(){return e.panBy([0,xr])})),e.on("zoom",this._repaint.bind(this)),this._repaint(),this._container}},{key:"onRemove",value:function(){mr(this,Sr).off("zoom",this._repaint),ir(fr(r.prototype),"onRemove",this).call(this)}}]),r}(Lr),jr=new WeakMap,Pr=new WeakMap,Tr=new WeakSet,Mr=new WeakSet,Cr=function(e){lr(r,e);var t=cr(r);function r(e){var n;return pr(this,r),nr(hr(n=t.call(this)),Mr),nr(hr(n),Tr),yr(hr(n),jr,{writable:!0,value:void 0}),yr(hr(n),Pr,{writable:!0,value:-1}),br(hr(n),jr,e),n}return vr(r,[{key:"onAdd",value:function(){if(this._container=document.createElement("div"),this._container.className="maplibregl-ctrl maplibregl-ctrl-group sphere-menubar",mr(this,jr).button)for(var e,t=0;e=mr(this,jr).button[t];++t)e.value||(e.value=e.label),e.element=k.append(this._container,"div",{className:"sphere-button",innerHTML:e.label,index:t}),e.element.addEventListener("click",or(this,Tr,Rr).bind(this));else mr(this,jr).button=[];return this._container}},{key:"selectIndex",value:function(e){return e<0?or(this,Mr,Ar).call(this):e<mr(this,jr).button.length&&or(this,Tr,Rr).call(this,{target:mr(this,jr).button[e].element}),this}}]),r}(Lr);function Rr(e){var t,r,n=or(this,Mr,Ar).call(this);br(this,Pr,e.target.index);var o=mr(this,jr).button[mr(this,Pr)];k.addClass(e.target,"sphere-button-active"),null===(t=(r=mr(this,jr)).change)||void 0===t||t.call(r,o,n)}function Ar(){if(mr(this,Pr)>=0){var e=mr(this,jr).button[mr(this,Pr)];return br(this,Pr,-1),k.removeClass(e.element,"sphere-button-active"),e}return null}sphere.MenuBar=Cr;var Ir=new WeakMap,Wr=new WeakMap,Dr=new WeakMap,Nr=new WeakMap,Zr=new WeakMap,Fr=new WeakSet,zr=new WeakSet,Gr=function(e){lr(r,e);var t=cr(r);function r(e){var n;pr(this,r),nr(hr(n=t.call(this)),zr),nr(hr(n),Fr),yr(hr(n),Ir,{writable:!0,value:void 0}),yr(hr(n),Wr,{writable:!0,value:void 0}),yr(hr(n),Dr,{writable:!0,value:"th"}),yr(hr(n),Nr,{writable:!0,value:void 0}),yr(hr(n),Zr,{writable:!0,value:!1}),br(hr(n),Ir,e),br(hr(n),Wr,{button:[],change:or(hr(n),Fr,Br).bind(hr(n))});var o,i=tr(kr.layerSelectorOptions[mr(hr(n),Dr)].button);try{for(i.s();!(o=i.n()).done;){var a=o.value;mr(hr(n),Wr).button.push(Kt({},a))}}catch(e){i.e(e)}finally{i.f()}return n}return vr(r,[{key:"onAdd",value:function(){return mr(this,Nr)||(br(this,Nr,new sphere.MenuBar(mr(this,Wr))),mr(this,Nr).onAdd(),mr(this,Ir).Event.bind("layerChange",or(this,zr,Hr).bind(this)),or(this,zr,Hr).call(this),this._container=mr(this,Nr)._container),this._container}},{key:"language",value:function(e){if(null==e)return mr(this,Dr);br(this,Dr,e.startsWith("th")?"th":"en");for(var t,r=kr.layerSelectorOptions[mr(this,Dr)].button,n=0;t=r[n];++n){var o=mr(this,Wr).button[n];o.element.innerHTML=o.label=t.label}return this}}]),r}(Lr);function Br(e){if(!mr(this,Zr)){var t=mr(this,Ir),r=t.Layers,n=t.Overlays;r._layerList=[],r.setBase(e.value),e.add&&r.add(e.add),mr(this,Ir).enableFilter(e.filter?e.filter:sphere.Filter.None),e.load?n.load(sphere.Overlays.events).load(sphere.Overlays.cameras):n.unload(sphere.Overlays.events).unload(sphere.Overlays.cameras),e.en&&r.language("en")}}function Hr(){for(var e,t=mr(this,Ir).Layers,r=t._base,n=t._layerList,o=0;e=mr(this,Wr).button[o];++o){var i;if(r==e.value&&(null===(i=n[0])||void 0===i?void 0:i.layer)==e.add&&null==n[1])return br(this,Zr,!0),mr(this,Nr).selectIndex(o),void br(this,Zr,!1)}mr(this,Nr).selectIndex(-1)}var Ur=new WeakMap,qr=new WeakMap,Vr=new WeakMap,Jr=new WeakSet,Yr=new WeakSet,Xr=new WeakSet,Qr=new WeakSet,$r=function(){function e(t){var r=this;pr(this,e),nr(this,Qr),nr(this,Xr),nr(this,Yr),nr(this,Jr),yr(this,Ur,{writable:!0,value:void 0}),yr(this,qr,{writable:!0,value:!0}),yr(this,Vr,{writable:!0,value:!0}),br(this,Ur,t);var n=function(){return r.visible(!1)};t.Renderer.on("contextmenu",(function(e){return r.visible(e.point,k.fromLngLat(e.lngLat))})).on("click",(function(e){"sphere-text"!=e.originalEvent.target.className&&n()})).on("movestart",n).on("zoomstart",n)}return vr(e,[{key:"visible",value:function(e,t){var r,n=this,o=mr(this,Ur),i=o.Renderer,a=o.Event,l=o.Search,s=null===(r=i.__deck)||void 0===r?void 0:r.tooltip;if(!s)return null!=e&&this;if(null==e)return s.isVisible&&"sphere-contextmenu"==s.el.className;if(e){var c=t.lat.toFixed(6),u=t.lon.toFixed(6);s.setTooltip({html:'<div></div><div class="sphere-text">'.concat(mr(this,Vr)?v:"",'</div><div class="sphere-contextmenu_location"><span class="sphere-link">').concat(c,'</span>, <span class="sphere-link">').concat(u,"</span></div>"),className:"sphere-contextmenu"},e.x,e.y);var h=s.el.children[2];h.firstChild.addEventListener("click",(function(){return or(n,Qr,rn).call(n,"".concat(c,", ").concat(u))})),h.lastChild.addEventListener("click",(function(){return or(n,Qr,rn).call(n,"".concat(u,", ").concat(c))}));var f=parseInt(i.getZoom());mr(this,Vr)&&l.address(t,{limit:f<12?"&noaoi=fast&nowater="+(f<7?"":"fast"):""}).then(or(this,Jr,Kr).bind(this)),mr(this,qr)&&f>=12&&server.poi&&l.nearPoi(t,{span:.01/(f-11),zoom:f+2,limit:5}).then(or(this,Yr,en).bind(this));var p=document.createElement("div");if(p.className="sphere-contextmenu_extra",!a.fire("beforeContextmenu",{location:t,add:function(e){e instanceof Element?p.appendChild(e):p.innerHTML+=e}}))return this;p.children.length&&s.el.appendChild(p),a.fire("contextmenu")}else s.setTooltip();return this}},{key:"enableNearPoi",value:function(e){return null==e?mr(this,qr):(br(this,qr,e),this)}},{key:"enableAddress",value:function(e){return null==e?mr(this,Vr):(br(this,Vr,e),this)}}]),e}();function Kr(e){var t=mr(this,Ur).Renderer.__deck.tooltip.el.children,r=t[1];if(e&&isNaN(e.geocode)){var n="";e.country&&(e.province&&(e.district&&(e.subdistrict&&(n=e.subdistrict+", "),n+=e.district+", "),n+=e.province+", "),e.geocode?n=n.substring(0,n.length-2):n+=e.country),r.innerHTML=n}else if(e&&!e.error){var o,i,a,l=mr(this,Ur).Search.language();if("th"==l?(o=" ",i=e.house_num?e.house_num+" ":"",a=""):(o=", ",i="",a=e.house_num?e.house_num+" ":""),r.innerHTML="".concat(i).concat(e.aoi?e.aoi+o:"").concat(a).concat(e.water?e.water+o:e.road?e.road+o:e.express?e.express+o:"").concat(e.subdistrict).concat(o).concat(e.district).concat(o).concat(e.province).concat(e.postcode?" "+e.postcode:""),e.elevation){var s=t[2];k.append(s,"div",{innerHTML:kr.contextLabel[l].msl+e.elevation.toLocaleString()+w[l].m})}}else k.empty(r)}function en(e){var t=this;if(e.data.length){var r,n=document.createDocumentFragment(),o=tr(e.data);try{var i=function(){var e=r.value,o=k.append(n,"div",{className:"sphere-contextmenu_poi"});k.append(o,"img",{src:k.svgIcon(e.icon),alt:""}),k.append(o,"span",{id:e.id,className:"sphere-contextmenu_poi sphere-link",innerHTML:e.name}).addEventListener("click",(function(){return or(t,Xr,tn).call(t,e)}))};for(o.s();!(r=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}k.append(n,"hr"),k.empty(mr(this,Ur).Renderer.__deck.tooltip.el.firstChild).appendChild(n)}}function tn(e){var t=this,r=mr(this,Ur).Search.language(),n=new Ce(e,k.poiPopupOptions(server.poi,e.id,e.name,r));setTimeout((function(){return mr(t,Ur).Overlays.add(n)}),0)}function rn(e){var t;navigator.clipboard.writeText(e);var r=mr(this,Ur).Search.language();null===(t=mr(this,Ur).Ui.Toast)||void 0===t||t.set(kr.contextLabel[r].clipboardToast.replace("{s}",e))}var nn=new WeakMap,on=function(){function e(t){pr(this,e),yr(this,nn,{writable:!0,value:void 0}),br(this,nn,k.append(t.placeholder(),"div",{className:"sphere-toast"}))}return vr(e,[{key:"set",value:function(e){var t=this;return mr(this,nn).innerHTML=e,mr(this,nn).style.bottom=0,setTimeout((function(){mr(t,nn).style.bottom="-30px"}),2e3),this}}]),e}();function an(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ln(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function sn(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,un(e,t,"get"))}function cn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,un(e,t,"set"),r),r}function un(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}sphere.UiComponent={Full:"FULL",Mobile:"MOBILE",None:!1};var hn=new WeakMap,fn=new WeakMap,pn=new WeakMap,dn=function(){function e(t,r){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ln(this,hn,{writable:!0,value:void 0}),ln(this,fn,{writable:!0,value:"th"}),ln(this,pn,{writable:!0,value:""}),cn(this,hn,t),r!==sphere.UiComponent.None){var o,i=t.Renderer,a=t.Event;this.DPad=new Or,i.addControl(this.DPad),maplibregl.GeolocateControl.prototype.visible=Lr.prototype.visible,this.Geolocation=new maplibregl.GeolocateControl,i.addControl(this.Geolocation,"top-left"),maplibregl.NavigationControl.prototype.visible=Lr.prototype.visible,this.Zoombar=new maplibregl.NavigationControl,i.addControl(this.Zoombar,"top-left"),this.LayerSelector=new Gr(t),i.addControl(this.LayerSelector),maplibregl.ScaleControl.prototype.visible=Lr.prototype.visible,this.Scale=new maplibregl.ScaleControl,i.addControl(this.Scale),this.ContextMenu=new $r(t),this.Tooltip={set:function(e,t,r,l){clearTimeout(o),l?o=setTimeout(n.Tooltip.set,l,e,t,r):n.ContextMenu.visible()||(i.__deck.tooltip.setTooltip(!!e&&{text:e,className:"sphere-tooltip"},t,r),a.fire("tooltipChange",e))}},this.Toast=new on(t),this.Cursor={set:function(e){if(sn(n,pn)!=e)return cn(n,pn,e),i.getCanvas().style.cursor=e,n.Cursor}},this.Keyboard={enable:function(e){var t=n.Mouse.enable(e,"keyboard");return t==n.Mouse?n.Keyboard:t}},this.Mouse={enable:function(e,t){var r=i[t];if(r){if(null==e)return r.isEnabled();e?r.enable():r.disable()}else null!=e&&(n.Mouse.enableClick(e),n.Mouse.enableDrag(e),n.Mouse.enableWheel(e));return n.Mouse},enableClick:function(e){return n.Mouse.enable(e,"doubleClickZoom")},enableDrag:function(e){return n.Mouse.enable(e,"dragPan")},enableWheel:function(e){return n.Mouse.enable(e,"scrollZoom")}},r==sphere.UiComponent.Mobile||t.placeholder().offsetWidth<600||(this.Fullscreen=new maplibregl.FullscreenControl,this.Fullscreen.visible=function(e){if(null==e)return"none"!=n.Fullscreen._fullscreenButton.style.display;n.Fullscreen._fullscreenButton.style.display=e?"block":"none"},i.addControl(this.Fullscreen),this.Toolbar={visible:function(e){return null!=e&&(e&&(k.loadStyle(server.map+"/js/mapbox-gl-draw.css"),k.loadScript(server.map+"/js/mapbox-gl-draw.js",(function(){n.Toolbar=new MapboxDraw(kr.toolbarOptions),n.Toolbar.visible=function(e){var t=i.hasControl(n.Toolbar);if(null==e)return t;e?t||i.addControl(n.Toolbar,"top-left"):t&&i.removeControl(n.Toolbar)},i.addControl(n.Toolbar,"top-left").on("draw.modechange",(function(e){return a.fire("toolbarChange",e.mode)})).on("draw.create",(function(e){return a.fire("drawCreate",e.features)})).on("draw.delete",(function(e){return a.fire("drawDelete",e.features)}))}))),n.Toolbar)}})}}var t,r,n;return t=e,(r=[{key:"language",value:function(e){return null==e?sn(this,fn):(cn(this,fn,e.startsWith("th")?"th":"en"),this.LayerSelector.language(e),this)}},{key:"add",value:function(e){return sn(this,hn).Renderer.addControl(e),this}},{key:"remove",value:function(e){return sn(this,hn).Renderer.removeControl(e),this}}])&&an(t.prototype,r),n&&an(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function vn(e){return vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(e)}function yn(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return gn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gn(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */mn=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=w(a,r);if(l){if(l===u)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=c(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function h(){}function f(){}function p(){}var d={};l(d,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(L([])));y&&y!==t&&r.call(y,o)&&(d=y);var g=p.prototype=h.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,l){var s=c(e[o],e,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==vn(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=p,l(g,"constructor",p),l(p,"constructor",f),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},m(g),l(g,a,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=L,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function bn(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function wn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){bn(i,n,o,a,l,"next",e)}function l(e){bn(i,n,o,a,l,"throw",e)}a(void 0)}))}}function xn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kn(e,t){Ln(e,t),t.add(e)}function _n(e,t,r){Ln(e,t),t.set(e,r)}function Ln(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Sn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function En(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,jn(e,t,"set"),r),r}function On(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,jn(e,t,"get"))}function jn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Pn={searchLabel:{th:{zoom:"ซูมไปยังสถานที่นี้",empty:"ไม่พบผลลัพธ์การค้นหา",more:"เพิ่มเติม"},en:{zoom:"Zoom to this location",empty:"No result found",more:"more"}},zoomResult:14,showRegion:!0,showRoad:!0};sphere.MapTheme.search=Pn;var Tn=new WeakMap,Mn=new WeakMap,Cn=new WeakMap,Rn=new WeakMap,An=new WeakMap,In=new WeakMap,Wn=new WeakMap,Dn=new WeakMap,Nn=new WeakMap,Zn=new WeakSet,Fn=new WeakSet,zn=new WeakSet,Gn=new WeakSet,Bn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),kn(this,Gn),kn(this,zn),kn(this,Fn),kn(this,Zn),_n(this,Tn,{writable:!0,value:void 0}),_n(this,Mn,{writable:!0,value:"th"}),_n(this,Cn,{writable:!0,value:Pn.searchLabel[On(this,Mn)]}),_n(this,Rn,{writable:!0,value:void 0}),_n(this,An,{writable:!0,value:void 0}),_n(this,In,{writable:!0,value:[]}),_n(this,Wn,{writable:!0,value:void 0}),_n(this,Dn,{writable:!0,value:void 0}),_n(this,Nn,{writable:!0,value:!0}),En(this,Tn,t),En(this,An,"thsearch".concat(t.id(),"-"))}var t,r,n,o,i,a,l;return t=e,r=[{key:"language",value:function(e){return null==e?On(this,Mn):(En(this,Mn,e.startsWith("th")?"th":"en"),En(this,Cn,Pn.searchLabel[On(this,Mn)]),this)}},{key:"placeholder",value:function(e,t){return null==e?On(this,Rn):(En(this,Rn,e),En(this,Wn,t||{}),k.addClass(On(this,Rn),"thsearch-placeholder"),this)}},{key:"suggest",value:(l=wn(mn().mark((function e(t,r){var n,o;return mn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=r||{},n="".concat(server.search,"/suggest?keyword=").concat(encodeURIComponent(t),"&key=").concat(apikey).concat(Sn(this,Zn,Hn).call(this,r)),e.next=4,k.getJson(n);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"search",value:(a=wn(mn().mark((function e(t,r){var n,o,i,a,l;return mn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return En(this,Dn,r=r||{}),!r.offset&&On(this,Rn)&&(this.clear(),On(this,Rn).innerHTML=v),n=On(this,Tn).location(),o=n.lon,i=n.lat,a="".concat(server.search,"/search?locale=").concat(On(this,Mn),"&lon=").concat(o,"&lat=").concat(i,"&key=").concat(apikey).concat(Sn(this,Zn,Hn).call(this,r)),t&&(a+="&keyword="+encodeURIComponent(t)),e.next=8,k.getJson(a);case 8:return(l=e.sent)?Sn(this,zn,qn).call(this,l):Sn(this,Fn,Un).call(this),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"address",value:(i=wn(mn().mark((function e(t,r){var n,o;return mn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=r||{},n="".concat(server.address,"?lon=").concat(t.lon,"&lat=").concat(t.lat,"&locale=").concat(On(this,Mn),"&key=").concat(apikey).concat(Sn(this,Zn,Hn).call(this,r)),e.next=4,k.getJson(n);case 4:return(o=e.sent)||Sn(this,Fn,Un).call(this),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"nearPoi",value:(o=wn(mn().mark((function e(t,r){var n,o;return mn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=r||{},n="".concat(server.poi,"/search?lon=").concat(t.lon,"&lat=").concat(t.lat,"&locale=").concat(On(this,Mn),"&key=").concat(apikey,"&status=A").concat(Sn(this,Zn,Hn).call(this,r)),e.next=4,k.getJson(n);case 4:return(o=e.sent)||Sn(this,Fn,Un).call(this),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"clear",value:function(){if(On(this,Rn)){var e,t=On(this,Tn).Overlays,r=yn(On(this,In));try{for(r.s();!(e=r.n()).done;){var n=e.value;t.remove(n.marker),n.object&&t.unload(n.object).remove(n.popup)}}catch(e){r.e(e)}finally{r.f()}k.empty(On(this,Rn))}return this}},{key:"enablePopup",value:function(e){return null==e?On(this,Nn):(En(this,Nn,e),this)}}],r&&xn(t.prototype,r),n&&xn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Hn(e){var t="";for(var r in e)t+="&".concat(r,"=").concat(e[r]);return t}function Un(){On(this,Tn).Event.fire("error","search")}function qn(e){var t=this;if(On(this,Rn)){var r,n,o=e.meta.start;if(o){n=On(this,Rn).firstChild;var l=On(this,Rn).lastChild;e.meta.hasmore?(l.innerHTML=On(this,Cn).more,l.onclick=function(r){r.target.innerHTML="• • •",On(t,Dn).offset=e.meta.end+1,On(t,Dn).limit=e.meta.end-o+1,t.search(e.meta.keyword,On(t,Dn))}):On(this,Rn).removeChild(l)}else o=0,r=document.createDocumentFragment(),n=k.append(r,"ol",{className:"thsearch-list"}),e.data.length?e.meta.hasmore&&k.append(r,"div",{className:"thsearch-more",innerHTML:On(this,Cn).more,onclick:function(r){r.target.innerHTML="• • •",On(t,Dn).offset=e.meta.end+1,On(t,Dn).limit=e.meta.end-o+1,t.search(e.meta.keyword,On(t,Dn))}}):k.append(r,"div",{className:"thsearch-empty",innerHTML:On(this,Cn).empty}),En(this,In,[]);for(var s,c=[],u=function(e,r){var i=o+e,l=r.id[0],s=r.icon?'<img class="thsearch-icon" src="'.concat(k.svgIcon(r.icon),'" alt="" />'):a["search"+l]||a.searchZ,u=k.append(n,"li",{id:On(t,An)+i,className:"thsearch-item",innerHTML:s});if("T"!=l&&k.append(u,"img",{className:"thsearch-zoom",src:a.searchZoom,alt:"",title:On(t,Cn).zoom}),u.innerHTML+="".concat(r.name,'<div class="thsearch-address">').concat(r.address||"&nbsp;","</div>"),u.addEventListener("click",Sn(t,Gn,Vn).bind(t)),On(t,In).push(r),!1===On(t,Wn).icon||("L"==l||"A"==l||"W"==l||"X"==l)&&Pn.showRegion||("R"==l||"T"==l)&&Pn.showRoad)return"continue";c.push(k.toCoordinate(r)),r.marker=new sphere.Marker(r,On(t,Nn)?{title:r.name,detail:" ",icon:On(t,Wn).icon,loadDetail:function(e){return e.appendChild(k.formatPoi(r,On(t,Mn)))}}:{title:r.name,clickable:!0}),r.marker.type="s",On(t,Tn).Overlays.add(r.marker)},h=0;s=e.data[h];++h)u(h,s);o||(k.empty(On(this,Rn)).appendChild(r),c.length&&On(this,Tn).bound(i.locationBound({type:"LineString",coordinates:c})))}}function Vn(e){var t=On(this,In)[e.currentTarget.id.substring(On(this,An).length)],r=t.id[0];if("T"!=r){var n=On(this,Tn).Renderer,o={center:t};if("thsearch-zoom"==e.target.className&&n.getZoom()<Pn.zoomResult&&(o.zoom=Pn.zoomResult),n.easeTo(o),t.marker)t.marker.pop(!0);else{if(!t.popup){var i={title:t.name,detail:t.address};(("L"==r||"A"==r||"W"==r||"X"==r)&&Pn.showRegion||("R"==r||"T"==r)&&Pn.showRoad)&&(t.object=new sphere.Overlays.Object(t.id,On(this,Mn),i)),t.popup=new sphere.Popup(t,i)}var a=On(this,Tn).Overlays;t.object&&a.load(t.object),a.add(t.popup)}}else On(this,Tn).Tags.set(t.name.substring(5))}function Jn(e){return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jn(e)}function Yn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Yn=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=w(a,r);if(l){if(l===u)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=c(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function h(){}function f(){}function p(){}var d={};l(d,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(L([])));y&&y!==t&&r.call(y,o)&&(d=y);var g=p.prototype=h.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,l){var s=c(e[o],e,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==Jn(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=p,l(g,"constructor",p),l(p,"constructor",f),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},m(g),l(g,a,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=L,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function Xn(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function Qn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(r),!0).forEach((function(t){Kn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function to(e,t){no(e,t),t.add(e)}function ro(e,t,r){no(e,t),t.set(e,r)}function no(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function oo(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function io(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,lo(e,t,"get"))}function ao(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,lo(e,t,"set"),r),r}function lo(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var so=3,co=17,uo={icon:{default:{width:20,height:20}},labelPaint:{"text-color":"#5D5D5D","text-halo-color":"#FFFFFF","text-halo-width":1}};sphere.MapTheme.tag=uo,sphere.TagType={WFS:"WFS",OGC:"OGC"};var ho=new WeakMap,fo=new WeakMap,po=new WeakMap,vo=new WeakMap,yo=new WeakMap,go=new WeakSet,mo=new WeakSet,bo=new WeakSet,wo=new WeakSet,xo=new WeakSet,ko=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),to(this,xo),to(this,wo),to(this,bo),to(this,mo),to(this,go),ro(this,ho,{writable:!0,value:"th"}),ro(this,fo,{writable:!0,value:void 0}),ro(this,po,{writable:!0,value:{}}),ro(this,vo,{writable:!0,value:{}}),ro(this,yo,{writable:!0,value:!0}),ao(this,fo,t),t.Event.bind("ready",(function(){return t.Renderer.on("styledata",(function(){return setTimeout((function(){for(var e in io(r,vo)){var n=io(r,vo)[e];t.Renderer.getLayer(n.id)||t.Renderer.addLayer(n),n.label&&!t.Renderer.getLayer(n.label.layer.id)&&t.Renderer.addSource(n.label.layer.source,n.label.source).addLayer(n.label.layer,n.id)}}),100)}))}))}var t,r,n;return t=e,r=[{key:"language",value:function(e){return null==e?io(this,ho):(ao(this,ho,e.startsWith("th")?"th":"en"),this)}},{key:"set",value:function(e,t){this.clear().add(e,t)}},{key:"add",value:function(e,t){var r,n,o,i=this;if((null===(r=t)||void 0===r?void 0:r.type)==sphere.TagType.WFS&&!window.gml2geojson)return k.initLibrary("gml").then((function(){return i.add(e,t)})),this;if("string"==typeof e&&e.includes("|"))return e.split("|").forEach(this.add.bind(this)),this;if(io(this,po)[e])return this;var a,l,s,c,u=(null===(n=(t=t||{}).visibleRange)||void 0===n?void 0:n.min)||so,h=(null===(o=t.visibleRange)||void 0===o?void 0:o.max)||co;if("function"==typeof e)l=e,s="f"+ ++sphere.objectcount;else if(t.type)l=t.source,s="f"+ ++sphere.objectcount,t.name=e;else{var f;l=t.source||server.poi,s="".concat(l,"-").concat(u,"-").concat(h);var p=t,d=p.icon,v=p.label,y=p.area,g=p.dataset;if(t={tag:e,icon:d,label:!!v&&{min:v.min||u,max:v.max||(null===(f=t.visibleRange)||void 0===f?void 0:f.max)||R},area:y,dataset:g},d&&"big"!=d&&"small"!=d){var m=(k.isHD()||!d.url)&&d.urlHD,b=m||d.url,w=$n($n({url:b},d.size),{},{offset:d.offset?k.toCoordinate(d.offset):null});if(t.icon="custom"+ ++sphere.objectcount,uo.icon[t.icon]=w,!w.height){var x=new Image;x.onload=function(){var e=m?1:0;w.width=x.width>>e,w.height=x.height>>e,a(_)},x.src=b,c=!0}}}io(this,po)[e]=s;var _=io(this,vo)[s];if(_)_.props.tags.push(t),a=function(e){return e.setProps({data:oo(i,bo,So).call(i,e.props)})};else{var L=t.label?oo(this,go,_o).call(this,s,t.label.min,t.label.max+1):null;_=oo(this,mo,Lo).call(this,s,l,u+1,h+1,t),L&&(_.label=L),io(this,vo)[s]=_,a=function(e){return io(i,fo).Renderer.addLayer(e)}}return c||a(_),this}},{key:"remove",value:function(e){if("string"==typeof e&&e.includes("|"))return e.split("|").forEach(this.remove),this;var t=io(this,po)[e];if(t){var r=io(this,vo)[t];1==r.props.tags.length?(oo(this,xo,Oo).call(this,r),delete io(this,vo)[t]):(r.props.tags=r.props.tags.filter((function(t){return t.tag!=e})),r.setProps({data:oo(this,bo,So).call(this,r.props)})),delete io(this,po)[e]}return this}},{key:"clear",value:function(){for(var e in io(this,vo))oo(this,xo,Oo).call(this,io(this,vo)[e]);return ao(this,po,{}),ao(this,vo,{}),this}},{key:"list",value:function(){return Object.keys(io(this,po))}},{key:"size",value:function(){return this.list().length}},{key:"enablePopup",value:function(e){return null==e?io(this,yo):(ao(this,yo,e),this)}}],r&&eo(t.prototype,r),n&&eo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _o(e,t,r){var n={source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layer:{id:e+"-label",type:"symbol",source:e,minzoom:t,maxzoom:r,filter:["<=",["to-number",["get","zoom"]],["zoom"]],layout:{"text-field":["get","name"],"text-font":["noto"],"text-size":12,"text-anchor":["get","anchor"],"text-offset":[1,0],"text-justify":"auto","symbol-sort-key":["get","label"]},paint:uo.labelPaint}};return io(this,fo).Renderer.addSource(e,n.source).addLayer(n.layer),n}function Lo(e,t,r,n,o){var i=this,a=io(this,fo),l=a.Overlays,s=a.Ui,c=a.Renderer,u={id:e,type:deck.TileLayer,minZoom:r,maxZoom:n,zoomOffset:1,renderSubLayers:function(e){return e.data?e.tags[0].type?new deck.GeoJsonLayer($n({id:e.id,data:e.data},e.tags[0])):new deck.IconLayer({id:e.id,data:e.data.data,pickable:!0,parameters:{depthTest:!1},getSize:function(e){return oo(i,wo,Eo).call(i,e,!0)},getPosition:function(t){var r=k.toCoordinate(t);if(t.label){var n=e.label._data;n.features.push({type:"Feature",geometry:{type:"Point",coordinates:r},properties:{id:t.id,name:t.name,zoom:e.tile.zoom-1,label:-t.label,anchor:"blank"==t.icon?"center":"left"}}),e.label.setData(n)}return r},getIcon:function(e){return oo(i,wo,Eo).call(i,e)}}):null},source:t,tags:[o],label:c.getSource(e),onHover:o.onHover||function(e){var t,r,n,o;e.picked?(null===(t=s.Cursor)||void 0===t||t.set("pointer"),null===(r=s.Tooltip)||void 0===r||r.set(e.object.name,e.x,e.y,500)):(null===(n=s.Cursor)||void 0===n||n.set(""),null===(o=s.Tooltip)||void 0===o||o.set())},onClick:o.onClick||function(e){return io(i,yo)&&setTimeout((function(){return l.add(new sphere.Popup(e.object,k.poiPopupOptions(t,e.object.id,e.object.name,io(i,ho))))}),0)}};return"function"==typeof t?u.getTileData=t:o.type?u.getTileData=o.type==sphere.TagType.WFS?function(){var e,t=(e=Yn().mark((function e(t){var r,n,i,a,l,s,c;return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.bbox,n=r.west,i=r.south,a=r.east,l=r.north,s=o.version||"2.0.0",e.next=4,k.getJson("".concat(o.source,"?service=WFS&request=GetFeature&version=").concat(s,"&typeNames=").concat(o.name,"&srsName=EPSG:4326&bbox=").concat(n,",").concat(i,",").concat(a,",").concat(l,",EPSG:4326&").concat(o.extraQuery||"maxFeatures=1000"),"document");case 4:return c=e.sent,e.abrupt("return",k.GMLToGeoJSON(c));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Xn(i,n,o,a,l,"next",e)}function l(e){Xn(i,n,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}():o.type==sphere.TagType.OGC?function(e){var t=e.bbox,r=t.west,n=t.south,i=t.east,a=t.north;return k.getJson("".concat(o.source,"/collections/").concat(o.name,"/items?f=json&bbox=").concat(r,",").concat(n,",").concat(i,",").concat(a,"&").concat(o.extraQuery||""))}:null:u.data=oo(this,bo,So).call(this,u),new deck.MapboxLayer(u)}function So(e){for(var t="".concat(e.source,"/cluster/{z}/{x}/{y}/").concat(io(this,ho),"?key=").concat(apikey),r=0;r<e.tags.length;++r){var n=e.tags[r];t+="&tag%5B".concat(r,"%5D=").concat(encodeURIComponent(n.tag)),n.icon&&(t+="&iconmode%5B".concat(r,"%5D=").concat(n.icon)),n.label&&(t+="&iconlabel%5B".concat(r,"%5D=1")),n.area&&(t+="&area%5B".concat(r,"%5D=").concat(n.area)),n.dataset&&(t+="&dataset%5B".concat(r,"%5D=").concat(n.dataset))}return t}function Eo(e,t){var r=e.icon.split("/"),n="big"==r[0]?1.75:"small"==r[0]?.8:1,o=r[1]||e.icon,i=uo.icon[o]||uo.icon.default;if(t)return i.url||1==n?i.height:parseInt(i.height*n);if(i.url)return i;var a=k.svgIcon(o);return 1==n?$n({url:a},i):{url:a,width:parseInt(i.width*n),height:parseInt(i.height*n)}}function Oo(e){var t=io(this,fo).Renderer;t.removeLayer(e.id),e.label&&t.removeLayer(e.labelLayer.id).removeSource(e.id)}function jo(e){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(e)}function Po(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Po=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=w(a,r);if(l){if(l===u)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=c(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function h(){}function f(){}function p(){}var d={};l(d,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(L([])));y&&y!==t&&r.call(y,o)&&(d=y);var g=p.prototype=h.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,l){var s=c(e[o],e,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==jo(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=p,l(g,"constructor",p),l(p,"constructor",f),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},m(g),l(g,a,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=L,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function To(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function Mo(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){To(i,n,o,a,l,"next",e)}function l(e){To(i,n,o,a,l,"throw",e)}a(void 0)}))}}function Co(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(r),!0).forEach((function(t){Ao(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Co(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ao(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Io(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Wo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wo(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Do(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function No(e,t){Fo(e,t),t.add(e)}function Zo(e,t,r){Fo(e,t),t.set(e,r)}function Fo(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zo(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Go(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ho(e,t,"set"),r),r}function Bo(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Ho(e,t,"get"))}function Ho(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Uo=100,qo={span:.001,limit:1},Vo={th:"ถนนเชื่อมต่อ",en:"Connecting road"},Jo={markerIcon:{width:37,height:51,offset:[0,-19]},routeLabel:{th:{add:"เดินทางมาจุดนี้",remove:"ลบจุดหมาย",origin:"จุดเริ่มต้น",dest:"จุดหมายที่ ",guide:{depart:"ออกจาก ",arrive:"ถึง ",fromroad:" จากถนน"},menu:{clear:"ลบ",reverse:"กลับ",animate:"วิ่ง",stop:"หยุด",pref:"ตั้งค่า",t:"หลบรถติด",c:"ถนนหลัก",d:"ทางลัด",reload:"↻",road:"รถ",ferry:"เรือ",toll:"ทางด่วน"},menuTip:{clear:"ลบเส้นทางทั้งหมด",reverse:"กลับทิศทางการเดินทาง",animate:"แสดงหรือหยุดการเดินทางบนเส้นทาง",pref:"ตั้งค่า",t:"เดินทางไปตามถนนหลักโดยหลบรถติด",c:"เดินทางไปตามถนนหลัก",d:"ลัดเข้าซอยเพิ่อให้ใช้ระยะทางสั้นที่สุด",reload:"หาเส้นทางใหม่โดยใช้จุดหมายเดิม"},turn:["เลี้ยวซ้ายสู่","เลี้ยวขวาสู่","เบี่ยงซ้ายสู่","เบี่ยงขวาสู่","ไปตาม","ตรงไปตาม","เข้าสู่","กลับรถที่",,"ถึง","","","","",""],guideError:"ไม่พบเส้นทางไปยังจุดหมาย",guideGone:"ไม่มีข้อมูล ณ เวลาที่เลือก"},en:{add:"Direction to here",remove:"Remove destination",origin:"starting position",dest:"destination #",guide:{depart:"Depart from ",arrive:"Arrive at ",fromroad:" from road"},menu:{clear:"clear",reverse:"rev.",animate:"go",stop:"stop",pref:"pref.",t:"Traffic",c:"Main road",d:"Shortcut",reload:"↻",road:"Road",ferry:"Ferry",toll:"Toll"},menuTip:{clear:"All clear",reverse:"Reverse direction",animate:"Start/Stop animation",pref:"Preferences",t:"Use main road, avoid traffic jam",c:"Use main road",d:"Use shortcut",reload:"Reload result"},turn:["Turn left to","Turn right to","Slight left to","Slight right to","Head toward","Continue straight onto","Enter","U-turn at",,"Arrive at","","","","",""],guideError:"No route to destination",guideGone:"No data at selected time"},turnIcon:["⬅️","➡&#xfe0f;","↖&#xfe0f;","↗&#xfe0f;","⬆️","⬆️","🛣️","⤵️",,"⬇️","","🛳️","","",""]},zoomResult:{padding:16,maxZoom:16}};sphere.MapTheme.route=Jo,sphere.RouteLine={Destination:"destination",Road:"road",Ferry:"ferry",Focus:"focus"},sphere.RouteMode={Traffic:"t",Cost:"c",Distance:"d",Fly:"f"},sphere.RouteType={Road:1,Ferry:8,Tollway:16,All:127},sphere.RouteLabel={Distance:"d",Time:"t",Hide:!1};var Yo=new WeakMap,Xo=new WeakMap,Qo=new WeakMap,$o=new WeakMap,Ko=new WeakMap,ei=new WeakMap,ti=new WeakMap,ri=new WeakMap,ni=new WeakMap,oi=new WeakMap,ii=new WeakMap,ai=new WeakMap,li=new WeakMap,si=new WeakMap,ci=new WeakMap,ui=new WeakSet,hi=new WeakSet,fi=new WeakSet,pi=new WeakSet,di=new WeakSet,vi=new WeakSet,yi=new WeakSet,gi=new WeakSet,mi=new WeakSet,bi=new WeakSet,wi=new WeakSet,xi=new WeakSet,ki=new WeakSet,_i=new WeakSet,Li=new WeakSet,Si=new WeakSet,Ei=new WeakSet,Oi=new WeakSet,ji=new WeakSet,Pi=new WeakSet,Ti=new WeakSet,Mi=new WeakSet,Ci=new WeakSet,Ri=new WeakSet,Ai=new WeakSet,Ii=new WeakSet,Wi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),No(this,Ii),No(this,Ai),No(this,Ri),No(this,Ci),No(this,Mi),No(this,Ti),No(this,Pi),No(this,ji),No(this,Oi),No(this,Ei),No(this,Si),No(this,Li),No(this,_i),No(this,ki),No(this,xi),No(this,wi),No(this,bi),No(this,mi),No(this,gi),No(this,yi),No(this,vi),No(this,di),No(this,pi),No(this,fi),No(this,hi),No(this,ui),Zo(this,Yo,{writable:!0,value:void 0}),Zo(this,Xo,{writable:!0,value:"th"}),Zo(this,Qo,{writable:!0,value:Jo.routeLabel[Bo(this,Xo)]}),Zo(this,$o,{writable:!0,value:Vo[Bo(this,Xo)]}),Zo(this,Ko,{writable:!0,value:void 0}),Zo(this,ei,{writable:!0,value:void 0}),Zo(this,ti,{writable:!0,value:void 0}),Zo(this,ri,{writable:!0,value:{destination:{lineColor:[128,64,255,lt],lineStyle:sphere.LineStyle.Dot},road:{lineColor:[128,64,255,lt],pointer:!0},ferry:{lineColor:[255,255,64,lt],pointer:!0},focus:{lineColor:[255,64,128,lt]}}}),Zo(this,ni,{writable:!0,value:!1}),Zo(this,oi,{writable:!0,value:sphere.RouteMode.Traffic}),Zo(this,ii,{writable:!0,value:sphere.RouteType.All}),Zo(this,ai,{writable:!0,value:[]}),Zo(this,li,{writable:!0,value:[]}),Zo(this,si,{writable:!0,value:null}),Zo(this,ci,{writable:!0,value:sphere.RouteLabel.Distance}),Go(this,Yo,t),Go(this,ei,"thsearch".concat(t.id(),"-")),Go(this,ti,zo(this,hi,Ni).bind(this)),t.Event.bind("overlayDrop",zo(this,fi,Zi).bind(this))}var t,r,n;return t=e,(r=[{key:"language",value:function(e){return null==e?Bo(this,Xo):(Go(this,Xo,e.startsWith("th")?"th":"en"),Go(this,Qo,Jo.routeLabel[Bo(this,Xo)]),Go(this,$o,Vo[Bo(this,Xo)]),this)}},{key:"placeholder",value:function(e){return null==e?Bo(this,Ko):(Go(this,Ko,e),k.addClass(Bo(this,Ko),"throute-placeholder"),Go(this,ni,!0),this)}},{key:"enableContextMenu",value:function(){Go(this,ni,!0),Bo(this,Yo).Event.bind("beforeContextmenu",Bo(this,ti))}},{key:"line",value:function(e,t){return null==t?Bo(this,ri)[e]:(Bo(this,ri)[e]=t,this)}},{key:"auto",value:function(e){return null==e?Bo(this,ni):(Go(this,ni,e),Bo(this,ni)&&zo(this,ki,Xi).call(this),this)}},{key:"mode",value:function(e){return null==e?Bo(this,oi):(Go(this,oi,e),zo(this,ki,Xi).call(this),this)}},{key:"modeOf",value:function(e,t){var r=Bo(this,ai)[e];if(!r)throw new Error("Destination not found");return null==t?r.routeMode:(r.routeMode=t,zo(this,Oi,ta).call(this,e),this)}},{key:"enableRoute",value:function(e,t){return null==e?Bo(this,ii):null==t?(Bo(this,ii)&e)==e:(Go(this,ii,t?Bo(this,ii)|e:Bo(this,ii)&~e),zo(this,ki,Xi).call(this),this)}},{key:"label",value:function(e){return null==e?Bo(this,ci):(Go(this,ci,e),zo(this,ki,Xi).call(this),this)}},{key:"add",value:function(e,t){var r=Bo(this,ai).length;return Bo(this,ai).push(zo(this,bi,qi).call(this,r,e)),t&&(Bo(this,ai)[r].routeMode=t),r>1&&zo(this,xi,Yi).call(this,r-1),zo(this,_i,Qi).call(this,r),this}},{key:"insert",value:function(e,t,r){return e=k.bound(+e,0,Bo(this,ai).length),Bo(this,ai).splice(e,0,zo(this,bi,qi).call(this,e,t)),r&&(Bo(this,ai)[e].routeMode=r),zo(this,xi,Yi).call(this,e+1),zo(this,Li,$i).call(this,e),this}},{key:"remove",value:function(e){var t=Bo(this,ai).indexOf(e);return t>=0&&this.removeAt(t),this}},{key:"removeAt",value:function(e){return Bo(this,Yo).Overlays.remove(Bo(this,ai)[e]),Bo(this,ai).splice(e,1),zo(this,xi,Yi).call(this,e?e-1:0),zo(this,Si,Ki).call(this,e),this}},{key:"clearDestination",value:function(){var e,t=Io(Bo(this,ai));try{for(t.s();!(e=t.n()).done;){var r=e.value;Bo(this,Yo).Overlays.remove(r)}}catch(e){t.e(e)}finally{t.f()}return Go(this,ai,[]),this}},{key:"clearPath",value:function(){for(var e=0;e<Bo(this,li).length;++e)zo(this,Ai,sa).call(this,e);return Go(this,li,[]),this}},{key:"clear",value:function(){return this.clearDestination(),this.clearPath(),zo(this,ji,ra).call(this,null),zo(this,ui,Di).call(this),this}},{key:"list",value:function(){return Bo(this,ai)}},{key:"size",value:function(){return Bo(this,ai).length}},{key:"reverse",value:function(){for(var e,t=1,r=Bo(this,ai)[0];e=r,r=Bo(this,ai)[t];++t)r.routeMode=e.routeMode;return delete Bo(this,ai)[0].routeMode,Bo(this,ai).reverse(),zo(this,xi,Yi).call(this,0),zo(this,ki,Xi).call(this),this}},{key:"search",value:function(){var e=Bo(this,ai).length-1;if(e<1)return this;this.clearPath(),Go(this,li,[]),zo(this,Mi,ia).call(this),zo(this,ji,ra).call(this,e);for(var t=0;t<e;++t)zo(this,Pi,na).call(this,t,t);return this}},{key:"distance",value:function(e){var t,r=0,n=Io(Bo(this,li));try{for(n.s();!(t=n.n()).done;)r+=t.value.data.distance}catch(e){n.e(e)}finally{n.f()}return e?k.formatDistance(r,Bo(this,Xo)):r}},{key:"interval",value:function(e){var t,r=0,n=Io(Bo(this,li));try{for(n.s();!(t=n.n()).done;)r+=t.value.data.interval}catch(e){n.e(e)}finally{n.f()}return e?k.formatInterval(r,Bo(this,Xo)):r}},{key:"guide",value:function(e){if(!e)return Bo(this,li);var t=Bo(this,Qo).guide,r=Jo.routeLabel.turnIcon,n=document.createDocumentFragment(),o=k.append(n,"div",{className:"throute-info"}),i=k.append(n,"ol",{className:"throute-list"}),a=Bo(this,li)[0];k.append(i,"li",{id:Bo(this,ei)+"d0",className:"throute-item throute-dest",innerHTML:"".concat(r[4]," ").concat(a.data.fdistance>Uo?'<span class="throute-dist">'.concat(k.formatDistance(a.data.fdistance,Bo(this,Xo))).concat(t.fromroad,"</span>"):"").concat(t.depart,'<span class="throute-poi">').concat(Bo(this,ai)[0].poi||Bo(this,Qo).origin,"</span>")}).addEventListener("click",zo(this,vi,Gi).bind(this));for(var l,s=0,c=0,u=0;l=Bo(this,li)[u];++u){for(var h,f=0;h=l.guide[f];++f){var p=k.append(i,"li",{id:"".concat(Bo(this,ei),"g").concat(u,"-").concat(f),className:"throute-item throute-type_"+zo(this,Ii,ca).call(this,h.turn),innerHTML:"".concat(r[h.turn]," ").concat(h.turn<10||h.interval>30?'<span class="throute-dist">'.concat(h.turn<10?k.formatDistance(h.distance,Bo(this,Xo)):k.formatInterval(h.interval,Bo(this,Xo)),"</span>").concat(Bo(this,Qo).turn[h.turn],' <span class="throute-road">').concat(h.name,"</span>"):h.name)});p.addEventListener("mouseover",zo(this,yi,Bi).bind(this)),p.addEventListener("mouseout",zo(this,gi,Hi).bind(this)),p.addEventListener("click",zo(this,mi,Ui).bind(this))}k.append(i,"li",{id:"".concat(Bo(this,ei),"d").concat(u+1),className:"throute-item throute-dest",innerHTML:"".concat(r[9]," ").concat(l.data.tdistance>Uo?'<span class="throute-dist">'.concat(k.formatDistance(l.data.tdistance,Bo(this,Xo))).concat(t.fromroad,"</span>"):"").concat(t.arrive,'<span class="throute-poi">').concat(Bo(this,ai)[u+1].poi||Bo(this,Qo).dest+(u+1),"</span>")}).addEventListener("click",zo(this,vi,Gi).bind(this)),s+=l.data.distance,c+=l.data.interval}return o.innerHTML='<span class="throute-distance">'.concat(k.formatDistance(s,Bo(this,Xo)),'</span><span class="throute-interval">').concat(k.formatInterval(c,Bo(this,Xo)),"</span>"),n}},{key:"exportRouteLine",value:function(e){var t,r=[],n=Io(Bo(this,li));try{for(n.s();!(t=n.n()).done;){var o=t.value.path,i=o.at(-1),a=0;null==i.type&&(r=r.concat(i.location()),a=1);for(var l=0;l<o.length-a;++l)r=r.concat(o[l].location().slice(1))}}catch(e){n.e(e)}finally{n.f()}return new ht(r,e)}}])&&Do(t.prototype,r),n&&Do(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Di(){Bo(this,Ko)&&k.empty(Bo(this,Ko))}function Ni(e){var t=this,r=document.createElement("div");r.className="sphere-link",r.innerHTML=Bo(this,Qo).add,r.onclick=function(){return t.add(e.location)},e.add(r)}function Zi(e){if("r"==e.type){var t=Bo(this,ai).indexOf(e);if(t<0)return;e.poi=void 0,zo(this,wi,Vi).call(this,e),zo(this,Ei,ea).call(this,t)}else"d"==e.type&&"g"==e.geometry.type&&this.insert(e.geometry.index+1,e.location(),this.modeOf(e.geometry.index))}function Fi(e){return e.currentTarget.id.substring(Bo(this,ei).length+1)}function zi(e){var t,r=zo(this,pi,Fi).call(this,e).split("-");return null===(t=Bo(this,li)[r[0]].path)||void 0===t?void 0:t[r[1]]}function Gi(e){var t=Bo(this,ai)[zo(this,pi,Fi).call(this,e)];t&&Bo(this,Yo).location(t.location())}function Bi(e){var t=zo(this,di,zi).call(this,e);t&&t.update({lineColor:Bo(this,ri).focus.lineColor,normalLineColor:t._geojson.properties.lineColor})}function Hi(e){var t=zo(this,di,zi).call(this,e);null==t||t.update({lineColor:t._geojson.properties.normalLineColor})}function Ui(e){var t=zo(this,di,zi).call(this,e);t&&Bo(this,Yo).bound(i.locationBound(t._geojson.geometry),Jo.zoomResult)}function qi(e,t){var r=this;if(!(t instanceof je)){var n=e?e==Bo(this,ai).length?a.routeLast:a.route.replace("{i}",e):a.routeFirst;(t=new je(t,{icon:Ro({url:n},Jo.markerIcon),popup:{title:e?Bo(this,Qo).dest+e:Bo(this,Qo).origin,size:{width:100},loadDetail:function(e){return k.append(e,"span",{className:"sphere-link",innerHTML:Bo(r,Qo).remove,onclick:function(){return r.remove(t)}})}},draggable:!0})).type="r"}return Bo(this,Yo).Overlays.add(t),zo(this,wi,Vi).call(this,t),t}function Vi(e){return Ji.apply(this,arguments)}function Ji(){return(Ji=Mo(Po().mark((function e(t){var r,n;return Po().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bo(this,Ko)&&server.poi){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Bo(this,Yo).Search.nearPoi(t.location(),qo);case 4:if((n=e.sent).data.length){e.next=7;break}return e.abrupt("return");case 7:t.poi=n.data[0].name,null!==(r=Bo(this,li)[0])&&void 0!==r&&r.data&&zo(this,Ti,oa).call(this);case 9:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Yi(e){for(var t,r=e;t=Bo(this,ai)[r];++r)if("r"==t.type){var n=r?r==Bo(this,ai).length-1?a.routeLast:a.route.replace("{i}",r):a.routeFirst;t.update({icon:Ro({url:n},Jo.markerIcon)}),t.popup().title(r?Bo(this,Qo).dest+r:Bo(this,Qo).origin)}}function Xi(){!Bo(this,ni)||Bo(this,ai).length<2||this.search()}function Qi(e){Bo(this,ni)&&e&&(1==e?this.search():(zo(this,ji,ra).call(this,1),zo(this,Pi,na).call(this,e-1)))}function $i(e){if(Bo(this,ni)&&!(Bo(this,ai).length<2))if(2==Bo(this,ai).length)this.search();else if(e){var t=e-1;zo(this,Ai,sa).call(this,t),Bo(this,li).splice(t,1,null,null),zo(this,ji,ra).call(this,2),zo(this,Pi,na).call(this,t),zo(this,Pi,na).call(this,e,1)}else Bo(this,li).unshift(null),zo(this,ji,ra).call(this,1),zo(this,Pi,na).call(this,e)}function Ki(e){if(Bo(this,ni))if(Bo(this,ai).length<2)this.clearPath(),zo(this,ui,Di).call(this);else if(e&&e<Bo(this,ai).length){var t=e-1;zo(this,Ai,sa).call(this,t),zo(this,Ai,sa).call(this,e),Bo(this,li).splice(t,2,null),zo(this,ji,ra).call(this,1),zo(this,Pi,na).call(this,t)}else{var r=e?e-1:0;zo(this,Ai,sa).call(this,r),Bo(this,li).splice(r,1),zo(this,Ti,oa).call(this),zo(this,Ri,la).call(this),Bo(this,Yo).Event.fire("routeComplete",Bo(this,li))}}function ea(e){if(Bo(this,ni)&&!(Bo(this,ai).length<2)){var t=e<Bo(this,ai).length-1;if(zo(this,ji,ra).call(this,(e?1:0)+(t?1:0)),e){var r=e-1;zo(this,Ai,sa).call(this,r),Bo(this,li)[r]=null,zo(this,Pi,na).call(this,r)}t&&(zo(this,Ai,sa).call(this,e),Bo(this,li)[e]=null,zo(this,Pi,na).call(this,e,e?1:0))}}function ta(e){!Bo(this,ni)||Bo(this,ai).length<2||e==Bo(this,ai).length-1||(zo(this,ji,ra).call(this,1),zo(this,Ai,sa).call(this,e),Bo(this,li)[e]=null,zo(this,Pi,na).call(this,e,0))}function ra(e){Go(this,si,e),e&&Bo(this,Ko)&&"sphere-load"!=Bo(this,Ko).lastChild.className&&k.append(Bo(this,Ko),"div",{className:"sphere-load"})}function na(e,t){var r=Bo(this,ai)[e],n=r.routeMode||Bo(this,oi),o=r.location(),i=Bo(this,ai)[e+1].location();if(n!=sphere.RouteMode.Fly){var a=Date.now();Bo(this,li)[e]=a;var l="".concat(server.route,"/route?flon=").concat(o.lon,"&flat=").concat(o.lat,"&tlon=").concat(i.lon,"&tlat=").concat(i.lat,"&mode=").concat(n,"&type=").concat(Bo(this,ii),"&locale=").concat(Bo(this,Xo),"&key=").concat(apikey);t&&defaultRate?setTimeout(u.bind(this),defaultRate*t,l):u.bind(this)(l)}else{var s=new ht([o,i],Bo(this,ri).destination);s.type="g",s.index=e;var c=s.size();zo(this,Ci,aa).call(this,e,{data:{distance:c,interval:0},guide:[{name:"?",turn:4,distance:c}],path:[s]})}function u(e){return h.apply(this,arguments)}function h(){return h=Mo(Po().mark((function t(r){var n,o,i,l;return Po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getJson(r);case 2:if(n=t.sent,Bo(this,li)[e]==a){t.next=5;break}return t.abrupt("return");case 5:if(!(o=n.meta.status)){t.next=11;break}return zo(this,Ti,oa).call(this,{className:"throute-error",innerHTML:"<br />"+(410==o?Bo(this,Qo).guideGone:Bo(this,Qo).guideError)}),Go(this,si,(i=Bo(this,si),--i)),Bo(this,Yo).Event.fire("routeError",o),t.abrupt("return");case 11:(l=n.data).fdistance>Uo&&(l.distance+=l.fdistance),l.tdistance>Uo&&(l.distance+=l.tdistance),zo(this,Ci,aa).call(this,e,n);case 15:case"end":return t.stop()}}),t,this)}))),h.apply(this,arguments)}}function oa(e){if(Bo(this,Ko)){for(;Bo(this,Ko).firstChild!=Bo(this,Ko).lastChild;)Bo(this,Ko).removeChild(Bo(this,Ko).lastChild);if(e)k.append(Bo(this,Ko),"div",e);else{var t=this.guide(!0);t&&Bo(this,Ko).appendChild(t)}}}function ia(){var e=this;if(Bo(this,Ko)){var t,r=sphere.RouteMode,n=sphere.RouteType,o=Bo(this,Qo).menu,i=Bo(this,Qo).menuTip,a=document.createDocumentFragment(),l=k.append(a,"div");k.append(l,"span",{className:"throute-menu",innerHTML:o.reverse,title:i.reverse,onclick:this.reverse.bind(this)}),k.append(l,"span",{className:"throute-menu",innerHTML:o.clear,title:i.clear,onclick:this.clear.bind(this)}),k.append(l,"span",{className:"throute-menu",innerHTML:o.pref,title:i.pref,onclick:function(){return t.style.display="none"==t.style.display?"block":"none"}}),(t=k.append(l,"div",{className:"throute-pref"})).style.display="none";var s=k.append(t,"div",{className:"throute-pref_right"});k.prepend(k.append(s,"label",{innerHTML:o.road}),"input",{type:"checkbox",checked:Bo(this,ii)&n.Road,onchange:function(t){return e.enableRoute(n.Road,t.target.checked)}}),k.prepend(k.append(s,"label",{innerHTML:o.toll}),"input",{type:"checkbox",checked:Bo(this,ii)&n.Tollway,onchange:function(t){return e.enableRoute(n.Tollway,t.target.checked)}}),k.prepend(k.append(s,"label",{innerHTML:o.ferry}),"input",{type:"checkbox",checked:Bo(this,ii)&n.Ferry,onchange:function(t){return e.enableRoute(n.Ferry,t.target.checked)}});var c="routemode"+Bo(this,Yo).id(),u=k.append(t,"div",{className:"throute-pref_left"});k.prepend(k.append(u,"label",{innerHTML:o.t,title:i.t}),"input",{type:"radio",name:c,checked:Bo(this,oi)==r.Traffic,onchange:function(){return e.mode(r.Traffic)}}),k.prepend(k.append(u,"label",{innerHTML:o.c,title:i.c}),"input",{type:"radio",name:c,checked:Bo(this,oi)==r.Cost,onchange:function(){return e.mode(r.Cost)}}),k.prepend(k.append(u,"label",{innerHTML:o.d,title:i.d}),"input",{type:"radio",name:c,checked:Bo(this,oi)==r.Distance,onchange:function(){return e.mode(r.Distance)}}),k.empty(Bo(this,Ko)),Bo(this,Ko).appendChild(a)}}function aa(e,t){var r;if(Bo(this,ci)){var n=Bo(this,ci)==sphere.RouteLabel.Distance?k.formatDistance(t.data.distance,Bo(this,Xo)):k.formatInterval(t.data.interval,Bo(this,Xo));t.label=new je(i.polylinePivot(t.features[t.features.length>>1].geometry),{icon:k.labelIcon(n)})}if(t.features){var o,a=[],l=[],s=Io(t.features);try{for(s.s();!(o=s.n()).done;){var c=o.value,u=new ht(c.geometry,Ro({},Bo(this,ri)[zo(this,Ii,ca).call(this,c.properties.turn)]));u.type="g",u.index=e,l.push(u),a.push(c.properties),delete c.properties}}catch(e){s.e(e)}finally{s.f()}if(Bo(this,ri).destination){var h=t.features[0].geometry.coordinates[0],f=t.features.at(-1).geometry.coordinates.at(-1);l.push(new ht({type:"LineString",coordinates:[f,Bo(this,ai)[e+1]._geojson.geometry.coordinates]},Bo(this,ri).destination)),l.push(new ht({type:"LineString",coordinates:[Bo(this,ai)[e]._geojson.geometry.coordinates,h]},Bo(this,ri).destination))}t.guide=a,t.path=l,delete t.type,delete t.features}Bo(this,li)[e]=t;for(var p,d=e+2;p=Bo(this,li)[d];++d){var v,y=Io(p.path);try{for(y.s();!(v=y.n()).done;){v.value.index=d}}catch(e){y.e(e)}finally{y.f()}}Go(this,si,(r=Bo(this,si),--r))||(zo(this,Ti,oa).call(this),zo(this,Ri,la).call(this),Bo(this,Yo).Event.fire("routeComplete",Bo(this,li)))}function la(){var e,t=Bo(this,Yo).Overlays,r=Io(Bo(this,li));try{for(r.s();!(e=r.n()).done;){var n,o=e.value,i=o.path,a=o.label,l=Io(i);try{for(l.s();!(n=l.n()).done;){var s=n.value;t.add(s)}}catch(e){l.e(e)}finally{l.f()}a&&t.add(a)}}catch(e){r.e(e)}finally{r.f()}}function sa(e){var t=Bo(this,li)[e],r=t.path,n=t.label;if(r){var o,i=Bo(this,Yo).Overlays,a=Io(r);try{for(a.s();!(o=a.n()).done;){var l=o.value;i.remove(l)}}catch(e){a.e(e)}finally{a.f()}i.remove(n)}}function ca(e){return 11==e?"ferry":"road"}function ua(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ha(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(r),!0).forEach((function(t){fa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ua(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function da(e,t){va(e,t),t.add(e)}function va(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ya(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,r)}function ga(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var ma=[100.53589,13.72932,7];sphere.Filter={Dark:"DARK",Light:"LIGHT",None:!1};var ba=new WeakMap,wa=new WeakSet,xa=new WeakSet,ka=new WeakSet,_a=new WeakSet,La=new WeakSet,Sa=function(){function e(t){var r,n,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),da(this,La),da(this,_a),da(this,ka),da(this,xa),da(this,wa),r=this,n=ba,o={writable:!0,value:++sphere.objectcount},va(r,n),n.set(r,o),this.Event=new P(this),this.Layers=new q(this),this.Overlays=new Yt(this),this.Ui={resize:function(){return i.Ui},language:function(){return i.Ui}},this.Search=new Bn(this),this.Tags=new ko(this),this.Route=new Wi(this),t&&ga(this,wa,Ea).call(this,t)}var t,r,n;return t=e,(r=[{key:"id",value:function(){return ya(this,ba)}},{key:"resize",value:function(){return this.Renderer.resize(),this}},{key:"repaint",value:function(){return this.Renderer.triggerRepaint(),this.Event.fire("repaint"),this}},{key:"placeholder",value:function(){return this.Renderer.getContainer()}},{key:"zoom",value:function(e,t){return null==e?this.Renderer.getZoom():(e>0?!0===e?this.Renderer.zoomIn({animate:t}):this.Renderer.zoomTo(e,{animate:t}):this.Renderer.zoomOut({animate:t}),this)}},{key:"zoomRange",value:function(e){var t;return null==e?{min:this.Renderer.getMinZoom(),max:this.Renderer.getMaxZoom()}:(this.Renderer.getMinZoom()>e.max?this.Renderer.setMinZoom(e.min).setMaxZoom(e.max):this.Renderer.setMaxZoom(e.max).setMinZoom(e.min),null===(t=this.Ui.DPad)||void 0===t||t._repaint(),this.Event.fire("zoomRange",e),this)}},{key:"location",value:function(e,t){return null==e?k.fromLngLat(this.Renderer.getCenter()):(this.Renderer.panTo(e,{animate:t}),this)}},{key:"bound",value:function(e,t){return null==e?k.fromLngLatBounds(this.Renderer.getBounds()):(this.Renderer.fitBounds(k.toLngLatBounds(e),t),this)}},{key:"move",value:function(e,t){return this.Renderer.panBy(k.toPointLike(e),{animate:t}),this}},{key:"language",value:function(e){if(null==e)return this.Ui.language();try{this.Layers.language(e)}catch(e){}return this.Ui.language(e),this.Search.language(e),this.Tags.language(e),this.Route.language(e),this}},{key:"rotate",value:function(e,t){return null==e?this.Renderer.getBearing():(this.Renderer.rotateTo(e,{animate:t}),this)}},{key:"pitch",value:function(e){return null==e?this.Renderer.getPitch():(this.Renderer.setPitch(e),this)}},{key:"enableFilter",value:function(e){var t=this.placeholder();return null==e?t.style.filter?sphere.Filter.Dark:t.firstChild.style.filter?sphere.Filter.Light:sphere.Filter.None:(t.style.filter=e==sphere.Filter.Dark?"invert(1) hue-rotate(200deg) brightness(1)":"",t.firstChild.style.filter=e==sphere.Filter.Light?"grayscale(0.75) saturate(0.75) hue-rotate(30deg) contrast(1.1)":"",this)}},{key:"goTo",value:function(e,t){return!1===t?this.Renderer.jumpTo(e):this.Renderer.easeTo(e),this}}])&&pa(t.prototype,r),n&&pa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ea(e){(function t(){var r,n,o=this;if(window.maplibregl&&window.deck){var i=!1===e.lastView?ma:ga(this,_a,Pa).call(this),a=!(null!==(r=e.language)&&void 0!==r&&r.startsWith("th"))&&e.language;this.Layers._base=(null===(n=e.layer)||void 0===n?void 0:n[0])||e.layer||sphere.Layers[defaultMap];try{var l,s;this.Renderer=new maplibregl.Map(ha(ha({container:e.placeholder,style:this.Layers._base.style,center:e.location||i,minZoom:(null===(l=e.zoomRange)||void 0===l?void 0:l.min)||0,maxZoom:(null===(s=e.zoomRange)||void 0===s?void 0:s.max)||22,interactive:e.input||!0,transformRequest:ga(this,La,Ta)},e),{},{zoom:e.zoom||i[2]}))}catch(t){return void(e.placeholder.innerHTML=t)}this.Renderer.once("style.load",(function(){var t;if(a&&o.Layers.language(a),o.zoomRange(e.zoomRange),(null===(t=e.layer)||void 0===t?void 0:t.length)>1)for(var r=1;r<e.layer.length;++r)try{o.Layers.add(layer)}catch(e){}o.Event.fire("ready")})).on("resize",(function(){return o.Event.fire("resize")})).on("moveend",(function(){return o.Event.fire("location")})).on("zoomend",(function(){return o.Event.fire("zoom")})).on("rotateend",(function(){return o.Event.fire("rotate")})).on("pitchend",(function(){return o.Event.fire("pitch")})).on("mousemove",(function(e){return ga(o,xa,Oa).call(o,"mousemove",e)})).on("click",(function(e){return ga(o,xa,Oa).call(o,"click",e)})).on("dblclick",(function(e){return ga(o,xa,Oa).call(o,"doubleClick",e)})).on("wheel",(function(e){return o.Event.fire("wheel",{x:e.originalEvent.layerX,y:e.originalEvent.layerY,delta:e.originalEvent.wheelDelta})})).on("drag",(function(){return o.Event.fire("drag")})).on("dragend",(function(){return o.Event.fire("drop")})).on("dataloading",(function(e){return"source"==e.dataType&&o.Event.fire("tileLoading",e.sourceId)})).on("data",(function(e){return"source"==e.dataType&&o.Event.fire("tileLoaded",e.sourceId)})).on("error",(function(e){return o.Event.fire("error",e.error)})).on("idle",!1===e.lastView?function(){return o.Event.fire("idle")}:function(){ga(o,ka,ja).call(o),o.Event.fire("idle")}),document.addEventListener("fullscreenchange",(function(){return o.Event.fire("fullscreen",document.fullscreenElement==o.placeholder())})),this.Ui=new dn(this,e.ui),a&&this.language(a)}else setTimeout(t.bind(this),100,e)}).bind(this)()}function Oa(e,t){this._overlayClick&&"mousemove"!=e?delete this._overlayClick:this.Event.fire(e,ha(ha({},t.point),{},{lon:t.lngLat.lng,lat:t.lngLat.lat}))}function ja(){var e=this.Renderer.getCenter(),t=e.lng,r=e.lat,n=this.Renderer.getZoom();localStorage.setItem("sphere_center","[".concat(t,",").concat(r,",").concat(n,"]"))}function Pa(){try{var e=localStorage.getItem("sphere_center");return JSON.parse(e)||ma}catch(e){}return ma}function Ta(e,t){if("Tile"==t&&(e.startsWith(server.vector)||e.startsWith(server.raster)))return{url:"".concat(e).concat(e.includes("?")?"&":"?","key=").concat(apikey)}}sphere.Map=Sa})();var __webpack_exports__={};sphere.Util.append(document.head,"style",{type:"text/css",innerHTML:'@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.maplibregl-map .sphere-load,.thsearch-placeholder .sphere-load,.throute-placeholder .sphere-load{width:30px;height:30px;margin:16px auto;border:5px solid #eee;border-top:5px solid #183b7f;border-radius:50%;animation:spin 2s linear infinite}.maplibregl-map a:link,.maplibregl-map a:visited,.maplibregl-map .sphere-link{color:#2988f0;text-decoration:none;cursor:pointer}.maplibregl-map a:hover,.maplibregl-map a:active,.maplibregl-map .sphere-link:hover{color:#ffa940;text-decoration:underline}.maplibregl-marker.sphere-clickable{cursor:pointer}.maplibregl-marker .sphere-geomlabel{padding:0 2px;background:#fafafa;font-size:10px;font-weight:bold;box-shadow:2px 2px 4px #444;white-space:nowrap;opacity:0.8}.maplibregl-popup .sphere-popup_title{height:20px;margin:0 0 4px 0;font-size:14px;font-weight:bold;overflow:hidden}.maplibregl-popup .sphere-popup_detail{max-height:360px;word-wrap:break-word;overflow-y:auto;line-height:1.3}.maplibregl-popup .sphere-overlay_info{color:#888;font-size:11px}.maplibregl-popup .sphere-overlay_image{text-align:center}.maplibregl-popup .sphere-overlay_description{margin:4px 0}.maplibregl-popup .sphere-overlay_camera{width:320px;min-height:180px;max-height:240px}.maplibregl-popup .sphere-overlay_camera_overlay{width:320px}.maplibregl-popup .sphere-overlay_aqi{margin-top:4px;padding:4px 8px;border-radius:4px;width:125px;height:48px}.maplibregl-popup .sphere-overlay_aqi div{margin-top:4px;font-size:24px;font-weight:bold;text-align:right}.maplibregl-popup .sphere-poi_item svg{float:left}.maplibregl-popup .sphere-poi_item .sphere-poi_info{min-height:24px;margin:8px 0 0 32px}.maplibregl-popup .sphere-poi_menu{margin:8px 0 0 0;border-top:1px solid #ccc}.maplibregl-canvas-container .sphere-contextmenu{width:180px;padding:6px!important;box-shadow:2px 2px 6px #888;color:#444!important;background:#fafafa!important;border-radius:5px}.maplibregl-canvas-container .sphere-contextmenu .sphere-load{margin:10px auto}.maplibregl-canvas-container .sphere-contextmenu .sphere-link{pointer-events:auto}.maplibregl-canvas-container .sphere-contextmenu .sphere-text{cursor:text;pointer-events:auto;user-select:all}.maplibregl-canvas-container .sphere-contextmenu_poi{height:18px;overflow:hidden}.maplibregl-canvas-container .sphere-contextmenu_poi img{width:14px;margin:0 2px 0 0;vertical-align:middle}.maplibregl-canvas-container .sphere-contextmenu_location{color:#777}.maplibregl-canvas-container .sphere-contextmenu_extra{margin-top:8px;padding-top:8px;border-top:1px solid #eee}.maplibregl-canvas-container .sphere-tooltip{margin:20px 0 0 0;padding:2px 4px!important;font-size:11px}.maplibregl-control-container .sphere-dpad{width:45px;height:45px;margin:2px 0 0 2px}.maplibregl-control-container .sphere-dpad .sphere-goleft{position:absolute;left:2px;top:0;bottom:0;width:16px;height:16px;margin:auto;cursor:pointer}.maplibregl-control-container .sphere-dpad .sphere-goright{position:absolute;right:2px;top:0;bottom:0;width:16px;height:16px;margin:auto;cursor:pointer}.maplibregl-control-container .sphere-dpad .sphere-goup{position:absolute;left:0;right:0;top:2px;width:16px;height:16px;margin:auto;cursor:pointer}.maplibregl-control-container .sphere-dpad .sphere-godown{position:absolute;left:0;right:0;bottom:2px;width:16px;height:16px;margin:auto;cursor:pointer}.maplibregl-control-container .sphere-dpad .sphere-zoomlabel{position:absolute;left:0;right:0;top:0;bottom:0;height:18px;margin:auto;color:#183b7f;font-weight:bold;text-align:center;user-select:none}.maplibregl-control-container .sphere-menubar .sphere-button{padding:4px 8px;border-right:1px solid #ddd;font-size:11px;display:inline-block;cursor:pointer}.maplibregl-control-container .sphere-menubar .sphere-button:last-child{border-right:none}.maplibregl-control-container .sphere-menubar .sphere-button-active{background:#2988f0!important;color:#fafafa}.maplibregl-control-container .sphere-menubar .sphere-button-active:first-child{border-top-left-radius:4px;border-bottom-left-radius:4px}.maplibregl-control-container .sphere-menubar .sphere-button-active:last-child{border-top-right-radius:4px;border-bottom-right-radius:4px}.maplibregl-map .sphere-toast{position:absolute;left:0;right:0;height:22px;bottom:-30px;width:292px;margin:auto;padding:4px;text-align:center;color:#fafafa;background:#000;opacity:0.6;border-top-left-radius:4px;border-top-right-radius:4px;transition:bottom.3s}@media (hover:hover){.maplibregl-control-container .sphere-menubar .sphere-button:hover{background:#f2f2f2}.maplibregl-control-container .sphere-menubar .sphere-button:hover:first-child{border-top-left-radius:4px;border-bottom-left-radius:4px}.maplibregl-control-container .sphere-menubar .sphere-button:hover:last-child{border-top-right-radius:4px;border-bottom-right-radius:4px}}.thsearch-placeholder{min-width:240px}.thsearch-placeholder .thsearch-list{margin:0;padding:0;list-style:none;cursor:pointer}.thsearch-placeholder .thsearch-item{margin:0;padding:8px 4px 8px 6px;border-bottom:1px solid #ddd;background:#fafafa;font-size:14px}.thsearch-placeholder .thsearch-item:hover{background:#eee}.thsearch-placeholder .thsearch-zoom{float:right;margin:0 0 0 2px}.thsearch-placeholder .thsearch-icon,.thsearch-placeholder svg{width:16px;margin:4px 6px 20px 0;float:left}.thsearch-placeholder .thsearch-address{margin:2px 0 0 20px;color:#999;font-size:11px}.thsearch-placeholder .thsearch-empty{padding:6px 0;color:#888;text-align:center}.thsearch-placeholder .thsearch-more{padding:6px 0;text-align:center;color:#fafafa;background:#2988f0;cursor:pointer}.throute-placeholder{min-width:240px}.throute-placeholder .throute-error{color:#ce203b;text-align:center}.throute-placeholder .throute-menu{width:29%;padding:2%;font-weight:bold;background:#eef;cursor:pointer;text-align:center;display:inline-block}.throute-placeholder .throute-menu:hover{background:#eff}.throute-placeholder .throute-pref{padding:8px;background:#eff}.throute-placeholder .throute-pref_right{float:right;width:50%}.throute-placeholder .throute-pref label{display:block}.throute-placeholder button{margin:12px 0 4px 0}.throute-placeholder .throute-info{height:16px;padding:8px;border-bottom:1px solid #ddd;color:#fafafa;background:#888;font-size:16px}.throute-placeholder .throute-interval{float:right}.throute-placeholder .throute-list{margin:0;padding:0;list-style:none}.throute-placeholder .throute-item{padding:8px 4px 8px 6px;border-bottom:1px solid #ddd;background:#efe}.throute-placeholder .throute-item:hover{background:#eee;cursor:pointer}.throute-placeholder .throute-type_air{background:#edf}.throute-placeholder .throute-type_rail{background:#ffd}.throute-placeholder .throute-type_ferry{background:#def}.throute-placeholder .throute-dest{background:#fed!important}.throute-placeholder .throute-poi{color:#c30}.throute-placeholder .throute-road{color:#39c}.throute-placeholder .throute-dist{color:#888;font-size:11px;margin:0 0 0 2px;float:right}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background:url(\'data:image/svg+xml,<svg width="29" height="29" viewBox="0 0 29 29" xmlns="http://www.w3.org/2000/svg" fill="%23183b7f"><path d="M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z"/></svg>\')}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background:url(\'data:image/svg+xml,<svg width="29" height="29" viewBox="0 0 29 29" xmlns="http://www.w3.org/2000/svg" fill="%23183b7f"><path d="M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z"/></svg>\')}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background:url(\'data:image/svg+xml,<svg width="29" height="29" viewBox="0 0 29 29" xmlns="http://www.w3.org/2000/svg" fill="%23183b7f"><path d="M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z"/></svg>\')}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background:url(\'data:image/svg+xml,<svg width="29" height="29" viewBox="0 0 29 29" xmlns="http://www.w3.org/2000/svg" fill="%23183b7f"><path d="M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z"/></svg>\')}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background:url(\'data:image/svg+xml,<svg width="29" height="29" viewBox="0 0 29 29" xmlns="http://www.w3.org/2000/svg" fill="%23183b7f"><path d="M10.5 14l4-8 4 8h-8z"/><path d="M10.5 16l4 8 4-8h-8z" fill="%23ccc"/></svg>\')}'});})()